<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">

    <title>Terrain Test</title>

    <script src="../res/libraries/three.js"></script>

      <script src="res/js/renderers/Projector.js"></script>

    <script src="../dist/gamestack/gamestack.js"></script>

    <script src="res/scripts/gamestack.terrain.js"></script>

    <!-- spritebox-example.css style -->
    <link rel="stylesheet" href="../res/styles/spritebox-example.css">

    <style>

      #threejs-window {
        position: absolute;
        width: 100%;
        height: 100%;
      }
      div.hidden {
        visibility: initial;
      }
    </style>

  </head>
  <body>

    <header>
      <img src="../res/images/spritebox-logo.png" alt="" id="logo">
      <span class="title">Terrain-Test</span>
    </header>

    <div id="threejs-window" class="hidden"></div>

    <script>
    var game2DWindow = new Gamestack.GameWindow();


    var spatialPattern = new Gamestack.SpatialPattern('res/images/rectangle-select-1.png', 50)
                                .Min(-2000, -2000).Max(2000, 2000);

    spatialPattern.StepFunction(function(x, y){

        return x % 200 == 0 && y % 200 == 0;

    });

    spatialPattern.Fill(function(sprites){

      sprites.forEach(function($S){

          game2DWindow.add($S);
        
      });

    });

      var blocks = [];

      for (var x = 0; x < 100; x++) {
        var sprite = new Gamestack.Terrain('res/images/blocks/square_brick.png');

        sprite.Position(new Gamestack.Vector(x * 50, 500));

        sprite.onLoad(function () {

          this.Size(50, 50);

        });

        game2DWindow.add(sprite);

        blocks.push(sprite);

      }


      game2DWindow.animate();
    </script>

  </body>
</html>
