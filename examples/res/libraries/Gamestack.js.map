{"version":3,"sources":["../../ecma/Gamestack/concat/Gamestack.js"],"names":["Gamestack","GamestackLibrary","lib","settings","DEBUG","gui_mode","recursionCount","defSize","WIDTH","document","body","clientWidth","HEIGHT","clientHeight","game_windows","all_objects","bool_events","__gameWindow","spriteTypes","systemSpriteTypes","__gameWindowList","objectDestroyed","obj","dead","x","gw","y","objects","getObjectById","id","length","interlog","message","div","isNaN","create_id","S4","Math","random","toString","substring","error","quit","Error","console","info","m","log","Modifiers","collideable","args","collision_callback","onCollide","collideables","callback","spatial","Size","z","size","Vector","Pos","position","Rot","rotation","Position","Rotate","Rotation","posable","rotable","informable","name","getArg","description","group","tweenable","curve_string","setTweenCurve","c","cps","split","s1","toLowerCase","s2","curve","TWEEN","Easing","Linear","None","each","ix","easing","iy","easeType","curvesToArray","indexOf","push","applyParentalArgs","parent","Sprite","alert","parent_id","object_id","Collision","basicBoxCollide","pos1","size1","pos2","size2","spriteRectanglesCollide","obj1","obj2","camPos","padding","paddingX","round","paddingY","left","right","top","bottom","pixelsCollide","sourceSprite","targetSprite","hitBox","source","target","height","width","pixelMap","selected_animation","s","sourcePixel","sourceArea","relatedPixel","t","targetPixel","targetArea","_gameWindow","setGameWindow","gameWindow","ExtendEvents","extendedObject","extendedKey","extendor","extendorKey","evtLink","GSEventLink","onRun","onComplete","removeOffscreenObjects","item","onScreen","__keepAlive","keepAlive","remove","removeDeadObjects","isDead","getGameWindow","assignAll","object","keys","__gamestackInstance","list","onResult","i","ready_callstack","ready","reload","callReady","funx","call","InputSystem","init","__running","fallback","k","hasOwnProperty","normalArgs","a","normal","str","replace","isNormalStringMatch","str1","str2","instance_type_pairs","objectList","constructor_name","constructor","type","getById","select","objects_out","__inst","GamestackApi","get","post","contents","jstr","GSO","run_ext","complete_ext","caller","callkey","GameImage","src","onCreate","String","Object","image","createElement","ext","lastIndexOf","onerror","__error","domElement","data","Sound","module","exports","JSON","stringify","$Q","selector","$GFunx","on","evt_key","selectorObject","controller_ix","boolTrigger","boolCall","boolEvent","BoolEvent","On","Call","criterion","between","cparts","__targetGroup","__targetName","before","trim","evt_profile","cix","contains_any","button_mode","GamepadAdapter","item1","item2","onUpdate","update","sprite","hasBoxCollision","condition","key","evt_parts","run","mykey","number","parseFloat","e","propkey","spr","object_out","mainSelector","msfChar","__targetClassName","output","cleanSelectorString","after","getParts","complete","c1","test_str","start_pos","end_pos","contains","contains_all","cList","c2","test_selector_method","Q_TestStrings","test","query","events","mousemove","leftclick","rightclick","middleclick","wheelup","wheelDown","keymap","keyReplace","fromCharCode","extendKey","onFinish","down","extend","downCall","upCall","up","window","setInterval","im","kmapItem","onkeydown","onkeyup","event","gs_key_string","keyCode","evt_object","canvases","getElementsByTagName","getMousePos","pageX","pageY","clientX","scrollLeft","documentElement","clientY","scrollTop","offsetLeft","style","fullMoveInputSystem","pos","Array","el","applyMouseMove","addEventListener","onmousedown","value","which","preventDefault","onmouseup","onload","file_system","localizedSource","hostUrl","gs_folder_ix","loadJSON","filepath","$","getJSON","loadJSONLevel","sprites","xitem","yitem","iz","zitem","add","Typo","MakeArray","Convert","TypeHalt","TypeError","Restore","Datify","Decycle","Clone","TagByType","MergeByType","MergeByKeys","Animation","frameBounds","setToSingleFrame","HTMLImageElement","frameSize","min","max","VectorFrameBounds","termPoint","frameOffset","apply2DFrames","flipX","selected_frame","frames","timer","duration","seesaw_mode","reverse_frames","__isInit","FrameSize","FrameBounds","w","h","minVector","maxVector","termVector","millis","reverse","__frametype","Frame","Image","fcount","quitLoop","framePos","f","frames_reversed","slice","pop","concat","reverseFrames","testCanvas","testCtx","getContext","zIndex","drawImage","unitDimen","StashToCanvas","ColoredPixelGrid","unitSize","ctx","grid","pixel","getImageData","vector","gridObject","colorMap","map","frame","engage","call_on_run","tween","Tween","to","call_on_complete","isComplete","start","continuous","continue","Camera","CanvasStack","__levelMaker","draw","camera","active","drawPortion","drawFrameWithRotation","img","fx","fy","fw","fh","deg","canvasContextObj","flipY","save","rad","PI","translate","rotate","scale","restore","drawData","putImageData","p","camera_pos","scrollFactor","noScroll","targetSize","realWidth","realHeight","offset","Canvas","CollisionSettings","fourway","four_way","stop","GravityForce","subjects","clasticObjects","topClastics","Vector3","accel","__gameStack","itemx","accelY","__inAir","groundMaxY","itemy","collide_stop","collide_stop_top","Force","GForce","Game","srcFile","ControllerEventKeys","left_stick","right_stick","gamepads","__gamepads","intervals","controller_stack","__gamepadMaster","gamepad","index","buttons","axes","mainLoop","clearInterval","gps","navigator","getGamepads","process","game_pad_index","game_pad","gp","stick_left","stick_right","extendFunc","f1","f2","fc","current_cb","parts","parseInt","gpEvents","process_buttons","process_axes","axis1","axia2","ceil","pressed","clearance_1","gpc","bkey","gpix","GamepadEvents","GameWindow","canvas","setAttribute","append","update_ext","onresize","isAbsoluteSize","listout","player","def_update","GameStack","bool","_gw","before_draw_ext","__isDrawable","draw_ext","parentNode","getElementById","onBottom","GSEvent","apply","splice","collect","background","backgroundColor","ixG","time","requestAnimationFrame","animate","__stats","begin","__statsMS","__statsMB","isAtPlay","clearRect","end","Stats","showPanel","dom","appendChild","marginLeft","child_id","parent_key","child_key","InputEvent","btnix","button_ix","gamepad_ix","six","stickix","stick_ix","inputKey","keyboardKeys","keyitem","KeyboardEvent","GamepadEvent","gamepadKeys","CollisionEvent","siblings","callbackFunction","onBool","boolFunction","Bool","BoxCollisionEvent","GSProton","emission_amount_min","emission_amount_max","radius","mass","emissions_frequency","gravity","proton","usingAttraction","usingRepulsion","usingPointZone","pointZoneX","pointZoneY","usingBlendAlpha","attraction","repulsion","startAlpha","endAlpha","startColor_asRandom","startColor","startScale","endScale","endColor_asRandom","endColor","positionX_asRandom","positionY_asRandom","positionX","positionY","vSpeedMin","vSpeedMax","vSpeedRotationMin","vSpeedRotationMax","lifeMin","lifeMax","initializers","behaviors","replacement","ticker","collideableArray","minRot","maxRot","replaceBehaviorByType","Proton","V","Span","grav","Gravity","minV","maxV","emitter","floor","particles","initializes","isRectangularCollision","collide","emit_mode","Emitter","emission_amount","rps","rate","Rate","allNumbers","ImageTarget","Mass","Life","PointZone","Alpha","Color","Infinity","easeInSine","Scale","attractionX","attractionY","attractionMin","attractionMax","Attraction","repulsionX","repulsionY","repulsionMin","repulsionMax","Repulsion","Radius","addInitialize","b","addBehaviour","emit","addEmitter","renderer","Renderer","blendFunc","tick","stopEmit","ProtonPresets","head","innerHTML","HtmlExtra","applyCSSArgs","norms","widthFloat","heightFloat","topFloat","bottomFloat","color","text","fontFamily","font","border","fontSize","fontsize","targetBottom","get_float_pixels","targetTop","fadeTime","in","out","o","opacity","v","targetLeft","targetRight","innerText","d","fadeInTime","fadeOutTime","float","dimen","fun","show_interval","setTimeout","hide_interval","TextDisplay","textDisplayArg","create_dom","leftFloat","rightFloat","display","textAlign","textContent","fadeIn","ImageStatDisplay","text_id","img_id","span","marginTop","pixelFontSize","verticalAlign","Bar","backgroundSize","backgroundPosition","BarFill","BarDisplay","barDisplayArgs","inner","outer","outer_src","fill_width","fill_height","fill_color","CreateDom","innerDom","outerDom","Top","Left","Bottom","Right","fill","bar","color_or_src","css_border","portion_width","portion_height","TextBubble","stay","borderRadius","borderColor","paddingBottom","Level","backgrounds","terrains","interactives","threes","Curves","linearNone","easeInQuadratic","easeOutQuadratic","easeInOutQuadratic","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuartic","easeOutQuartic","easeInOutQuartic","easeInQuintic","easeOutQuintic","easeInOutQuintic","inOutCurves","quadratic","cubic","quartic","quintic","linear","InOut","Line","points","pointDisp","r","num","curveMethod","curve_size","current_point","abs","trig_distance_xy","TransposeByRotation","cx","cy","angle","radians","cos","sin","nx","ny","np","highlight_sprites","point","sub","WaveLine","curve_key","curve_options","is_highlighted","iterations","max_size","growth","tposition","n","found","equals","curveCall","existing_canvas","context","fillStyle","fillRect","lineWidth","strokeStyle","beginPath","moveTo","lineTo","closePath","stroke","position_old","test_graph_size","get_line_segment","yTrack","max_recursion","dist","ptrack","pct","mult","ShapeLine","targetTotalPoints","total","elipse","center","perim","sqrt","step","Fill","quad","stepX","stepY","p1","Motion","state_save","TweenMotion","transition","trans","transition_options","curvesList","delay","tweens","targetCheck","motion_curve","line","easeInOutQuad","t1","t2","minPointDist","first_segment","extendLinePoints","segment","next_points","last_point","sr","GeoMath","rotatePointsXY","curve_iterations","LineMotion","Highlight","Total","Eliptical","Quadrilateral","Projectile","animation","origin","highlighted","anime","rot_offset","speed","numberShots","disp","__playerInst","bx","by","bw","bh","half","shot","setAnimation","stats","damage","options","setSize","lp","Shapes","circle","freq","square","rect","triangle","base","Shot","imageOrAnimation","rot_disp","rot_disp_per_unit","curve_growth","velocity","Rectangle","VectorBounds","get_curve_from_string","pointDist","get_curve_string","t_points","next_segment","t_len","transpose","point_highlighter","theta","sound","onLoad","loop","val","volume","play","SoundList","sounds","animations","apply_args","load","err","FromData","life","motions","shots","__initializers","collision_bounds","acceleration","rot_speed","rot_accel","onInit","fxlCopy","scaleFloat","SpriteInitializers","f_init","framesize","__mapSize","mx","my","wth","htw","keyString1","keyString2","extendedFunc","ef","lineObject","curveKey","motionCurveOptions","__crtLineIx","pctFloat","ixChange","grid1","getCurrentColorMap","grid2","basicBoxCollision","prep_key","bullet","rotPlus","CurvedLine","Curve","SegmentSize","MaxSize","Growth","subsprite","assertSpeed","diff","amt","prop","Quadratic","diff_min_y","diff_min_x","diff_max_y","diff_max_x","dimens","minkey","apart","ct","diffX","distX","overlap_x","diffY","distY","overlap_y","collide_stop_x","file_path","decycle","copied","valid_check","undefined","v1","v2","minFloat","maxFloat","p2","atan2","Vector2","VectorMath","Background","arg1","arg2","source_objects","members","rows","cols","flip","approxRows","approxCols","xBacksTotal","yBacksTotal","minX","maxX","minY","maxY","campos","cleanCheck","cancat","Interactive","collision_settings","Extendors","Terrain","colliders","THREE_EXT","defaults","DodecahedronGeometry","detail","SphereGeometry","widthSegments","heightSegments","BoxGeometry","depth","CylinderGeometry","radiusTop","radiusBottom","TorusGeometry","tube","radialSegments","tubularSegments","Three","THREE","scene","Scene","geometry","AmbientLight","WebGLRenderer","preserveDrawingBuffer","alpha","PerspectiveCamera","loader","TextureLoader","texture","material","MeshPhongMaterial","__init","mesh","Mesh","render","__ServerSideFile","file_upload","toDataURL","relpath","content","singleFrame","clear","pixels","Uint8Array","gl","readPixels","RGBA","UNSIGNED_BYTE","ImageData","Uint8ClampedArray","paths","derez","path","nu","$ref","prototype","retrocycle","px","rez","eval","mode","container","cssText","children","addPanel","panel","beginTime","performance","Date","now","prevTime","fpsPanel","Panel","msPanel","self","memory","memPanel","REVISION","usedJSHeapSize","jsHeapSizeLimit","setMode","fg","bg","PR","devicePixelRatio","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","textBaseline","fillText","globalAlpha","maxValue","_tweens","getAll","removeAll","preserve","_object","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_repeat","_repeatDelayTime","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onCompleteCallback","_onStopCallback","field","properties","property","stopChainedTweens","numChainedTweens","amount","repeat","times","repeatDelay","yoyo","interpolation","chain","arguments","onStart","onStop","elapsed","charAt","isFinite","tmp","In","Out","Cubic","Quartic","Quintic","Sinusoidal","Exponential","pow","Circular","Elastic","Back","Bounce","fn","Utils","Bezier","pw","bn","Bernstein","CatmullRom","p0","Factorial","p3","v0","t3","CreateGamestack","root","define","amd"],"mappings":"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","file":"Gamestack.js","sourcesContent":["/**@author\r\n Jordan Blake\r\n * */\r\n\r\n/**@copyright\r\n Copyright 2018\r\n **/\r\n\r\n/**\r\n * Main module-object; references all Gamestack classes.\r\n * */\r\n\r\n\r\n\r\n\r\nlet Gamestack = {};\r\n\r\nlet GamestackLibrary = function () {\r\n\r\n    var lib = {\r\n\r\n        settings: {\r\n\r\n            DEBUG: false,\r\n\r\n            gui_mode: true,\r\n\r\n            recursionCount: 0\r\n        },\r\n\r\n        defSize()\r\n        {\r\n            if(this.WIDTH == 0)\r\n            {\r\n                this.WIDTH = document.body.clientWidth;\r\n            }\r\n\r\n            if(this.HEIGHT == 0)\r\n            {\r\n                this.HEIGHT = document.body.clientHeight;\r\n            }\r\n\r\n        },\r\n\r\n        WIDTH:0,\r\n\r\n        HEIGHT:0,\r\n\r\n        game_windows: [],\r\n\r\n        all_objects: [],\r\n\r\n        bool_events: [],\r\n\r\n        __gameWindow: {}\r\n        ,\r\n\r\n        spriteTypes: [],\r\n\r\n        systemSpriteTypes: ['player', 'enemy', 'background', 'interactive', 'terrain', 'weapon', 'subsprite'],\r\n\r\n        __gameWindowList: [],\r\n\r\n        objectDestroyed(obj)\r\n        {\r\n            var dead = true;\r\n\r\n            for(var x in this.game_windows)\r\n            {\r\n                let gw = this.game_windows[x];\r\n\r\n                for(var y in gw.objects)\r\n                {\r\n                    if(gw.objects[y] === obj)\r\n                        dead = false;\r\n\r\n                }\r\n            }\r\n\r\n            return dead;\r\n\r\n        },\r\n\r\n        getObjectById(id) {\r\n\r\n            for (var x = 0; x < this.all_objects.length; x++) {\r\n                if (this.all_objects[x].id == id) {\r\n\r\n                    return this.all_objects[x];\r\n\r\n                }\r\n            }\r\n        }\r\n        ,\r\n\r\n        interlog: function (message, div) //recursive safe :: won't go crazy with recursive logs :: log message every x times this is called\r\n        {\r\n            this.recursionCount++;\r\n\r\n            if (!isNaN(div) && this.settings.recursionCount % div == 0) {\r\n                //   console.log('Interval Log:'+  message);\r\n            }\r\n        }\r\n        ,\r\n\r\n\r\n        create_id: function () {\r\n            var S4 = function () {\r\n                return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n            };\r\n            return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\r\n        },\r\n\r\n\r\n        error: function (quit, message) {\r\n\r\n            if (quit) {\r\n                throw new Error(message);\r\n            }\r\n            else {\r\n                console.error('E!' + message);\r\n            }\r\n        }\r\n        ,\r\n\r\n        info: function (m) {\r\n\r\n            if (Gamestack.DEBUG) {\r\n                console.info('Info:' + m);\r\n            }\r\n        }\r\n        ,\r\n\r\n\r\n        log: function (m) {\r\n\r\n            if (Gamestack.DEBUG) {\r\n                console.log('Gamestack:' + m);\r\n            }\r\n        }\r\n        ,\r\n\r\n        Modifiers: {\r\n\r\n            collideable(obj, args) {\r\n\r\n                obj.collision_callback = function () {\r\n                };\r\n\r\n                obj.onCollide = args.onCollide || function (collideables, callback) {\r\n                    if (typeof(collideables) == 'function') {\r\n                        callback = collideables;\r\n\r\n                    }\r\n\r\n                    this.collision_callback = callback || function () {\r\n                    };\r\n\r\n                };\r\n\r\n            },\r\n\r\n            spatial(obj) {\r\n                obj.Size = function (x, y, z) {\r\n\r\n                    if (typeof(x) == 'object')\r\n                        this.size = new Gamestack.Vector(x);\r\n\r\n                    else if (!isNaN(x) && !isNaN(y)) //has minimum of numeric x and y\r\n                        this.size = new Gamestack.Vector(x, y, z);\r\n\r\n                    else  //use x accross the vector\r\n                        this.size = new Gamestack.Vector(x, x, x);\r\n\r\n\r\n                    return this;\r\n                };\r\n\r\n                obj.Pos = function (x, y, z) {\r\n\r\n                    if (typeof(x) == 'object')\r\n                        this.position = new Gamestack.Vector(x);\r\n\r\n                    else if (!isNaN(x) && !isNaN(y)) //has minimum of numeric x and y\r\n                        this.position = new Gamestack.Vector(x, y, z);\r\n\r\n                    else  //use x accross the vector\r\n                        this.position = new Gamestack.Vector(x, x, x);\r\n\r\n                    return this;\r\n                };\r\n\r\n                obj.Rot = function (x, y, z) {\r\n\r\n                    if (typeof(x) == 'object')\r\n                        this.rotation = new Gamestack.Vector(x);\r\n\r\n                    else if (!isNaN(x) && !isNaN(y)) //has minimum of numeric x and y\r\n                        this.rotation = new Gamestack.Vector(x, y, z);\r\n\r\n                    else  //use x accross the vector\r\n                        this.rotation = new Gamestack.Vector(x, x, x);\r\n\r\n                    return this;\r\n                };\r\n\r\n                obj.Position = obj.Pos;\r\n\r\n                obj.Rotate = obj.Rot;\r\n\r\n                obj.Rotation = obj.Rot;\r\n\r\n            },\r\n\r\n            posable() {\r\n\r\n                obj.Pos = function (x, y, z) {\r\n\r\n                    if (typeof(x) == 'object')\r\n                        this.position = new Gamestack.Vector(x);\r\n\r\n                    else if (!isNaN(x) && !isNaN(y)) //has minimum of numeric x and y\r\n                        this.position = new Gamestack.Vector(x, y, z);\r\n\r\n                    else  //use x accross the vector\r\n                        this.position = new Gamestack.Vector(x, x, x);\r\n\r\n                    return this;\r\n                };\r\n\r\n                obj.Position = obj.Pos;\r\n\r\n            },\r\n\r\n            rotable() {\r\n                obj.Rot = function (x, y, z) {\r\n\r\n                    if (typeof(x) == 'object')\r\n                        this.rotation = new Gamestack.Vector(x);\r\n\r\n                    else if (!isNaN(x) && !isNaN(y)) //has minimum of numeric x and y\r\n                        this.rotation = new Gamestack.Vector(x, y, z);\r\n\r\n                    else  //use x accross the vector\r\n                        this.rotation = new Gamestack.Vector(x, x, x);\r\n\r\n                    return this;\r\n                };\r\n\r\n                obj.Rotate = obj.Rot;\r\n\r\n                obj.Rotation = obj.Rot;\r\n\r\n            },\r\n\r\n            informable(obj, args) {\r\n                obj.name = Gamestack.getArg(args, 'name', \"__ObjectName\");\r\n\r\n                obj.description = Gamestack.getArg(args, 'description', false);\r\n\r\n                obj.group = Gamestack.getArg(args, 'group', 'one');\r\n            },\r\n\r\n            tweenable(obj, args) {\r\n\r\n                obj.curve_string = args.curve_string || \"linearNone\";\r\n\r\n                obj.setTweenCurve = function (c) {\r\n\r\n                    c = c || \"linear_none\";\r\n\r\n                    var cps = c.split('_');\r\n\r\n                    //alert(cps);\r\n\r\n                    var s1 = cps[0].toLowerCase(), s2 = cps[1].toLowerCase();\r\n\r\n                    var curve = TWEEN.Easing.Linear.None;\r\n\r\n                    obj.curve_string = 'linear_none'\r\n\r\n                    Gamestack.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n                        Gamestack.each(TWEEN.Easing[ix], function (iy, easeType) {\r\n\r\n                            if (ix == s1 && iy == s2) {\r\n\r\n                                // alert('setting curve');\r\n\r\n                                curve = TWEEN.Easing[ix][iy];\r\n\r\n                                obj.curve_string = ix + '_' + iy;\r\n\r\n                            }\r\n\r\n                        });\r\n\r\n                    });\r\n\r\n                    obj.curve = curve;\r\n\r\n                    return curve;\r\n\r\n                };\r\n\r\n                obj.curvesToArray = function () {\r\n\r\n                    var c = [];\r\n\r\n                    Gamestack.each(TWEEN.Easing, function (ix, easing) {\r\n\r\n                        Gamestack.each(easing, function (iy, easeType) {\r\n\r\n                            if (['in', 'out', 'inout', 'none'].indexOf(iy.toLowerCase()) >= 0) {\r\n\r\n                                c.push(ix + \"_\" + iy);\r\n\r\n                            }\r\n\r\n                        });\r\n\r\n                    });\r\n\r\n                    return c;\r\n\r\n                };\r\n\r\n            },\r\n\r\n            applyParentalArgs(obj, args) {\r\n\r\n                if (args.parent instanceof Gamestack.Sprite) {\r\n                    alert('parent was Sprite()');\r\n\r\n                    obj.parent = args.parent;\r\n\r\n                    obj.parent_id = obj.parent.id;\r\n\r\n                }\r\n                else {\r\n                    obj.parent_id = args.parent_id || args.object_id || \"__blank\"; //The parent object\r\n\r\n                    obj.parent = Gamestack.getObjectById(obj.parent_id);\r\n                }\r\n\r\n                return obj.parent;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        Collision: {\r\n\r\n            basicBoxCollide(pos1, size1, pos2, size2) {\r\n                return pos1.x >= pos2.x - size1.x &&\r\n                    pos1.x <= pos2.x + size2.x &&\r\n                    pos1.y >= pos2.y - size1.y &&\r\n                    pos1.y <= pos2.y + size2.y;\r\n            },\r\n\r\n            spriteRectanglesCollide(obj1, obj2, gw) {\r\n                gw = gw || Gamestack.game_windows[0];\r\n\r\n                var camPos = new Gamestack.Vector(0, 0, 0);\r\n\r\n                obj1.padding = obj1.padding || new Gamestack.Vector(0, 0, 0);\r\n\r\n                var paddingX = Math.round(obj1.padding.x * obj1.size.x),\r\n\r\n                    paddingY = Math.round(obj1.padding.y * obj1.size.y), left = obj1.position.x + paddingX + camPos.x,\r\n\r\n                    right = obj1.position.x + obj1.size.x - paddingX + camPos.x,\r\n\r\n                    top = obj1.position.y + camPos.y + paddingY,\r\n                    bottom = obj1.position.y + obj1.size.y - paddingY + camPos.y;\r\n\r\n                if (right > obj2.position.x && left < obj2.position.x + obj2.size.x &&\r\n                    bottom > obj2.position.y && top < obj2.position.y + obj2.size.y) {\r\n\r\n                    return true;\r\n\r\n                }\r\n\r\n            },\r\n\r\n            pixelsCollide(sourceSprite, targetSprite, gw) {\r\n                gw = gw || Gamestack.game_windows[0];\r\n\r\n                var camPos = new Gamestack.Vector(0, 0, 0);\r\n\r\n                /* Box model detection, return true on collision */\r\n                function hitBox(source, target) {\r\n                    /* Source and target objects contain x, y and width, height */\r\n                    return !(\r\n                        ((source.y + source.height) < (target.y)) ||\r\n                        (source.y > (target.y + target.height)) ||\r\n                        ((source.x + source.width) < target.x) ||\r\n                        (source.x > (target.x + target.width))\r\n                    );\r\n                }\r\n\r\n                var source = {\r\n\r\n                        position: sourceSprite.position,\r\n\r\n                        pixelMap: sourceSprite.selected_animation.pixelMap\r\n\r\n                    },\r\n\r\n                    target = {\r\n\r\n                        position: targetSprite.position,\r\n\r\n                        pixelMap: targetSprite.selected_animation.pixelMap\r\n\r\n                    };\r\n\r\n                // Loop through all the pixels in the source image\r\n                for (var s = 0; s < source.pixelMap.length; s++) {\r\n                    var sourcePixel = source.pixelMap[s];\r\n                    // Add positioning offset\r\n                    var sourceArea = {\r\n                        x: sourcePixel.x + sourceSprite.position.x,\r\n                        y: sourcePixel.y + sourceSprite.position.y,\r\n                        width: 1,\r\n                        height: 1\r\n                    };\r\n\r\n                    var relatedPixel;\r\n\r\n                    // Loop through all the pixels in the target image\r\n                    for (var t = 0; t < target.pixelMap.length; t++) {\r\n                        var targetPixel = target.pixelMap[t];\r\n                        // Add positioning offset\r\n                        var targetArea = {\r\n                            x: targetPixel.x + targetSprite.position.x,\r\n                            y: targetPixel.y + targetSprite.position.y,\r\n                            width: 1,\r\n                            height: 1\r\n                        };\r\n\r\n                        /* Use the earlier aforementioned hitbox function */\r\n                        if (hitBox(sourceArea, targetArea)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        ,\r\n\r\n        _gameWindow: {}\r\n        ,\r\n\r\n        setGameWindow: function (gameWindow) {\r\n            this._gameWindow = gameWindow;\r\n        }\r\n        ,\r\n\r\n        ExtendEvents: function (extendedObject, extendedKey, extendor, extendorKey) {\r\n            var evtLink = new GSEventLink(extendedObject, extendedKey, extendor, extendorKey);\r\n\r\n            this.all_objects.push(new GSEventLink(extendedObject, extendedKey, extendor, extendorKey));\r\n\r\n            var parent = extendedObject;\r\n\r\n            // console.log(parent);\r\n\r\n            if (parent) {\r\n                console.log('Gamestack:EXTENDING EVENTS:' + extendedKey + \":\" + extendorKey);\r\n\r\n                if (parent.onRun) //Any extendable object has an onRun ... OR\r\n                {\r\n                    parent.onRun(extendor, extendorKey);\r\n\r\n                }\r\n                if (parent.onComplete) //object has an onComplete\r\n                {\r\n                    parent.onComplete(extendor, extendorKey);\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n        },\r\n\r\n        removeOffscreenObjects: function (gw) {\r\n\r\n            gw = gw || Gamestack.game_windows[0];\r\n\r\n            Gamestack.each(Gamestack.all_objects, function (ix, item) {\r\n\r\n                if (item instanceof Gamestack.Sprite && item.onScreen() == false && !item.__keepAlive && !item.keepAlive) {\r\n\r\n                    gw.remove(item);\r\n\r\n                }\r\n            });\r\n        },\r\n\r\n        removeDeadObjects: function (gw) {\r\n\r\n            gw = gw || Gamestack.game_windows[0];\r\n\r\n            Gamestack.each(Gamestack.all_objects, function (ix, item) {\r\n\r\n                if (item instanceof Gamestack.Sprite && item.isDead()) {\r\n\r\n                    // console.log('removing:' + item.image.domElement.src);\r\n                    gw.remove(item);\r\n\r\n                }\r\n            });\r\n        },\r\n\r\n        getGameWindow: function () {\r\n\r\n            return this._gameWindow;\r\n        }\r\n        ,\r\n\r\n        assignAll: function (object, args, keys) {\r\n\r\n            __gamestackInstance.each(keys, function (ix, item) {\r\n\r\n                object[ix] = args[ix];\r\n\r\n            });\r\n\r\n        }\r\n        ,\r\n\r\n\r\n        each: function (list, onResult, onComplete) {\r\n            for (var i in list) {\r\n                onResult(i, list[i]);\r\n            }\r\n\r\n            if (typeof(onComplete) === 'function') {\r\n                onComplete(false, list)\r\n            }\r\n            ;\r\n\r\n        }\r\n        ,\r\n\r\n        ready_callstack: [],\r\n\r\n        ready: function (callback) {\r\n\r\n            this.ready_callstack.push(callback);\r\n\r\n        }\r\n\r\n        ,\r\n\r\n        reload: function () {\r\n            this.callReady();\r\n\r\n        },\r\n\r\n        callReady: function () {\r\n\r\n            var funx = this.ready_callstack;\r\n\r\n            var gameWindow = this._gameWindow, lib = this, objects = this.__gameWindow.objects;\r\n\r\n            //call every function in the ready_callstack\r\n\r\n\r\n            this.each(funx, function (ix, call) {\r\n\r\n                call(lib, gameWindow, objects);\r\n\r\n            });\r\n\r\n            this.InputSystem.init();\r\n\r\n            this.__running = true;\r\n\r\n        }\r\n        ,\r\n\r\n        getArg: function (args, keys, fallback) {\r\n\r\n            if (typeof(keys) == 'string') {\r\n                keys = [keys]; //always array\r\n            }\r\n            for (var x = 0; x < keys.length; x++) {\r\n                var k = keys[x];\r\n\r\n                if (args && args.hasOwnProperty(k)) {\r\n                    return args[k]; //return first argument match\r\n                }\r\n            }\r\n            return fallback;\r\n        }\r\n        ,\r\n\r\n        normalArgs: function (args) {\r\n\r\n            var a = {};\r\n\r\n            function normal(str) {\r\n                return str.toLowerCase().replace('-', '').replace(' ', '').replace('_', '')\r\n            };\r\n\r\n            for (var x in args) {\r\n                a[normal(x)] = args[x];\r\n            }\r\n\r\n            return a;\r\n        }\r\n        ,\r\n\r\n        isNormalStringMatch: function (str1, str2) {\r\n\r\n            return str1.toLowerCase().replace(' ', '') == str2.toLowerCase().replace(' ', '');\r\n\r\n        },\r\n\r\n        instance_type_pairs: function () {\r\n\r\n            //get an array of all instance/type pairs added to the library\r\n\r\n            //example : [ {constructor_name:Sprite, type:enemy_basic}, {constructor_name:Animation, type:enemy_attack}  ];\r\n\r\n            var objectList = [];\r\n\r\n            this.each(this.all_objects, function (ix, item) {\r\n\r\n                objectList.push({constructor_name: item.constructor.name, type: item.type});\r\n\r\n            });\r\n\r\n            return objectList;\r\n\r\n        },\r\n\r\n        getById: function (id) {\r\n\r\n            for (var x in this.all_objects) {\r\n                if (this.all_objects[x].id == id) {\r\n                    return this.all_objects[x];\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        select: function (constructor_name, name, group /*ignoring spaces and CAPS/CASE on type match*/) {\r\n\r\n            var objects_out = [];\r\n\r\n            var __inst = this;\r\n\r\n            this.each(this.all_objects, function (ix, item) {\r\n\r\n                if (constructor_name == '*' || item.constructor.name == constructor_name) {\r\n\r\n                    if (group == '*' || __inst.isNormalStringMatch(group, item.group)) {\r\n\r\n                        if (name == '*' || __inst.isNormalStringMatch(name, item.name)) {\r\n\r\n                            objects_out.push(item);\r\n\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            });\r\n\r\n            return objects_out;\r\n        }\r\n    }\r\n\r\n    return lib;\r\n\r\n};\r\n\r\nlet GamestackApi =\r\n    {\r\n        get: function () {\r\n\r\n\r\n        },\r\n\r\n        post: function (object) {\r\n            //TODO decycle the object before saving\r\n\r\n            if (!object.id) {\r\n                object.id = Gamestack.create_id();\r\n\r\n            }\r\n\r\n            var name = object.name, type = object.constructor.name, contents = jstr(object), id = object.id;\r\n\r\n\r\n        }\r\n\r\n    };\r\n\r\n\r\n\r\nlet log = function(str)\r\n{\r\n\r\n    console.log(str);\r\n\r\n}\r\n\r\n\r\nclass GSO //Gamestack-Overrideable\r\n{\r\n    constructor(args = {}) {\r\n\r\n        this.run_ext = args.run_ext || [];\r\n\r\n        this.complete_ext = args.complete_ext || [];\r\n\r\n    }\r\n\r\n    /*****\r\n     * Overridable / Extendable functions\r\n     * -allows stacking of external object-function calls\r\n     ******/\r\n\r\n    onRun(caller, callkey) {\r\n        this.run_ext = this.run_ext || [];\r\n\r\n        if (this.run_ext.indexOf(caller[callkey]) == -1) {\r\n            this.run_ext.push({caller: caller, callkey: callkey});\r\n        }\r\n    }\r\n\r\n    onComplete(caller, callkey) {\r\n        this.complete_ext = this.complete_ext || [];\r\n\r\n        if (this.complete_ext.indexOf(caller[callkey]) == -1) {\r\n            this.complete_ext.push({caller: caller, callkey: callkey});\r\n        }\r\n    }\r\n\r\n    call_on_run() {\r\n        //call any function extension that is present\r\n        for (var x = 0; x < this.run_ext.length; x++) {\r\n            this.run_ext[x].caller[this.run_ext[x].callkey]();\r\n        }\r\n    }\r\n\r\n    call_on_complete() {\r\n        //call any function extension that is present\r\n        for (var x = 0; x < this.complete_ext.length; x++) {\r\n            this.complete_ext[x].caller[this.complete_ext[x].callkey]();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n/**\r\n * A an extended game-image object. Creates GameImage, attaches gameImage.domElement --an instance of HTMLImageElement\r\n * @param   {string} src the sourcePath of the image-file.\r\n * @returns {GameImage} a Gamestack.GameImage object.\r\n * */\r\n\r\nclass GameImage {\r\n\r\n    constructor(src, onCreate) {\r\n\r\n        // Gamestack.log('initializing image');\r\n\r\n        if (!src || src instanceof String && !['.jpg', '.png', '.gif'].indexOf(src.toLowerCase()) >= 0) {\r\n            console.info('Requested an UNDEFINED or Non-Image-File for image src');\r\n            return {};\r\n        }\r\n\r\n        if (src instanceof Object && src.src) {\r\n\r\n            //alert('getting image from image');\r\n\r\n            this.image = document.createElement('IMG');\r\n\r\n            this.image.src = src.src;\r\n\r\n            this.src = src.src;\r\n\r\n        }\r\n\r\n        else if (typeof(src) == 'string') {\r\n\r\n            let ext = src.substring(src.lastIndexOf('.'), src.length);\r\n\r\n            this.image = document.createElement('IMG');\r\n\r\n            this.image.src = src;\r\n\r\n            this.src = this.image.src;\r\n\r\n        }\r\n\r\n        if (!this.image) {\r\n            this.image = {error: \"Image not instantiated, set to object by default\"};\r\n\r\n            return {};\r\n\r\n        }\r\n        else {\r\n            this.image.onerror = function () {\r\n                this.__error = true;\r\n            };\r\n\r\n        }\r\n\r\n        this.domElement = this.image;\r\n\r\n        if (src.data || src.image && src.image.data) {\r\n            console.info('GameImage() : found and applied image.data');\r\n            this.data = src.data;\r\n        }\r\n\r\n    }\r\n\r\n    getImage() {\r\n        return this.image;\r\n    }\r\n\r\n}\r\n\r\n\r\n//Gamestack: a main / game lib object::\r\n//TODO: fix the following set of mixed references:: only need to refer to (1) lib-object-instance\r\nGamestack = new GamestackLibrary();\r\n\r\nlet __gamestackInstance = Gamestack;\r\n\r\nGamestack.Sound = Sound;\r\nGamestack.GameImage = GameImage;\r\n\r\nif (typeof module !== 'undefined' && module.exports) {\r\n\r\n    //This library is being instaniated via require() aka node.js require or similar library loader\r\n    module.exports = Gamestack;\r\n\r\n} else {\r\n\r\n\r\n}\r\n\r\n/***************\r\n * TODO : fix the above duplicate references, which exist now for backward compatibility with previouslyh authored code\r\n *  -apply find and replace accross the codebase\r\n * ****************/\r\n\r\n/********\r\n * jstr() : public function for stringifying objects and arrays (uses pretty print style)\r\n * *********/\r\n\r\nfunction jstr(obj) {\r\n\r\n    return JSON.stringify(obj);\r\n\r\n};\r\n\r\nGamestack.jstr = jstr;\r\n\r\n/**********\r\n * $Q : Selector Function\r\n *  -allows string-based-selection of game-objects.\r\n * **********/\r\n\r\nfunction $Q(selector) {\r\n\r\n    //declare events:\r\n\r\n    var $GFunx = {};\r\n\r\n    $GFunx.each = function (callback) {\r\n\r\n        var objects = [];\r\n\r\n        for (var x = 0; x < this.length; x++) {\r\n            if (typeof x == 'number') {\r\n\r\n                callback(x, this[x]);\r\n            }\r\n\r\n        }\r\n\r\n\r\n    };\r\n\r\n    $GFunx.on = function (evt_key, selectorObject, controller_ix, callback) //handle each event such as on('collide') OR on('stick_left_0') << first controller stick_left\r\n    {\r\n\r\n        if (typeof evt_key == 'function' && typeof selectorObject == 'function') {\r\n            //this is a special pattern of if(f() == true){ runFunction(); };\r\n\r\n            var boolTrigger = evt_key, boolCall = selectorObject,\r\n\r\n                boolEvent = new Gamestack.BoolEvent().On(boolTrigger).Call(boolCall);\r\n\r\n        }\r\n\r\n\r\n        var criterion = $Q.between('[', ']', evt_key);\r\n\r\n        if (criterion.indexOf('===') >= 0) {\r\n            criterion = criterion.replace('===', '=');\r\n        }\r\n\r\n        if (criterion.indexOf('==') >= 0) {\r\n            criterion = criterion.replace('==', '=').replace('==', 0);\r\n        }\r\n\r\n        var cparts = criterion.split('=');\r\n\r\n        var __targetGroup = \"*\", __targetName = \"*\";\r\n\r\n        if (evt_key.indexOf('[') >= 0) {\r\n            evt_key = $Q.before('[', evt_key).trim();\r\n\r\n        }\r\n\r\n\r\n        var padding = 0;\r\n\r\n        //if controller_ix is function, and callback not present, then controller_ix is the callback aka optional argument\r\n\r\n        if (controller_ix && typeof controller_ix == 'function' && !callback) {\r\n            callback = controller_ix;\r\n            controller_ix = 0;\r\n        }\r\n\r\n        //if controller_ix is function, and callback not present, then selectorObject is the callback aka optional argument\r\n\r\n        if (selectorObject && typeof selectorObject == 'function' && !callback) {\r\n\r\n            callback = selectorObject;\r\n\r\n            selectorObject = $Q('*');\r\n\r\n            controller_ix = 0;\r\n        }\r\n        ;\r\n\r\n        var evt_profile = {};\r\n\r\n        //which controller?\r\n\r\n        evt_profile.cix = controller_ix;\r\n\r\n        //Need the control key: 'left_stick', 'button_0', etc..\r\n\r\n        evt_profile.evt_key = evt_key;\r\n\r\n        if ($Q.contains_any(['stick', 'button', 'click', 'key'], evt_profile.evt_key)) {\r\n\r\n            var button_mode = evt_profile.evt_key.indexOf('button') >= 0;\r\n\r\n            Gamestack.GamepadAdapter.on(evt_profile.evt_key, 0, function (x, y) {\r\n\r\n                callback(x, y);\r\n\r\n            });\r\n\r\n            console.info('detected input event key in:' + evt_profile.evt_key);\r\n\r\n            console.info('TODO: rig events');\r\n\r\n        }\r\n\r\n        //TODO: test collision events:\r\n\r\n        else if ($Q.contains_any(['collide', 'collision', 'hit', 'touch'], evt_profile.evt_key)) {\r\n\r\n            //   console.info('Rigging a collision event');\r\n\r\n            //   console.info('detected collision event key in:' + evt_profile.evt_key);\r\n\r\n            //  console.info('TODO: rig collision events');\r\n\r\n            this.each(function (ix, item1) {\r\n\r\n                // console.info('Collision Processing 1:' + item1.name);\r\n                //  console.info('Collision Processing 1:' + item1.type);\r\n\r\n                selectorObject.each(function (iy, item2) {\r\n\r\n                    //    console.info('Collision Processing 2:' + item2.name);\r\n                    //   console.info('Collision Processing 2:' + item2.type);\r\n\r\n                    if (typeof(item1.onUpdate) == 'function') {\r\n\r\n                        var update = function (sprite) {\r\n\r\n                            if (this.hasBoxCollision(item2, padding)) {\r\n\r\n                                callback(this, item2);\r\n\r\n                            }\r\n                            ;\r\n\r\n                        };\r\n\r\n                        item1.onUpdate(update);\r\n\r\n                    }\r\n\r\n\r\n                });\r\n\r\n            });\r\n\r\n\r\n        }\r\n\r\n\r\n        else {\r\n            console.info('Rigging a property event');\r\n\r\n            //TODO: test property-watch events:\r\n\r\n            console.info('detected property threshhold event key in:' + evt_profile.evt_key);\r\n\r\n            console.info('TODO: rig property events');\r\n\r\n            var condition = \"_\", key = criterion || evt_profile.evt_key;\r\n\r\n            if (key.indexOf('[') >= 0 || key.indexOf(']') >= 0) {\r\n                key = $Q.between('[', ']', key);\r\n\r\n            }\r\n\r\n            var evt_parts = [];\r\n\r\n            var run = function () {\r\n                console.error('Sprite property check was not set correctly');\r\n\r\n            };\r\n\r\n            if (key.indexOf('>=') >= 0) {\r\n                condition = \">=\";\r\n\r\n\r\n            }\r\n            else if (key.indexOf('<=') >= 0) {\r\n                condition = \"<=\";\r\n            }\r\n            else if (key.indexOf('>') >= 0) {\r\n                condition = \">\";\r\n            }\r\n            else if (key.indexOf('<') >= 0) {\r\n                condition = \"<\";\r\n            }\r\n\r\n            else if (key.indexOf('=') >= 0) {\r\n                condition = \"=\";\r\n            }\r\n\r\n            evt_parts = key.split(condition);\r\n\r\n            for (var x = 0; x < evt_parts.length; x++) {\r\n                evt_parts[x] = evt_parts[x].replace('=', '').replace('=', '').trim(); //remove any trailing equals and trim()\r\n\r\n            }\r\n\r\n            var mykey, number;\r\n\r\n            // alert(evt_parts[0]);\r\n\r\n            try {\r\n\r\n                mykey = evt_parts[0];\r\n\r\n                number = parseFloat(evt_parts[1]);\r\n\r\n            }\r\n            catch (e) {\r\n                console.log(e);\r\n            }\r\n\r\n            console.info('Gamestack:Processing condition with:' + condition);\r\n\r\n            switch (condition) {\r\n\r\n                case \">=\":\r\n\r\n\r\n                    run = function (obj, key) {\r\n                        if (obj[key] >= number) {\r\n                            callback();\r\n                        }\r\n                    };\r\n\r\n                    break;\r\n\r\n                case \"<=\":\r\n\r\n                    run = function (obj, key) {\r\n                        if (obj[key] <= number) {\r\n                            callback();\r\n                        }\r\n                    };\r\n\r\n                    break;\r\n\r\n\r\n                case \">\":\r\n\r\n                    run = function (obj, key) {\r\n                        if (obj[key] > number) {\r\n                            callback();\r\n                        }\r\n                    };\r\n\r\n                    break;\r\n\r\n                case \"<\":\r\n\r\n                    run = function (obj, key) {\r\n                        if (obj[key] < number) {\r\n                            callback();\r\n                        }\r\n                    };\r\n\r\n                    break;\r\n\r\n                case \"=\":\r\n\r\n                    run = function (obj, key) {\r\n                        if (obj[key] == number) {\r\n                            callback();\r\n                        }\r\n                    };\r\n\r\n                    break;\r\n\r\n            }\r\n\r\n\r\n            /************\r\n             * Attach update to each member\r\n             *\r\n             * **************/\r\n\r\n            var keys = mykey.split('.'), propkey = \"\";\r\n\r\n            this.each(function (ix, item) {\r\n\r\n                var object = {};\r\n\r\n                if (keys.length == 1) {\r\n                    object = item;\r\n\r\n                    propkey = mykey;\r\n\r\n                }\r\n                else if (keys.length == 2) {\r\n                    object = item[keys[0]];\r\n\r\n                    propkey = keys[1];\r\n\r\n\r\n                }\r\n\r\n                else if (keys.length == 3) {\r\n                    object = item[keys[0]][keys[1]];\r\n\r\n                    propkey = keys[2];\r\n\r\n                }\r\n                else {\r\n                    console.error(\":length of '.' notation out of range. We use max length of 3 or prop.prop.key.\");\r\n\r\n                }\r\n\r\n                if (typeof item.onUpdate == 'function') {\r\n\r\n\r\n                    var spr = item;\r\n\r\n                    item.onUpdate(function (sprite) {\r\n\r\n                        run(object, propkey);\r\n\r\n                    });\r\n\r\n                }\r\n\r\n            });\r\n\r\n        }\r\n\r\n    };\r\n\r\n    var object_out = new Object();\r\n\r\n    //handle selector / selection of objects:\r\n\r\n    if (typeof(selector) !== 'string') {\r\n\r\n        if (typeof(selector) !== 'object') {\r\n            selector = {};\r\n        }\r\n\r\n        object_out = selector;\r\n    }\r\n    else {\r\n\r\n\r\n        if (selector && selector !== '*') {\r\n\r\n            var s = selector || '';\r\n\r\n            console.info('selector:' + s);\r\n\r\n\r\n            var mainSelector = $Q.before('[', s).trim(), msfChar = mainSelector.substring(0, 1);\r\n\r\n            var __targetClassName = \"*\";\r\n\r\n            var output = [];\r\n\r\n            var cleanSelectorString = function (str) {\r\n                return str.replace(\",\", \"\");\r\n            };\r\n\r\n            switch (msfChar.toLowerCase()) {\r\n                case \".\":\r\n\r\n                    console.info('Selecting by \".\" or class');\r\n\r\n                    __targetClassName = cleanSelectorString($Q.after('.', mainSelector));\r\n\r\n                    console.info('Target class is:' + __targetClassName);\r\n\r\n                    break;\r\n\r\n                case \"*\":\r\n\r\n                    console.info('Selecting by \"*\" or ANY object in the library instance');\r\n\r\n                    __targetClassName = \"*\";\r\n\r\n                    break;\r\n\r\n            }\r\n\r\n            var criterion = $Q.between('[', ']', s), cparts = criterion.split('=');\r\n\r\n            var __targetGroup = \"*\", __targetName = \"*\";\r\n\r\n            var getParts = function () {\r\n\r\n                if (cparts.length >= 2) {\r\n\r\n                    switch (cparts[0].toLowerCase()) {\r\n\r\n                        case \"name\":\r\n\r\n                            //get all objects according to name=name\r\n\r\n                            console.log('Q():Detected parts in selector:' + jstr(cparts));\r\n\r\n                            __targetName = cleanSelectorString(cparts[1]);\r\n\r\n                            break;\r\n\r\n                        case  \"group\":\r\n\r\n                            console.log('Q():Detected parts in selector:' + jstr(cparts));\r\n\r\n                            __targetGroup = cleanSelectorString(cparts[1]);\r\n\r\n                            break;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if (cparts.length >= 4) {\r\n\r\n                    cparts[2] = cparts[2].replace(\",\", \"\");\r\n\r\n                    switch (cparts[2].toLowerCase()) {\r\n\r\n                        case \"name\":\r\n\r\n                            //get all objects according to name=name\r\n\r\n                            console.log('Q():Detected parts in selector:' + jstr(cparts));\r\n\r\n                            __targetName = cleanSelectorString(cparts[3]);\r\n\r\n                            break;\r\n\r\n                        case  \"group\":\r\n\r\n                            console.log('Q():Detected parts in selector:' + jstr(cparts));\r\n\r\n                            __targetGroup = cleanSelectorString(cparts[3]);\r\n\r\n                            break;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            };\r\n\r\n            getParts(cparts);\r\n\r\n            object_out = Gamestack.select(__targetClassName, __targetName, __targetGroup);\r\n\r\n        }\r\n        else if (selector == '*') {\r\n            object_out = Gamestack.all_objects;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    for (var x in $GFunx) {\r\n\r\n        object_out[x] = $GFunx[x];\r\n\r\n    }\r\n    ;\r\n\r\n    return object_out;\r\n\r\n}\r\n\r\n\r\n$Q.each = function (obj, callback, complete) {\r\n\r\n    for (var x in obj) {\r\n        callback(obj);\r\n\r\n    }\r\n\r\n    if (typeof(complete) == 'function') {\r\n        complete(obj);\r\n\r\n    }\r\n\r\n};\r\n\r\n\r\n$Q.before = function (c1, test_str) {\r\n    var start_pos = 0;\r\n    var end_pos = test_str.indexOf(c1, start_pos);\r\n    return test_str.substring(start_pos, end_pos);\r\n};\r\n\r\n\r\n$Q.contains = function (c1, test_str) {\r\n    return test_str.indexOf(c1) >= 0;\r\n};\r\n\r\n$Q.contains_all = function (cList, test_str) {\r\n    for (var x = 0; x < cList.length; x++) {\r\n        if (test_str.indexOf(cList[x]) < 0) {\r\n            return false;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    return true;\r\n\r\n};\r\n\r\n$Q.contains_any = function (cList, test_str) {\r\n\r\n    for (var x = 0; x < cList.length; x++) {\r\n        if (test_str.indexOf(cList[x]) >= 0) {\r\n            return true;\r\n\r\n        }\r\n    }\r\n\r\n    return false;\r\n\r\n};\r\n\r\n$Q.after = function (c1, test_str) {\r\n    var start_pos = test_str.indexOf(c1) + 1;\r\n    var end_pos = test_str.length;\r\n    return test_str.substring(start_pos, end_pos);\r\n};\r\n\r\n$Q.between = function (c1, c2, test_str) {\r\n    var start_pos = test_str.indexOf(c1) + 1;\r\n    var end_pos = test_str.indexOf(c2, start_pos);\r\n    return test_str.substring(start_pos, end_pos)\r\n};\r\n\r\n\r\n/****************************************\r\n *\r\n *  Developer's own test-function:\r\n *      -Q.test_selector_method():\r\n *\r\n * ***************************************/\r\n\r\n$Q.test_selector_method = function () { //leftover method of hand-testing\r\n    var Q_TestStrings = ['*', '.Sprite', '*[group=\"enemy_type_0\"]', '.Sprite[group=\"enemy_type_0\"]'];\r\n\r\n    for (var x = 0; x < Q_TestStrings.length; x++) {\r\n        var test = Q_TestStrings[x];\r\n\r\n        console.info('testing:' + test);\r\n\r\n        $Q(test);\r\n    }\r\n\r\n    console.log('Testing stick left');\r\n\r\n    this.on('stick_left_0');\r\n\r\n    console.log('Testing button');\r\n\r\n    this.on('button_0');\r\n\r\n\r\n    console.log('Testing collide');\r\n\r\n    this.on('collide');\r\n\r\n\r\n    console.log('Testing button');\r\n\r\n    this.on('collide');\r\n\r\n    console.log('Testing prop');\r\n\r\n    this.on('health>=0');\r\n\r\n\r\n};\r\n\r\n\r\nGamestack.$Q = $Q;\r\n\r\nGamestack.query = $Q;\r\n\r\n/********************\r\n * Gamestack.InputSystem\r\n * Various Keyboard + mouse Input Events\r\n ********************/\r\n\r\nGamestack.InputSystem = {\r\n\r\n    //PC input events\r\n\r\n    events: {\r\n\r\n        mousemove: [],\r\n        leftclick: {},\r\n        rightclick: {},\r\n        middleclick: [],\r\n        wheelup: [],\r\n        wheelDown: []\r\n    },\r\n\r\n    keymap: {},\r\n\r\n    keyReplace: function (str) {\r\n        return str.toLowerCase().replace('space', ' ').replace('left', String.fromCharCode(37)).replace('left', String.fromCharCode(37)).replace('up', String.fromCharCode(38)).replace('right', String.fromCharCode(39)).replace('down', String.fromCharCode(40));\r\n    },\r\n\r\n    extendKey: function (evt_key, callback, onFinish) {\r\n\r\n        evt_key = this.keyReplace(evt_key);\r\n\r\n        Gamestack.InputSystem.keymap[evt_key] = {\r\n\r\n            down: false,\r\n\r\n            callback: function () {\r\n                callback(evt_key);\r\n\r\n            }\r\n\r\n        };\r\n\r\n        return Gamestack.InputSystem.keymap[evt_key];\r\n\r\n    },\r\n\r\n    extend: function (evt_key, downCall, upCall, onFinish) {\r\n\r\n        evt_key = evt_key.toLowerCase();\r\n\r\n        Gamestack.InputSystem[evt_key] = {\r\n\r\n            down: downCall,\r\n\r\n            up: upCall\r\n\r\n        };\r\n\r\n        return Gamestack.InputSystem[evt_key];\r\n\r\n    },\r\n\r\n\r\n    init: function () {\r\n\r\n\r\n        window.setInterval(function () {\r\n\r\n            Gamestack.each(Gamestack.InputSystem.keymap, function (im, kmapItem) {\r\n\r\n                if (kmapItem.down == true) {\r\n\r\n                    kmapItem.callback();\r\n\r\n                }\r\n\r\n            });\r\n\r\n        }, 10);\r\n\r\n        document.onkeydown = document.onkeyup = function (e) {\r\n\r\n            e = e || event; // to deal with IE\r\n\r\n            var gs_key_string = 'key_' + String.fromCharCode(e.keyCode),\r\n\r\n                evt_object = Gamestack.InputSystem['keymap'][gs_key_string] || Gamestack.InputSystem['keymap'][gs_key_string.toLowerCase()];\r\n\r\n            if (evt_object) {\r\n                evt_object.down = e.type == 'keydown';\r\n\r\n            }\r\n\r\n        }\r\n\r\n        var canvases = document.getElementsByTagName('CANVAS');\r\n\r\n\r\n        function getMousePos(e, c) {\r\n\r\n            var x;\r\n            var y;\r\n            if (e.pageX || e.pageY) {\r\n                x = e.pageX;\r\n                y = e.pageY;\r\n            } else {\r\n                x = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\r\n                y = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\r\n            }\r\n            x -= c.offsetLeft;\r\n            y -= c.style.top;\r\n            return {x: x, y: y};\r\n        }\r\n\r\n\r\n        function fullMoveInputSystem(event, c) {\r\n\r\n            var pos = getMousePos(event, c);\r\n            var InputSystem = Gamestack.InputSystem;\r\n            for (var x in InputSystem.events) {\r\n\r\n                if (InputSystem.events[x] instanceof Array && x == 'mousemove') {\r\n\r\n                    Gamestack.each(InputSystem.events[x], function (ix, el) {\r\n\r\n                        el.down(pos.x, pos.y);\r\n                    });\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n        ;\r\n\r\n\r\n        for (var x = 0; x < canvases.length; x++) {\r\n            var c = canvases[x];\r\n\r\n            function applyMouseMove(e) {\r\n                fullMoveInputSystem(e, c);\r\n\r\n            }\r\n\r\n            document.addEventListener(\"mousemove\", applyMouseMove);\r\n\r\n            c.onmousedown = function (e) {\r\n\r\n                //    alert(JSON.stringify(Gamestack.InputSystem, true, 2));\r\n\r\n                var value = e.which;\r\n                var pos = getMousePos(e, c);\r\n                var InputSystem = Gamestack.InputSystem;\r\n\r\n\r\n                e.preventDefault();\r\n\r\n                switch (e.which) {\r\n                    case 1:\r\n\r\n                        for (var x in InputSystem.events) {\r\n\r\n\r\n                            if (InputSystem.events[x] instanceof Array && x == 'leftclick') {\r\n\r\n\r\n                                Gamestack.each(InputSystem.events[x], function (ix, el) {\r\n\r\n\r\n                                    el.down(pos.x, pos.y);\r\n                                });\r\n                            }\r\n\r\n\r\n                        }\r\n\r\n                        break;\r\n                    case 2:\r\n                        // alert('Middle Mouse button pressed.');\r\n\r\n\r\n                        for (var x in Gamestack.InputSystem.events) {\r\n\r\n\r\n                            if (InputSystem.events[x] instanceof Array && x == 'middleclick') {\r\n\r\n\r\n                                Gamestack.each(InputSystem.events[x], function (ix, el) {\r\n\r\n                                    el.down(pos.x, pos.y);\r\n                                });\r\n                            }\r\n\r\n\r\n                        }\r\n                        break;\r\n                    case 3:\r\n                        //  alert('Right Mouse button pressed.');\r\n\r\n\r\n                        for (var x in Gamestack.InputSystem.events) {\r\n\r\n\r\n                            if (InputSystem.events[x] instanceof Array && x == 'rightclick') {\r\n\r\n\r\n                                Gamestack.each(InputSystem.events[x], function (ix, el) {\r\n\r\n                                    el.down(pos.x, pos.y);\r\n                                });\r\n\r\n                                return false;\r\n                            }\r\n\r\n\r\n                        }\r\n\r\n                        break;\r\n                    default:\r\n\r\n                        return 0;\r\n                    //alert('You have a strange Mouse!');\r\n\r\n                }\r\n\r\n\r\n                e.preventDefault();\r\n                return 0;\r\n            };\r\n\r\n            c.onmouseup = function (e) {\r\n\r\n                //    alert(JSON.stringify(Gamestack.InputSystem, true, 2));\r\n\r\n                var value = e.which;\r\n                var pos = getMousePos(e, c);\r\n                var InputSystem = Gamestack.InputSystem;\r\n\r\n\r\n                e.preventDefault();\r\n\r\n                switch (e.which) {\r\n                    case 1:\r\n\r\n                        for (var x in InputSystem.events) {\r\n\r\n\r\n                            if (InputSystem.events[x] instanceof Array && x == 'leftclick') {\r\n\r\n\r\n                                Gamestack.each(InputSystem.events[x], function (ix, el) {\r\n\r\n                                    el.up(pos.x, pos.y);\r\n                                });\r\n                            }\r\n\r\n\r\n                        }\r\n\r\n                        break;\r\n                    case 2:\r\n                        // alert('Middle Mouse button pressed.');\r\n\r\n\r\n                        for (var x in Gamestack.InputSystem.events) {\r\n\r\n\r\n                            if (InputSystem.events[x] instanceof Array && x == 'middleclick') {\r\n\r\n\r\n                                Gamestack.each(InputSystem.events[x], function (ix, el) {\r\n\r\n                                    el.up(pos.x, pos.y);\r\n                                });\r\n                            }\r\n\r\n\r\n                        }\r\n                        break;\r\n                    case 3:\r\n                        //  alert('Right Mouse button pressed.');\r\n\r\n\r\n                        for (var x in Gamestack.InputSystem.events) {\r\n\r\n\r\n                            if (InputSystem.events[x] instanceof Array && x == 'rightclick') {\r\n\r\n\r\n                                Gamestack.each(InputSystem.events[x], function (ix, el) {\r\n\r\n                                    el.up(pos.x, pos.y);\r\n                                });\r\n\r\n\r\n                                return false;\r\n\r\n                            }\r\n\r\n\r\n                        }\r\n\r\n                        break;\r\n                    default:\r\n\r\n                        return 0;\r\n                    //alert('You have a strange Mouse!');\r\n\r\n                }\r\n\r\n\r\n            };\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n};\r\n\r\n//Override the existing window.onload function\r\nwindow.onload = function () {\r\n    Gamestack.callReady();\r\n}\r\n\r\nGamestack.file_system = {\r\n\r\n    localizedSource: function (src, hostUrl) {\r\n\r\n        hostUrl = hostUrl || \"../\";\r\n\r\n        var gs_folder_ix = src.indexOf('assets/game');\r\n\r\n        return hostUrl + src.substring(gs_folder_ix, src.length);\r\n\r\n    },\r\n\r\n    loadJSON: function (filepath, callback) {\r\n\r\n        $.getJSON(filepath, function (data) {\r\n\r\n            callback(false, data);\r\n\r\n        });\r\n    },\r\n\r\n    loadJSONLevel: function (filepath, gw, callback) {\r\n\r\n        if (typeof(gw) == 'function' || !gw) {\r\n            callback = gw || callback || function () {\r\n            };\r\n\r\n            gw = Gamestack.game_windows[0];\r\n        }\r\n\r\n\r\n        $.getJSON(filepath, function (data) {\r\n\r\n            //localize .src up to three levels of recursion (.src must be altered to refer locally)\r\n\r\n            $.each(data.sprites, function (ix, xitem) {\r\n\r\n                if (typeof(xitem.src) == 'string') {\r\n\r\n                    xitem.src = Gamestack.file_system.localizedSource(xitem.src);\r\n                }\r\n\r\n                __gamestackInstance.each(xitem, function (iy, yitem) {\r\n\r\n                    if (yitem.src) {\r\n\r\n                        yitem.src = Gamestack.file_system.localizedSource(yitem.src);\r\n\r\n                    }\r\n\r\n                    __gamestackInstance.each(yitem, function (iz, zitem) {\r\n\r\n                        if (zitem.src) {\r\n                            zitem.src = Gamestack.file_system.localizedSource(zitem.src);\r\n\r\n                        }\r\n\r\n\r\n                    });\r\n\r\n\r\n                });\r\n\r\n                xitem = new Gamestack.Sprite(xitem);\r\n\r\n                gw.add(xitem);\r\n                //sprite.image = sprite.selected_animation.image;\r\n\r\n\r\n                if (ix >= data.sprites.length - 1) {\r\n\r\n                    //last sprite is loaded //WHY DOESN't this work?\r\n\r\n                    callback(false, data);\r\n                }\r\n\r\n\r\n            });\r\n\r\n\r\n        });\r\n    }\r\n\r\n\r\n};\r\n\r\n\r\nGamestack.ready(function (lib) {\r\n\r\n    Gamestack.log('Gamestack: library is ready');\r\n\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n;\r\n\r\n\r\nlet Typo = {\r\n\r\n    MakeArray(obj) //obj is type or is encapsulated into type\r\n    {\r\n        if (obj instanceof Array) {\r\n            return obj;\r\n        }\r\n        else {\r\n            obj = [obj];\r\n        }\r\n        return obj;\r\n    },\r\n\r\n    Convert(obj, type) //obj is type or is each-converted into type\r\n    {\r\n        if (obj instanceof type) {\r\n            return obj;\r\n        }\r\n        else {\r\n            obj = [obj];\r\n        }\r\n        return obj;\r\n    },\r\n\r\n    TypeHalt(obj, type) //obj is type or error is thrown\r\n    {\r\n        if (obj instanceof type) {\r\n            return obj;\r\n        }\r\n        else {\r\n            throw new Error('object not of required type');\r\n            console.info(obj);\r\n            console.info(type + \"?\");\r\n        }\r\n        return obj;\r\n    },\r\n\r\n    TypeError(obj, type) //obj is type or error is logged, execution continues\r\n    {\r\n        if (obj instanceof type) {\r\n            return obj;\r\n        }\r\n        else {\r\n            console.log(new Error('object not of required type'));\r\n            console.info(obj);\r\n            console.info(type + \"?\");\r\n        }\r\n        return obj;\r\n    },\r\n\r\n    Restore()\r\n    {\r\n\r\n\r\n    }\r\n    ,\r\n\r\n    Datify()\r\n    {\r\n\r\n\r\n    },\r\n\r\n    Decycle()\r\n    {\r\n\r\n\r\n    },\r\n\r\n    Clone()\r\n    {\r\n\r\n\r\n    },\r\n\r\n    TagByType()\r\n    {\r\n\r\n\r\n    },\r\n\r\n    MergeByType()\r\n    {\r\n\r\n\r\n\r\n    },\r\n\r\n    MergeByKeys()\r\n    {\r\n\r\n\r\n\r\n    }\r\n};\r\n\r\n;(function () {\r\n    console.log('Animation class... creating');\r\n\r\n    /**\r\n     *\r\n     * Creates an instance of Animation with one or more Frames.\r\n     *\r\n     * <iframe style='width:400px; height:450px; overflow:hidden;' src='../client/examples/js-class/Animation.html'> </iframe>\r\n     *\r\n     * @param   {string=} [src] the src/file-path for this Animation\r\n     * @param   {GameImage= | HTMLImageElement=} [gameImage] the existing GameImage to be applied\r\n     * @param   {Object= | Animation=} [anime] the existing Animation-data to be returned as fully unique instance\r\n     * @returns {Animation} an Animation object\r\n     *\r\n     * @example\r\n     *\r\n     * //constructor call: Creates a single-frame Animation from src\r\n     * var singleFrameAnime = new Animation('directory/myFile.png');\r\n     *\r\n     * @example\r\n     * //constructor call with chainable function-calls: Creates multi-frame Animation from src, then sets properties with chainable-function-calls.\r\n     * var multiFrameAnime = new Gamestack.Animation('../images/characters/full/spaceman1.png') //constructor is called\r\n     * .FrameSize(130, 130)\r\n     * .FrameBounds(new Gamestack.Vector(9, 0), new Gamestack.Vector(23, 0), new Gamestack.Vector(23, 0))\r\n     * .Seesaw() //The Animation will play back-and-forth repeatedly (cycle through frames forwards, then backwards and so on.\r\n     * .Duration(900); //Animation lasts 900 millis OR just under 1 second\r\n     *\r\n     */\r\n\r\n\r\n    class Animation {\r\n\r\n        constructor(src={}) {\r\n\r\n            var args = typeof(src) == 'object' ? src : {};\r\n\r\n            Gamestack.Modifiers.informable(this, args);\r\n\r\n            if (typeof(src) == 'string') {\r\n\r\n                console.log('setting GameImage with string:' + src);\r\n                this.src = src;\r\n                this.image = new Gamestack.GameImage(src);\r\n              if(!args.frameBounds)\r\n                  this.setToSingleFrame();\r\n\r\n            }\r\n            else if(args instanceof GameImage)\r\n            {\r\n                console.log('Animation(): args are an instance of GameImage');\r\n\r\n                this.image = args;\r\n            }\r\n            else if(args instanceof HTMLImageElement)\r\n            {\r\n                console.log('Animation(): args was an instance of HTMLImageElement');\r\n\r\n                this.image = new Gamestack.GameImage(args);\r\n            }\r\n\r\n            else if(args instanceof Gamestack.Animation)\r\n            {\r\n\r\n                this.image = args.image;\r\n\r\n            }\r\n            else if(typeof(args)=='object' && args.src)\r\n            {\r\n                this.src = args.src;\r\n                this.image = new Gamestack.GameImage(args.src);\r\n            }\r\n\r\n            this.frameSize = this.frameSize || new Gamestack.Vector(args.frameSize || new Gamestack.Vector(0, 0));\r\n\r\n            if (args.frameBounds && args.frameBounds.min && args.frameBounds.max) {\r\n\r\n                this.frameBounds = new Gamestack.VectorFrameBounds(args.frameBounds.min, args.frameBounds.max, args.frameBounds.termPoint);\r\n\r\n            }\r\n            else {\r\n\r\n                this.frameBounds = new Gamestack.VectorFrameBounds(new Gamestack.Vector(0, 0, 0), new Gamestack.Vector(0, 0, 0), new Gamestack.Vector(0, 0, 0));\r\n\r\n            }\r\n\r\n            this.frameOffset = this.getArg(args, 'frameOffset', new Gamestack.Vector(0, 0, 0));\r\n\r\n            this.apply2DFrames();\r\n\r\n            this.flipX = this.getArg(args, 'flipX', false);\r\n\r\n            this.cix = 0;\r\n\r\n            this.selected_frame = this.frames[0] || false;\r\n\r\n            this.timer = 0;\r\n\r\n            this.duration = args.duration || 2000;\r\n\r\n            this.seesaw_mode = args.seesaw_mode || false;\r\n\r\n            this.reverse_frames = args.reverse_frames || false;\r\n\r\n            this.run_ext = args.run_ext || [];\r\n\r\n            this.complete_ext = args.complete_ext || [];\r\n\r\n\r\n           // this.colorMap = this.createColorMap(5);\r\n\r\n        }\r\n\r\n        /**\r\n         * sets this Animation to a single-frame-animation, from existing image\r\n         * @function\r\n         * @memberof Animation\r\n         **********/\r\n\r\n        setToSingleFrame() {\r\n\r\n            var __inst = this;\r\n\r\n\r\n            this.image.domElement.onload = function () {\r\n                if(!__inst.__isInit)\r\n                __inst.FrameSize(__inst.image.domElement.width, __inst.image.domElement.height)\r\n                    .FrameBounds(new Gamestack.Vector(0, 0), new Gamestack.Vector(0, 0));\r\n\r\n                __inst.run();\r\n\r\n            };\r\n\r\n            Gamestack.log('Animation():set single-frame animation');\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        /*****\r\n         * Overridable / Extendable functions\r\n         * -allows stacking of external object-function calls\r\n         ******/\r\n\r\n\r\n        /**\r\n         * Provides a function to be called whenever this Animation starts. Function should run every time the Animation reaches frame-index 0\r\n         *\r\n         * @function\r\n         * @params {Function} call the function to be called on start\r\n         * @memberof Animation\r\n         **********/\r\n\r\n        onRun(call) {\r\n\r\n            if (this.run_ext.indexOf(call) == -1) {\r\n                this.run_ext.push(call);\r\n            }\r\n        }\r\n\r\n\r\n        /**\r\n         * Provides a function to be called whenever this Animation completes. Function should run every time the Animation reaches it's last frame-index.\r\n         *\r\n         * @function\r\n         * @params {Function} call the function to be called on complete\r\n         * @memberof Animation\r\n         **********/\r\n\r\n        onComplete(call) {\r\n\r\n            if (this.complete_ext.indexOf(call) == -1) {\r\n                this.complete_ext.push(call);\r\n            }\r\n        }\r\n\r\n        call_on_run() {\r\n            //call any function extension that is present\r\n            for (var x = 0; x < this.run_ext.length; x++) {\r\n                this.run_ext[x](this);\r\n            }\r\n        }\r\n\r\n        call_on_complete() {\r\n            //call any function extension that is present\r\n            for (var x = 0; x < this.complete_ext.length; x++) {\r\n                this.complete_ext[x](this);\r\n            }\r\n        }\r\n\r\n\r\n        FrameSize(w, h)\r\n        {\r\n            this.frameSize = new Gamestack.Vector(w, h);\r\n\r\n            this.__isInit = true;\r\n\r\n            this.run();\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        FrameBounds(minVector, maxVector, termVector)\r\n        {\r\n            this.frameBounds = new Gamestack.VectorFrameBounds(minVector, maxVector, termVector);\r\n\r\n            this.__isInit = true;\r\n\r\n            this.run();\r\n\r\n            return this;\r\n        }\r\n\r\n        Seesaw()\r\n        {\r\n            if(!this.seesaw_mode)\r\n            {\r\n\r\n                this.seesaw_mode = true;\r\n\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n        Duration(millis)\r\n        {\r\n            this.duration = millis;\r\n\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * Reverses all frames of the animation. Frames are then expected to run backwards.\r\n         *\r\n         * @function\r\n         * @memberof Animation\r\n         **********/\r\n\r\n        reverseFrames() {\r\n\r\n            this.frames.reverse();\r\n\r\n        }\r\n\r\n        /**\r\n         * Declares the animation a a single frame / full-image.\r\n         *\r\n         * @function\r\n         * @param {Vector} frameSize optional size param\r\n         * @memberof Animation\r\n         **********/\r\n\r\n        SingleFrame() {\r\n\r\n            this.__frametype = 'single';\r\n\r\n            this.frameSize = new Gamestack.Vector(this.image.domElement.width, this.image.domElement.height);\r\n\r\n            this.frameBounds = false;\r\n\r\n            this.selected_frame = new Gamestack.Frame().Image(this.image).Size(this.frameSize);\r\n\r\n            this.frames = [];\r\n\r\n            this.frames[0] = this.selected_frame;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        getArg(args, key, fallback) {\r\n\r\n            if (args.hasOwnProperty(key)) {\r\n\r\n                return args[key];\r\n\r\n            }\r\n            else {\r\n                return fallback;\r\n\r\n            }\r\n        }\r\n        \r\n        apply2DFrames() {\r\n\r\n            this.frames = [];\r\n\r\n            var fcount = 0;\r\n\r\n            var quitLoop = false;\r\n\r\n            for (let y = this.frameBounds.min.y; y <= this.frameBounds.max.y; y++) {\r\n\r\n                for (let x = this.frameBounds.min.x; x <= this.frameBounds.max.x; x++) {\r\n\r\n                    let framePos = {\r\n                        x: x * this.frameSize.x + this.frameOffset.x,\r\n                        y: y * this.frameSize.y + this.frameOffset.y\r\n                    };\r\n\r\n                    var f = new Gamestack.Frame().Image(this.image).Size(this.frameSize).Position(framePos);\r\n\r\n\r\n                    this.frames.push(f);\r\n\r\n                    if (x >= this.frameBounds.termPoint.x && y >= this.frameBounds.termPoint.y) {\r\n\r\n                        quitLoop = true;\r\n\r\n                        break;\r\n                    }\r\n\r\n                    fcount += 1;\r\n\r\n                    if (quitLoop)\r\n                        break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this.frames[0] = this.selected_frame = this.frames[0] || new Gamestack.Frame().Image(this.image).Size(this.frameSize);\r\n\r\n            if (this.seesaw_mode) {\r\n\r\n               // console.log('Animation: applying seesaw');\r\n\r\n                var frames_reversed = this.frames.slice().reverse();\r\n\r\n                this.frames.pop();\r\n\r\n                this.frames = this.frames.concat(frames_reversed);\r\n\r\n            }\r\n            if (this.reverse_frames) {\r\n                this.reverseFrames();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Draws the image of this animation to an offscreen canvas.\r\n         *\r\n         * @function\r\n         * @memberof Animation\r\n         **********/\r\n        \r\n        StashToCanvas()\r\n        {\r\n\r\n            this.testCanvas=document.createElement(\"CANVAS\");\r\n\r\n            this.testCtx=this.testCanvas.getContext(\"2d\");\r\n\r\n            this.testCanvas.width = this.image.domElement.width;\r\n\r\n            this.testCanvas.height = this.image.domElement.height;\r\n\r\n            this.testCanvas.style.zIndex = '9999';\r\n\r\n            this.testCtx.drawImage(this.image.domElement,0,0);\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * Creates and returns a ColorMap for this animation, allowing opacity-based pixel-collision.\r\n         *\r\n         * @function\r\n         * @param {number} unitDimen a Colormap grid-unit-size --A larger unitDimen decreases accuracy, and results in faster-processing.\r\n         * @memberof Animation\r\n         **********/\r\n\r\n        createColorMap(unitDimen)\r\n        {\r\n\r\n            if(!(this.image && this.image.domElement))\r\n                return this;\r\n\r\n            this.StashToCanvas();\r\n\r\n            function ColoredPixelGrid(image, unitSize, ctx) {\r\n\r\n                if(isNaN(unitSize))\r\n                {\r\n                    unitSize = 5;\r\n                }\r\n\r\n                var grid = [];\r\n\r\n                for (var x = 0; x < image.width; x+= unitSize) {\r\n                    for (var y = 0; y < image.height; y+= unitSize) {\r\n                        // Fetch pixel at current position\r\n                        var pixel = ctx.getImageData(x, y, 1, 1);\r\n                        // Check that opacity is above zero\r\n                        if (pixel.data[3] != 0) {\r\n\r\n                            var vector = new Gamestack.Vector(x - unitSize / 2, y - unitSize / 2),\r\n\r\n                                gridObject = {\r\n\r\n                                position:vector,\r\n\r\n                                size:new Gamestack.Vector(unitSize, unitSize)\r\n                            }\r\n\r\n                            grid.push(gridObject);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return grid;\r\n            }\r\n\r\n            this.colorMap = ColoredPixelGrid(this.image.domElement, unitDimen, this.testCtx);\r\n\r\n            return this.colorMap;\r\n        }\r\n\r\n        /**\r\n         * Returns the existing ColorMap for this animation.\r\n         *\r\n         * @function\r\n         * @memberof Animation\r\n         **********/\r\n        \r\n        getCurrentColorMap()\r\n        {\r\n            var map = [];\r\n\r\n            var frame = this.selected_frame;\r\n\r\n            for(var x in this.colorMap)\r\n            {\r\n\r\n                var c = this.colorMap[x];\r\n\r\n                if(Gamestack.Collision.basicBoxCollide(frame.framePos, frame.frameSize, c.position, c.size))\r\n                {\r\n\r\n                    map.push(c);\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return map;\r\n\r\n        }\r\n\r\n        /**\r\n         * Sets the frame to a specific array-index.\r\n         *\r\n         * @function\r\n         * @param {number} ix the frame-index to apply.\r\n         * @memberof Animation\r\n         **********/\r\n\r\n        setFrame(ix)\r\n        {\r\n                this.selected_frame = this.frames[ix];\r\n        }\r\n\r\n        update() {\r\n\r\n            this.selected_frame = this.frames[Math.round(this.cix) % this.frames.length];\r\n        }\r\n\r\n        reset() {\r\n\r\n            this.apply2DFrames();\r\n\r\n            this.cix = 0;\r\n        }\r\n\r\n        /**\r\n         * Applies a continuous animation. Use this in parent-sprite's update if continuous animation is required.\r\n         * Also works as a single call at any time during game-update.\r\n         *\r\n         * @function\r\n         * @memberof Animation\r\n         **********/\r\n        \r\n        run() {\r\n\r\n            if (this.__frametype == 'single') {\r\n                return 0;\r\n\r\n            }\r\n\r\n            this.apply2DFrames();\r\n\r\n            //update once:\r\n            this.update();\r\n\r\n            if (this.cix == 0) {\r\n\r\n                this.engage();\r\n\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Engages, or updates the animation for a one full frame-cycle.\r\n         *\r\n         * @function\r\n         * @param {number} duration the number of milliseconds the animation should take.\r\n         * @memberof Animation\r\n         **********/\r\n\r\n        engage(duration) {\r\n\r\n            this.call_on_run();\r\n\r\n            duration = duration || this.duration || this.frames.length * 20;\r\n\r\n            if (this.__frametype == 'single') {\r\n                return 0;\r\n            }\r\n\r\n            let __inst = this;\r\n\r\n            //we have a target\r\n            this.tween = new TWEEN.Tween(this)\r\n                .easing(__inst.curve || TWEEN.Easing.Linear.None)\r\n\r\n                .to({cix: __inst.frames.length - 1}, duration)\r\n                .onUpdate(function () {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n                    //   __inst.cix = Math.ceil(__inst.cix);\r\n\r\n                    __inst.update();\r\n\r\n                })\r\n                .onComplete(function () {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n\r\n                    __inst.cix = 0;\r\n\r\n                    __inst.call_on_complete();\r\n\r\n                    __inst.isComplete = true;\r\n\r\n                });\r\n\r\n            this.tween.start();\r\n\r\n        }\r\n    }\r\n    ;\r\n\r\n    /** @memberof Gamestack */\r\n\r\n    Gamestack.Animation = Animation;\r\n\r\n    Gamestack.Animation.continuous = Gamestack.Animation.run; //'continuous is an alternate reference to 'run'.'\r\n\r\n    Gamestack.Animation.continue = Gamestack.Animation.run; //'continue is an alternate reference to 'run'.'\r\n\r\n})();\r\n;\r\n\r\n(function(){\r\n    console.log('Camera class... creating');\r\n\r\n    /**\r\n     * Creates an instance of 2d-camera to be applied as the viewing-point for a GameWindow.\r\n     *\r\n     * <info>the sprites and game-objects attached to a GameWindow will have their positions offset\r\n     * automatically with respect to the Camera.position Vector</info>\r\n     *\r\n     * @param {number} x an optional position-x\r\n     * @param {number} y an optional position-y\r\n     * @param {number} z an optional position-z\r\n     * @returns {Camera}\r\n     *\r\n     */\r\n\r\n\r\n    class Camera\r\n{\r\n    constructor(x, y, z)\r\n    {\r\n        if(isNaN(x))\r\n        {\r\n          x = 0;\r\n        }\r\n\r\n        if(isNaN(y))\r\n        {\r\n            y = 0;\r\n        }\r\n\r\n        if(isNaN(z))\r\n        {\r\n            z = 0;\r\n        }\r\n\r\n      this.position = new Gamestack.Vector(x, y, z);\r\n    }\r\n\r\n}\r\n\r\nGamestack.Camera = Camera;\r\n\r\n})();\r\n;\r\n\r\n/**\r\n * Creates Gamestack.js Canvas: The canvas-renderer for Gamestack games.\r\n\r\n @description\r\n This Canvas library handles the low-level drawing of Gamestack.Animation objects on HTML5Canvas.\r\n -Draws Sprites according to their rotation, size, and properties.\r\n * @returns {CanvasLib} a CanvasLib object.\r\n */\r\n\r\n(function(){\r\n\r\n    console.log('CanvasStack class... creating');\r\n\r\nclass CanvasStack {\r\n\r\n    constructor() {\r\n\r\n        return {\r\n\r\n            __levelMaker: false,\r\n\r\n            draw: function (sprite, ctx, camera) {\r\n\r\n                camera = camera || Gamestack.game_windows[0].camera || {position:new Gamestack.Vector(0, 0, 0)};\r\n\r\n                if (sprite.active && (this.__levelMaker || sprite.onScreen(Gamestack.WIDTH, Gamestack.HEIGHT))) {\r\n\r\n                    this.drawPortion(sprite, ctx, camera);\r\n                }\r\n            },\r\n            drawFrameWithRotation: function (img, fx, fy, fw, fh, x, y, width, height, deg, canvasContextObj, flipX, flipY) {\r\n\r\n                canvasContextObj.save();\r\n                deg = Math.round(deg);\r\n                deg = deg % 360;\r\n                var rad = deg * Math.PI / 180;\r\n                //Set the origin to the center of the image\r\n                canvasContextObj.translate(x, y);\r\n                canvasContextObj.rotate(rad);\r\n                //Rotate the canvas around the origin\r\n\r\n                canvasContextObj.translate(0, canvasContextObj.width);\r\n\r\n                if (flipX) {\r\n\r\n                    canvasContextObj.scale(-1, 1);\r\n                } else {\r\n\r\n                }\r\n\r\n                if (flipY) {\r\n\r\n                    canvasContextObj.scale(1, -1);\r\n                } else {\r\n\r\n                }\r\n\r\n                //draw the image\r\n                canvasContextObj.drawImage(img, fx, fy, fw, fh, width / 2 * (-1), height / 2 * (-1), width, height);\r\n                //reset the canvas\r\n\r\n                canvasContextObj.restore();\r\n            },\r\n\r\n\r\n\r\n            drawData:function(x, y, w, h, data, ctx){\r\n\r\n                ctx.putImageData(data, x, y, 0, 0, w, h);\r\n\r\n            },\r\n\r\n            drawPortion: function (sprite, ctx, camera) {\r\n\r\n                var frame;\r\n\r\n                if (sprite.active) {\r\n\r\n                    if (sprite.selected_animation instanceof Object && sprite.selected_animation.hasOwnProperty('selected_frame')) {\r\n\r\n                        frame = sprite.selected_animation.selected_frame;\r\n\r\n                    }\r\n                    else {\r\n\r\n                       // console.error('Sprite is missing arguments');\r\n                        //delay the draw\r\n\r\n                        return;\r\n\r\n                    }\r\n\r\n                    var p = sprite.position;\r\n\r\n                    var camera_pos = camera.position || {x: 0, y: 0, z: 0};\r\n\r\n                    if(!sprite.hasOwnProperty('scrollFactor'))\r\n                    {\r\n                        sprite.scrollFactor = 1.0;\r\n                    }\r\n\r\n                    var x = p.x, y = p.y, scrollFactor = sprite.scrollFactor >= 0 && sprite.scrollFactor <= 1.0 ? sprite.scrollFactor : 1.0;\r\n\r\n                    if(sprite.noScroll)\r\n                    {\r\n                        scrollFactor = 0;\r\n                    }\r\n\r\n\r\n                    x -= camera_pos.x * scrollFactor || 0;\r\n                    y -= camera_pos.y * scrollFactor || 0;\r\n                    //optional animation : gameSize\r\n\r\n                    var targetSize = sprite.size || sprite.selected_animation.size;\r\n\r\n                    var realWidth = targetSize.x;\r\n                    var realHeight = targetSize.y;\r\n\r\n                    //optional animation : offset\r\n\r\n                    if (sprite.selected_animation && sprite.selected_animation.hasOwnProperty('offset')) {\r\n                        x += sprite.selected_animation.offset.x;\r\n\r\n                        y += sprite.selected_animation.offset.y;\r\n\r\n                    }\r\n\r\n                    var rotation;\r\n\r\n                    if (typeof(sprite.rotation) == 'object') {\r\n\r\n                        rotation = sprite.rotation.x;\r\n\r\n\r\n                    }\r\n                    else {\r\n                        rotation = sprite.rotation;\r\n\r\n                    }\r\n\r\n                    var frame = sprite.selected_animation.selected_frame;\r\n\r\n                    if (frame && frame.image && frame.image.data) {\r\n\r\n                        ctx.putImageData(frame.image.data, x, y, 0, 0, sprite.size.x, sprite.size.y);\r\n\r\n                    }\r\n                    else {\r\n\r\n                        if(!sprite.selected_animation || !sprite.selected_animation.image || !sprite.selected_animation.image.domElement)\r\n                            return;\r\n\r\n                        if(sprite.selected_animation.image.domElement instanceof HTMLImageElement) {\r\n\r\n                            this.drawFrameWithRotation(sprite.selected_animation.image.domElement, frame.framePos.x, frame.framePos.y, frame.frameSize.x, frame.frameSize.y, Math.round(x + (realWidth / 2)), Math.round(y + (realHeight / 2)), realWidth, realHeight, rotation % 360, ctx, sprite.flipX,  sprite.flipY);\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n    Gamestack.Canvas = new CanvasStack();\r\n\r\n    Gamestack.CanvasStack = CanvasStack;\r\n})();\r\n\r\n\r\n\r\n\r\n;\r\n\r\n(function(){\r\n    console.log('CollisionSettings class... creating');\r\n\r\n    class CollisionSettings\r\n{\r\n    constructor(args={})\r\n    {\r\n        this.fourway = args.fourway || args.four_way || false;\r\n\r\n        this.top = this.four_way || args.top || false;\r\n\r\n        this.bottom = this.four_way || args.bottom || false;\r\n\r\n        this.left = this.four_way || args.left || false;\r\n\r\n        this.right = this.four_way || args.right || false;\r\n\r\n        this.pixel = args.pixel || false;\r\n\r\n        this.stop = args.stop || false;\r\n\r\n        this.padding = args.padding || new Gamestack.Vector(0, 0, 0); // 0-1.0\r\n\r\n    }\r\n\r\n}\r\n\r\nGamestack.CollisionSettings = CollisionSettings;\r\n\r\n})();;/**\r\n * Creates a GravityForce instance.\r\n *\r\n *@param   {Object} args the object of arguments\r\n * @param   {string} args.name optional\r\n * @param   {string} args.description optional\r\n * @param   {Array} args.subjects the subjects to be pulled by the GravityForce\r\n * @param   {Array} args.clasticObjects any clastic object or array-of-objects that should have collision-stop behavior with subjects\r\n * @param   {Vector} args.max the max speed of the gravity-force, similar to concept of 'terminal velocity'\r\n * @param   {number} args.accel the increment of acceleration for each update called, while subjects are falling\r\n *\r\n * @returns {GravityForce} a GravityForce object\r\n */\r\n\r\n(function () {\r\n    console.log('Force class... creating');\r\n\r\n    class GravityForce {\r\n        constructor(args = {}) {\r\n            this.name = args.name || \"\";\r\n\r\n            this.description = args.description || \"\";\r\n\r\n            this.subjects = args.subjects || [];\r\n\r\n            this.clasticObjects = args.clasticObjects || [];\r\n\r\n            this.topClastics = args.topClastics || [];\r\n\r\n            this.max = args.max || new Vector3(3, 3, 3);\r\n            this.accel = args.accel || new Vector3(1.3, 1.3, 1.3);\r\n\r\n\r\n            for (var x in this.clasticObjects) {\r\n                if (!this.clasticObjects[x] instanceof Gamestack.Sprite) {\r\n                    this.clasticObjects[x] = Gamestack.getById(this.clasticObjects[x].id);\r\n                }\r\n\r\n            }\r\n\r\n\r\n            for (var x in this.topClastics) {\r\n                if (!this.topClastics[x] instanceof Gamestack.Sprite) {\r\n                    this.topClastics[x] = Gamestack.getById(this.topClastics[x].id);\r\n                }\r\n\r\n            }\r\n\r\n\r\n            for (var x in this.subjects) {\r\n                if (!this.subjects[x] instanceof Gamestack.Sprite) {\r\n                    this.subjects[x] = Gamestack.getById(this.subjects[x].id);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        getArg(args, key, fallback) {\r\n\r\n            if (args.hasOwnProperty(key)) {\r\n                return args[key];\r\n            }\r\n            else {\r\n                return fallback;\r\n\r\n            }\r\n        }\r\n\r\n\r\n        /**\r\n         * Updates position for all objects effected by this instance.\r\n         * @memberof GravityForce\r\n         */\r\n\r\n        update() {\r\n\r\n            var subjects = this.subjects;\r\n\r\n            var clasticObjects = this.clasticObjects;\r\n\r\n            var topClastics = this.topClastics;\r\n\r\n            var accel = this.accel || {};\r\n\r\n            var max = this.max || {};\r\n\r\n            __gameStack.each(subjects, function (ix, itemx) {\r\n\r\n                itemx.accelY(accel, max);\r\n\r\n                itemx.__inAir = true;\r\n\r\n\r\n                if (itemx.position.y >= itemx.groundMaxY) {\r\n\r\n\r\n                    itemx.position.y = itemx.groundMaxY;\r\n\r\n                }\r\n\r\n                itemx.groundMaxY = 3000000; //some crazy number you'll never reach in-game\r\n\r\n                __gameStack.each(clasticObjects, function (iy, itemy) {\r\n\r\n                    itemx.collide_stop(itemy);\r\n\r\n                });\r\n\r\n                __gameStack.each(topClastics, function (iy, itemy) {\r\n\r\n                    itemx.collide_stop_top(itemy);\r\n\r\n                });\r\n\r\n            });\r\n        }\r\n    };\r\n\r\n    let Force = GravityForce;\r\n\r\n    Gamestack.Force = Force;\r\n\r\n    Gamestack.GForce = Force;\r\n\r\n    Gamestack.GravityForce = GravityForce;\r\n\r\n})();\r\n\r\n\r\n\r\n;\r\n(function(){\r\n    console.log('Frame class... creating');\r\n\r\n    /**\r\n     * Creates an instance of Frame\r\n     *\r\n     * <info-bit>Gamestack.Frame is called automatically by Gamestack.Sprite and Gamestack.Animation.\r\n     * Gamestack.Frame does not take arguments.\r\n     * It is instantiated, then initilized with chainable function-calls.</info-bit>\r\n     *\r\n     * @returns {Frame}\r\n     *\r\n     * @example\r\n     *\r\n     * var selected_frame = new Gamestack.Frame().Image(gameImage).Size(frameSizeVector);\r\n\r\n     *\r\n     */\r\n\r\n\r\n    class Frame\r\n    {\r\n        constructor()\r\n    {\r\n\r\n        var __inst = this;\r\n\r\n        this.framePos = new Gamestack.Vector(0, 0);\r\n\r\n    }\r\n\r\n\r\n    Image(i)\r\n    {\r\n        this.image = i;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Size(s)\r\n    {\r\n\r\n        this.size = new Gamestack.Vector(s, s, s);\r\n\r\n        this.frameSize = new Gamestack.Vector(s, s, s);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Position(p)\r\n    {\r\n        this.position = new Gamestack.Vector(p, p, p);\r\n\r\n        this.framePos = new Gamestack.Vector(p, p, p);\r\n\r\n        return this;\r\n    }\r\n\r\n    FramePos()\r\n    {\r\n        this.position = new Gamestack.Vector(p, p, p);\r\n\r\n        this.framePos = new Gamestack.Vector(p, p, p);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n        Gamestack.Frame = Frame;\r\n\r\n})();\r\n;\r\nclass Game\r\n{\r\n    constructor(srcFile)\r\n    {\r\n\r\n    }\r\n}\r\n\r\nGamestack.Game = Game;\r\n\r\n;/**\r\n * @ignore\r\n * */\r\n\r\nclass ControllerEventKeys {\r\n    constructor() {\r\n        return {\r\n\r\n            left_stick: false,\r\n\r\n            right_stick: false,\r\n\r\n            0: false,\r\n\r\n            1: false,\r\n\r\n            2: false,\r\n\r\n            3: false,\r\n\r\n            4: false,\r\n\r\n            5: false,\r\n\r\n            6: false,\r\n\r\n            7: false,\r\n\r\n            8: false,\r\n\r\n            9: false,\r\n\r\n            10: false,\r\n\r\n            11: false,\r\n\r\n            12: false,\r\n\r\n            13: false,\r\n\r\n            14: false,\r\n\r\n            15: false,\r\n\r\n            16: false,\r\n\r\n            17: false,\r\n\r\n            18: false,\r\n\r\n            19: false\r\n\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nGamestack.ControllerEventKeys = ControllerEventKeys;\r\n\r\n\r\n/**\r\n * Creates an instance of GamepadAdapter: --instead use the existing: Gamestack.GamepadAdapter, a working instance of this class.\r\n * -supports game-controller input for web-games\r\n * -accesses live gamepad input from the HTML5 Gamepad Api\r\n * @returns {GamepadAdapter} an instance of GamepadAdapter\r\n * */\r\n\r\nGamestack.gamepads = Gamestack.gamepads || [];\r\n\r\nclass GamepadAdapter {\r\n\r\n    constructor() {\r\n\r\n        this.__gamepads = [];\r\n\r\n        this.intervals = [];\r\n\r\n        let controller_stack = this;\r\n\r\n        let __gamepadMaster = this;\r\n\r\n        this.events = [];\r\n\r\n        window.addEventListener(\"gamepadconnected\", function (e) {\r\n            console.log(\"Gamepad connected at index %d: %s. %d buttons, %d axes.\",\r\n                e.gamepad.index, e.gamepad.id,\r\n                e.gamepad.buttons.length, e.gamepad.axes.length);\r\n\r\n            if (__gamepadMaster.mainLoop) {\r\n                window.clearInterval(__gamepadMaster.mainLoop);\r\n            }\r\n\r\n            __gamepadMaster.mainLoop = window.setInterval(function () {\r\n\r\n                var gps = navigator.getGamepads();\r\n\r\n                __gamepadMaster.gps = gps;\r\n\r\n                for (var x = 0; x < gps.length; x++) {\r\n\r\n                    var events = __gamepadMaster.__gamepads[x] ? __gamepadMaster.__gamepads[x] : {};\r\n\r\n                    __gamepadMaster.process(__gamepadMaster.gps[x], events);\r\n\r\n                }\r\n\r\n            }, 20);\r\n\r\n\r\n        });\r\n\r\n\r\n    }\r\n\r\n    gamepads() {\r\n\r\n        return navigator.getGamepads();\r\n\r\n    }\r\n\r\n    disconnect_all() {\r\n\r\n        for (var x = 0; x < this.intervals.length; x++) {\r\n\r\n            window.clearInterval(this.intervals[x]);\r\n\r\n        }\r\n    }\r\n\r\n    disconnect_by_index(game_pad_index) {\r\n\r\n        window.clearInterval(this.intervals[game_pad_index]);\r\n\r\n    }\r\n\r\n    hasAnyPad() {\r\n        return \"getGamepads\" in navigator;\r\n\r\n    }\r\n\r\n    Event(key, game_pad, callback) {\r\n        return {\r\n\r\n            key: key, game_pad: game_pad, callback: callback\r\n\r\n        }\r\n\r\n    }\r\n\r\n    GamepadEvents(args) {\r\n\r\n        var gp = {};\r\n\r\n        gp.stick_left = args.stick_left || function (x, y) {\r\n\r\n            //  console.log('Def call');\r\n\r\n        }\r\n\r\n        gp.stick_right = args.stick_right || function (x, y) {\r\n\r\n        }\r\n\r\n        gp.buttons = [];\r\n\r\n        gp.extendFunc = function (f1, f2) {\r\n\r\n            var fc = f2;\r\n\r\n            return function (x, y) {\r\n\r\n                f2(x, y);\r\n\r\n                f1(x, y);\r\n\r\n            }\r\n\r\n        };\r\n\r\n        gp.on = function (key, callback) {\r\n\r\n            if (this[key] && key !== \"on\") {\r\n\r\n                var current_cb = typeof(this[key]) == 'function' ? this[key] : function (x, y) {\r\n                };\r\n\r\n                this[key] = this.extendFunc(callback, current_cb);\r\n\r\n\r\n            }\r\n\r\n            else if (key.indexOf('button') >= 0 && key.indexOf('_') >= 0) {\r\n                var parts = key.split('_');\r\n\r\n                var number;\r\n\r\n                try {\r\n\r\n                    number = parseInt(parts[1]);\r\n\r\n\r\n                    var current_cb = typeof(this['buttons'][number]) == 'function' ? this['buttons'][number] : function (x, y) {\r\n                    };\r\n\r\n                    this['buttons'][number] = this.extendFunc(callback, current_cb);\r\n\r\n                }\r\n                catch (e) {\r\n                    console.error('could not parse \"on\" event with ' + key);\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        gp.constructor = {name: \"GamepadEvents\"};\r\n\r\n        this.__gamepads.push(gp);\r\n\r\n        Gamestack.gamepads = this.__gamepads;\r\n\r\n        return gp;\r\n\r\n    }\r\n\r\n    getGamepads() {\r\n        return Gamestack.gamepads;\r\n\r\n    }\r\n\r\n    process(gp, gpEvents) {\r\n\r\n        this.process_buttons(gp, gpEvents);\r\n\r\n        this.process_axes(gp, gpEvents);\r\n\r\n    }\r\n\r\n    process_axes(gp, events) {\r\n\r\n        if (!gp || !gp['axes']) {\r\n\r\n            return false;\r\n\r\n        }\r\n\r\n\r\n        for (var i = 0; i < gp.axes.length; i += 2) {\r\n\r\n            var axis1 = gp.axes[i], axia2 = gp.axes[i + 1];\r\n\r\n            var ix = (Math.ceil(i / 2) + 1), x = gp.axes[i], y = gp.axes[i + 1];\r\n\r\n            if (ix == 1 && events.stick_left) {\r\n                events.stick_left(x, y);\r\n\r\n            }\r\n\r\n            if (ix == 2 && events.stick_right) {\r\n                events.stick_right(x, y);\r\n\r\n            }\r\n\r\n            if (this.events && this.events['stick_' + i] && typeof(this.events['stick_' + i].callback) == 'function') {\r\n                this.events['stick_' + i].callback();\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n    process_buttons(gp, events) {\r\n\r\n        if (!gp || !gp['buttons']) {\r\n            return false;\r\n\r\n        }\r\n\r\n        for (var i = 0; i < gp.buttons.length; i++) {\r\n\r\n            if (!events.buttons)\r\n                break;\r\n\r\n            else if (events.buttons.length > i && typeof(events.buttons[i]) == 'function') {\r\n                events.buttons[i](gp.buttons[i].pressed);\r\n            }\r\n            else if (events.buttons.length > i && typeof(events.buttons[i]) == 'object' && typeof(events.buttons[i].update) == 'function') {\r\n                events.buttons[i].update(events.buttons[i].pressed);\r\n\r\n            }\r\n            var clearance_1 = this.events && this.events[i], gpc, bkey = \"button_\" + i;\r\n\r\n            if (clearance_1) {\r\n                gpc = this.events[bkey] && !isNaN(this.events[bkey].game_pad) ? this.gamepads[this.events[bkey].game_pad] : this.events[bkey].game_pad;\r\n            }\r\n            ;\r\n\r\n            if (clearance_1 && gpc && typeof(this.events[bkey].callback) == 'function') {\r\n                //call the callback\r\n                this.events[i].callback();\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    on(key, gpix, callback) {\r\n\r\n        var keys = Typo.MakeArray(key || []), gps = Typo.MakeArray(gpix || []);;\r\n\r\n        for(var x in keys)\r\n        {\r\n            for(var y in gps)\r\n            {\r\n                if (gps[y] >= this.__gamepads.length) {\r\n\r\n                    this.__gamepads.push(this.GamepadEvents({}));\r\n\r\n                }\r\n\r\n                this.__gamepads[y].on(keys[x], callback);\r\n\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**********\r\n * NOTE: here we bind the instance, and NOT the instantiator.\r\n *\r\n * *********/\r\n\r\nif (!Gamestack.GamepadAdapter) {\r\n\r\n    Gamestack.GamepadAdapter = new GamepadAdapter();\r\n\r\n    // __gameInstance.gamepads.push(gamepad);\r\n\r\n}\r\n;\r\n(function () {\r\n    console.log('GameWindow class: creating');\r\n\r\n\r\n    /**\r\n     * Creates a GameWindow object.\r\n     *\r\n     * <iframe style='width:400px; height:450px; overflow:hidden;' src='../client/examples/js-class/GameWindow.html'> </iframe>\r\n     *\r\n     * @param   {Object} args object of arguments\r\n     * @param   {Object} args.canvas the canvas element for this gameWindow. --GameWindow's constructor will create a full-screen canvas, if a canvas is not supplied in args.\r\n     * @param   {Object} args.ctx a canvas context\r\n     * @param   {Array} args.sprites list of sprites, to be applied with GameWindow\r\n     * @param   {Array} args.forces the list of forces, such as gravity, to be applied with GameWindow\r\n     * @returns {GameWindow} a Gamestack.GameWindow object\r\n     * */\r\n\r\n\r\n    class GameWindow {\r\n        constructor({canvas = false, objects, update, camera} = {}) {\r\n            this.objects = objects || [];\r\n\r\n            this.bool_events = Gamestack.bool_events || [];\r\n\r\n            this.canvas = canvas || false;\r\n\r\n            if (!canvas) {\r\n                console.info('GameWindow() had no {canvas:canvas} argument. Creating a new canvas in document.body...');\r\n                this.canvas = document.createElement('CANVAS');\r\n                this.canvas.setAttribute('class', 'gamewindow');\r\n                document.body.append(this.canvas);\r\n            }\r\n\r\n            document.body.style.position = \"absolute\";\r\n\r\n            document.body.style.width = \"100%\";\r\n\r\n            document.body.style.height = \"100%\";\r\n\r\n            this.camera = new Gamestack.Camera();\r\n\r\n            this.camera.target = false;\r\n\r\n            __gamestackInstance.camera = this.camera;\r\n\r\n            if (typeof update == 'function') {\r\n                this.onUpdate(update);\r\n\r\n            }\r\n\r\n            var __inst = this;\r\n\r\n            this.Size();\r\n\r\n            this.update_ext = [];\r\n\r\n            window.onresize = function () {\r\n\r\n                if(__inst.isAbsoluteSize)\r\n                    return;\r\n\r\n                __inst.Size();\r\n\r\n            };\r\n\r\n            this.ctx = this.canvas.getContext('2d');\r\n\r\n            Gamestack.game_windows.push(this);\r\n\r\n        }\r\n\r\n        uniques(list) {\r\n\r\n            var listout = [];\r\n\r\n            $Q.each(list, function (ix, item) {\r\n\r\n                if (!listout.indexOf(item.id) >= 0) {\r\n\r\n                    var str = item.name;\r\n\r\n                    listout.push({\"sprite\": item});\r\n\r\n                }\r\n\r\n            });\r\n\r\n            return listout;\r\n\r\n        }\r\n\r\n        setPlayer(player) {\r\n            this.player = player;\r\n\r\n            if (!this.objects.indexOf(player) >= 0) {\r\n                this.objects.push(player);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        onUpdate(f) {\r\n\r\n            this.update_ext.push(f);\r\n\r\n        }\r\n\r\n        update() {\r\n\r\n            Gamestack.each(this.objects, function (ix, item) {\r\n\r\n                if (item && typeof(item.def_update) == 'function') {\r\n\r\n                    item.def_update(item);\r\n\r\n                }\r\n\r\n                if (item && typeof(item.update) == 'function') {\r\n                    item.update(item);\r\n\r\n                }\r\n\r\n            });\r\n\r\n            GameStack.each(this.bool_events, function (ix, item) {\r\n\r\n                if (item && item.bool()) {\r\n\r\n                    item.callback();\r\n\r\n                }\r\n\r\n            });\r\n\r\n\r\n            for (var x in this.update_ext) {\r\n                this.update_ext[x]();\r\n\r\n            }\r\n\r\n        }\r\n\r\n        draw() {\r\n\r\n            var _gw = this;\r\n\r\n\r\n            if (this.before_draw_ext) {\r\n                this.before_draw_ext();\r\n            }\r\n\r\n            Gamestack.each(this.objects, function (ix, item) {\r\n\r\n                if (['Sprite', 'Background', 'Interactive', 'Terrain'].indexOf(item.constructor.name) >= 0 || item.__isDrawable) {\r\n\r\n                    Gamestack.Canvas.draw(item, _gw.ctx);\r\n                }\r\n\r\n            });\r\n\r\n            if (this.draw_ext) {\r\n                this.draw_ext();\r\n            }\r\n\r\n\r\n        }\r\n\r\n        onDraw(f) {\r\n\r\n            this.draw_ext = function () {\r\n                f();\r\n            };\r\n\r\n        }\r\n\r\n        onBeforeDraw(f) {\r\n\r\n            this.before_draw_ext = function () {\r\n                f();\r\n            };\r\n\r\n        }\r\n\r\n        Size(w, h, isAbsoluteSize) { //call with no args to fill to browser-window-size;\r\n\r\n            w = w || this.canvas.parentNode.clientWidth;\r\n\r\n            h = h || this.canvas.parentNode.clientHeight;\r\n\r\n            var c = document.getElementById('#gs-container');\r\n\r\n            if (c) {\r\n                c.setAttribute('width', w)\r\n            }\r\n            ;\r\n\r\n            if (c) {\r\n                c.setAttribute('height', h)\r\n            }\r\n            ;\r\n\r\n            __gamestackInstance.WIDTH = w;\r\n\r\n            __gamestackInstance.HEIGHT = h;\r\n\r\n            this.canvas.width = w;\r\n\r\n            this.canvas.height = h;\r\n\r\n            this.isAbsoluteSize = isAbsoluteSize || false;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        add(obj, onBottom) {\r\n            //1: if Sprite(), Add object to the existing __gameWindow\r\n\r\n            var __inst = this;\r\n\r\n            if (obj instanceof Gamestack.Camera) {\r\n\r\n                this.camera = obj;\r\n\r\n            }\r\n            else if (obj instanceof Gamestack.GSEvent) {\r\n\r\n                if (__gamestackInstance.__running) {\r\n\r\n                    return console.error('Events can only be added before Gamstack.animate() is called::aka before the main update / loop begins');\r\n                }\r\n                else {\r\n\r\n                    obj.apply();\r\n\r\n\r\n                }\r\n\r\n            }\r\n            else {\r\n\r\n                if (onBottom) {\r\n                    this.objects.splice(0, 0, obj);\r\n                }\r\n                else {\r\n\r\n                    this.objects.push(obj);\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this.collect(obj);\r\n\r\n            return obj;\r\n\r\n        }\r\n\r\n        Background(c)\r\n        {\r\n            this.canvas.style.background = c;\r\n\r\n            this.canvas.style.backgroundColor = c;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        remove(obj) {\r\n\r\n            //1: if Sprite(), Add object to the existing __gameWindow\r\n\r\n            var ix = this.objects.indexOf(obj);\r\n\r\n            if (ix >= 0) {\r\n                this.objects.splice(ix, 1);\r\n            }\r\n\r\n\r\n            var ixG = Gamestack.all_objects.indexOf(obj);\r\n\r\n            if (ixG >= 0) {\r\n                Gamestack.all_objects.splice(ixG, 1);\r\n            }\r\n\r\n\r\n        }\r\n\r\n        collect(obj) {\r\n\r\n            Gamestack.all_objects.push(obj);\r\n\r\n        }\r\n\r\n        animate(time) {\r\n\r\n            var __inst = this;\r\n\r\n            requestAnimationFrame(function () {\r\n\r\n                __inst.animate();\r\n\r\n            });\r\n\r\n\r\n            if (Gamestack.__stats) {\r\n                Gamestack.__stats.begin();\r\n                Gamestack.__statsMS.begin();\r\n                Gamestack.__statsMB.update();\r\n            }\r\n\r\n            __gamestackInstance.isAtPlay = true;\r\n\r\n            if (window.TWEEN)\r\n                TWEEN.update(time);\r\n\r\n            __inst.update();\r\n\r\n            this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n\r\n            this.draw();\r\n\r\n            if (Gamestack.__stats) {\r\n                Gamestack.__stats.end();\r\n                Gamestack.__statsMS.end();\r\n            }\r\n\r\n        }\r\n\r\n        start() {\r\n\r\n            if (typeof(Stats) == 'function') //Stats library exists\r\n            {\r\n                //basic stat animation\r\n                Gamestack.__stats = new Stats();\r\n                Gamestack.__stats.showPanel(0); // 0: fps, 1: ms, 2: mb, 3+: custom\r\n\r\n                Gamestack.__stats.dom.style.left = '30%';\r\n\r\n                Gamestack.__stats.dom.setAttribute('class', 'stat');\r\n\r\n                this.canvas.parentNode.appendChild(Gamestack.__stats.dom);\r\n\r\n                //basic stat animation\r\n                Gamestack.__statsMS = new Stats();\r\n                Gamestack.__statsMS.showPanel(1); // 0: fps, 1: ms, 2: mb, 3+: custom\r\n\r\n                Gamestack.__statsMS.dom.style.left = '30%';\r\n\r\n                Gamestack.__statsMS.dom.style.marginLeft = '90px';\r\n\r\n                Gamestack.__statsMS.dom.setAttribute('class', 'stat');\r\n\r\n                this.canvas.parentNode.appendChild(Gamestack.__statsMS.dom);\r\n\r\n                //basic stat animation\r\n                Gamestack.__statsMB = new Stats();\r\n                Gamestack.__statsMB.showPanel(2); // 0: fps, 1: ms, 2: mb, 3+: custom\r\n\r\n                Gamestack.__statsMB.dom.style.left = '30%';\r\n\r\n                Gamestack.__statsMB.dom.setAttribute('class', 'stat');\r\n\r\n                Gamestack.__statsMB.dom.style.marginLeft = '180px';\r\n\r\n                this.canvas.parentNode.appendChild(Gamestack.__statsMB.dom);\r\n\r\n            }\r\n\r\n            this.animate();\r\n        }\r\n\r\n    }\r\n\r\n    Gamestack.GameWindow = GameWindow;\r\n\r\n})();;\r\n(function () {\r\n    console.log('GSEvent class... creating');\r\n\r\n    class GSEvent {\r\n\r\n        constructor(args = {}) {\r\n\r\n            Gamestack.Modifiers.informable(this, args);\r\n\r\n        }\r\n    }\r\n\r\n    function GSEventLink(extendedObject, extendedKey, extendor, extendorKey) {\r\n        this.parent_id = extendedObject.id,\r\n\r\n            this.child_id = extendor.id,\r\n\r\n            this.parent_key = extendedKey,\r\n\r\n            this.child_key = extendorKey;\r\n    };\r\n\r\n    /**\r\n     * Creates an instance of InputEvent\r\n     * <info-bit> Gamestack.InputEvent runs a callback function when a specified input is triggered</info-bit>\r\n     *\r\n     * <tip is=\"p\">Instead of calling\r\n     *\r\n     * @param   {Object} args object of arguments\r\n     * @param   {number} args.btnix the index of controller-button to be applied\r\n     * @param   {number} args.gpix the index of pc-gamepad --the 1st gamepad will have index 0\r\n     * @param   {number} args.stickix the controller-stick-index to be applied\r\n     * @param   {Array} args.keys array of strings for keys to be applied\r\n     * @param   {Function} args.callback the function to call when InputEvent is triggered\r\n     * @returns {Gamestack.InputEvent} a Gamestack.InputEvent object\r\n     */\r\n\r\n\r\n    class InputEvent extends GSEvent {\r\n        constructor(args) {\r\n            super(args);\r\n\r\n            var btnix = args.btnix || args.button_ix || false,\r\n\r\n                gpix = args.gpix || args.gamepad_ix || 0,\r\n\r\n                callback = args.callback || function () {\r\n\r\n\r\n                };\r\n\r\n            var six = args.stickix || args.six || args.stick_ix || false;\r\n\r\n            var inputKey = six !== false ? 'stick_' + six : btnix !== false ? 'button_' + btnix : false;\r\n\r\n            //Keys:\r\n\r\n            var keyboardKeys = Typo.MakeArray(args.keys || []);\r\n\r\n            //Run the Q() function\r\n\r\n            if (keyboardKeys instanceof Array) {\r\n\r\n                Gamestack.each(keyboardKeys, function (ix, keyitem) {\r\n\r\n                    Gamestack.InputSystem.extendKey('key_' + keyitem.toLowerCase(), function () {\r\n\r\n                        callback(keyitem.toLowerCase());\r\n\r\n                    });\r\n                });\r\n            }\r\n\r\n            if (inputKey && gpix >= 0) {\r\n\r\n                Gamestack.GamepadAdapter.on(inputKey, gpix, function (x, y) {\r\n\r\n                    callback(x, y);\r\n\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     *\r\n     * @extends InputEvent\r\n     *\r\n     * Creates an instance of KeyboardEvent\r\n     * <info-bit> Gamestack.KeyboardEvent runs a callback function when keyboard-keys are pressed</info-bit>\r\n     * @param   {Array | string} keys the Array of keys or single string-key for this event\r\n     * @param   {Function} callback the callback-function to be called when this event is triggered\r\n\r\n     * @returns {Gamestack.KeyboardEvent}\r\n     */\r\n\r\n    class KeyboardEvent extends InputEvent {\r\n        constructor(keys=keys instanceof Array ? keys: [keys], callback=function(){}) {\r\n\r\n            super({});\r\n\r\n            this.keys = keys;\r\n\r\n            this.callback = callback;\r\n\r\n        }\r\n\r\n        init()\r\n        {\r\n            var keyboardKeys = this.keys;\r\n\r\n            var __inst = this;\r\n\r\n            if (keyboardKeys instanceof Array) {\r\n\r\n                Gamestack.each(keyboardKeys, function (ix, keyitem) {\r\n\r\n                    Gamestack.InputSystem.extendKey('key_' + keyitem.toLowerCase(), function () {\r\n\r\n                        __inst.callback(keyitem.toLowerCase());\r\n\r\n                    });\r\n                });\r\n            }\r\n        }\r\n\r\n        Keys(keys=[])\r\n        {\r\n            this.keys = Typo.MakeArray(keys)\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        Call(callback=function(){})\r\n        {\r\n            this.callback= callback;\r\n\r\n            this.init();\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    }\r\n    ;\r\n\r\n\r\n\r\n\r\n\r\n    /**\r\n     *\r\n     * @extends InputEvent\r\n     *\r\n     * Creates an instance of GamepadEvent\r\n     * <info-bit> Gamestack.GamepadEvent runs a callback function when any specified gamepad-buttons or gamepad-sticks are pressed</info-bit>\r\n     * @param   {Array | string} gamepadKeys the Array of gamepadKeys or single string-key, representing gamepad-buttons or gamepad-sticks for this event\r\n     * @param   {Function} callback the callback-function to be called when this event is triggered\r\n\r\n     * @returns {Gamestack.GamepadEvent}\r\n     */\r\n\r\n    class GamepadEvent extends InputEvent {\r\n        constructor(keys=[], callback=function(){}) {\r\n\r\n            super({});\r\n\r\n            this.keys = keys;\r\n\r\n            this.callback = callback;\r\n        }\r\n\r\n        Gamepads(gps=[])\r\n        {\r\n            this.gps = gps = Typo.MakeArray(gps || []);\r\n\r\n            return this;\r\n        }\r\n\r\n        init()\r\n        {\r\n            var gamepadKeys = Typo.MakeArray(this.keys || []);\r\n\r\n            var __inst = this;\r\n\r\n            Gamestack.GamepadAdapter.on(gamepadKeys, this.gps, function (x, y) {\r\n\r\n                __inst.callback(x, y);\r\n\r\n            });\r\n        }\r\n\r\n        Keys(keys=[])\r\n        {\r\n            this.keys = Typo.MakeArray(keys);\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        Call(callback=function(){})\r\n        {\r\n            this.callback= callback;\r\n\r\n            this.init();\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    }\r\n    ;\r\n\r\n    class CollisionEvent extends GSEvent {\r\n        constructor(args = {}) {\r\n            super(args);\r\n\r\n        }\r\n\r\n        /**\r\n         * applies objects and siblings to be compared for the CollisionEvent instance\r\n         * @memberof CollisionEvent\r\n         * @param   {Array} objects the main-objects for collision processing\r\n         * @param   {Array} siblings the comparable-objects for collision processing\r\n         * @returns {CollisionEvent} the current instance of CollisionEvent, reference to 'this' keyword\r\n         */\r\n\r\n        OnCollision(objects, siblings) {\r\n\r\n            this.objects = Typo.MakeArray(objects || this.objects || []);\r\n\r\n            this.siblings = Typo.MakeArray(siblings || this.siblings || []);\r\n\r\n            return this;\r\n        }\r\n\r\n        /**\r\n         * applies a callback to be called whenever the onBool function returns true\r\n         * @memberof CollisionEvent\r\n         * @param   {callbackFunction} callbackFunction the function to be called --replaces the value of collisionEvent.callback\r\n\r\n         * @returns {CollisionEvent} the current instance of CollisionEvent, reference to 'this' keyword\r\n         */\r\n\r\n        Call(callbackFunction) {\r\n\r\n            this.callback = callbackFunction || this.callback || function () {\r\n            };\r\n\r\n            let __inst = this;\r\n\r\n            $Q(this.objects).on('collide', $Q(this.siblings), function (obj1, obj2) {\r\n\r\n                __inst.callback(obj1, obj2);\r\n\r\n\r\n\r\n            });\r\n\r\n            return this;\r\n\r\n        }\r\n    }\r\n    ;\r\n\r\n    /**\r\n     * returns BoolEvent --allows code to run whenever a conditional-function returns true\r\n     * @param   {onBool} onBool the function to be tested each update\r\n     * @param   {call} call the function to be called when onBool returns true;\r\n\r\n     * @returns {BoolEvent} a Gamestack.BoolEvent object\r\n     */\r\n\r\n\r\n    class BoolEvent extends GSEvent {\r\n        constructor(onBool, callback) {\r\n\r\n            super({});\r\n\r\n            this.bool = onBool || function () {\r\n                console.info('CustomBoolEvent():needs .on function(){}. --Add this as 1st argument or via chainable On() function returning bool argument');\r\n            }\r\n            /*Defaults to false to avoid broken code*/\r\n\r\n            this.callback = callback || function () {\r\n                console.info('CustomBoolEvent():needs .callback function(){} --Add this as 2nd argument or via chainable Call() function');\r\n            };\r\n\r\n            Gamestack.bool_events.push(this);\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * applies a boolFunction to be tested for true each update\r\n         * @param   {boolFunction} boolFunction the function to be tested each update --replaces the value of boolEvent.onBool\r\n\r\n         * @returns {BoolEvent} the current instance of BoolEvent, reference to 'this' keyword\r\n         */\r\n\r\n        On(boolFunction) {\r\n\r\n            this.bool = boolFunction;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * applies a callback to be called whenever the onBool function returns true\r\n         * @memberof BoolEvent\r\n         * @param   {callbackFunction} callbackFunction the function to be called --replaces the value of boolEvent.callback\r\n\r\n         * @returns {BoolEvent} the current instance of BoolEvent, reference to 'this' keyword\r\n         */\r\n\r\n        Call(callbackFunction) {\r\n\r\n            this.callback = callbackFunction || this.callback || function () {\r\n            };\r\n\r\n            return this;\r\n\r\n        }\r\n    }\r\n    ;\r\n\r\n    BoolEvent.Bool = BoolEvent.On;\r\n\r\n    Gamestack.GSEvent = GSEvent;\r\n\r\n    Gamestack.GSEventLink = GSEventLink;\r\n\r\n    Gamestack.InputEvent = InputEvent;\r\n\r\n    Gamestack.GamepadEvent = GamepadEvent;\r\n\r\n    Gamestack.KeyboardEvent = KeyboardEvent;\r\n\r\n    Gamestack.CollisionEvent = CollisionEvent;\r\n\r\n    Gamestack.BoxCollisionEvent = CollisionEvent;\r\n\r\n    Gamestack.BoolEvent = BoolEvent;\r\n\r\n})();;/*\r\n * Gamestack.GSProton: -An implementation of the Proton.js particle engine.\r\n * :instantiable\r\n * :data-persistent / json format\r\n * :reloadable\r\n * :__presets : various GSProton objects for in-game-use\r\n *\r\n * */\r\n\r\n(function(){\r\n    console.log('CanvasStack class... creating');\r\n\r\n\r\n    /**\r\n     * @ignore\r\n     *\r\n     * Takes arguments of image, canvas, parent, collideables?\r\n\r\n     * @param   {image} the img\r\n     * @param   {canvas} canvas to draw on\r\n     * @param   {parent} the parent, either a position{x,y,z} or object with a 'position' property having x,y,z\r\n     * @returns {GSProton} a GSProton object\r\n     */\r\n\r\nclass GSProton {\r\n\r\n    constructor(image, canvas, parent, collideables) {\r\n\r\n        var args = {image:image, canvas:canvas, parent:parent, collideables:collideables};\r\n\r\n        if(image.image && image.canvas) //image is a GS Proton passed back through constructor as first argument --enable data persistence\r\n        {\r\n\r\n            args = image;\r\n\r\n        }\r\n\r\n        args.canvas = args.canvas || Gamestack.canvas;\r\n\r\n        args.parent = args.parent || new Gamestack.Vector(0, 0, 0);\r\n\r\n        args.image = args.image || new Gamestack.GameImage;\r\n\r\n        this.name = args.name || \"__NO-Name\";\r\n\r\n        this.description = args.description || \"__NO-Description\";\r\n\r\n        this.image = args.image;\r\n\r\n        this.active = false;\r\n\r\n        this.image =args.image;\r\n\r\n        this.canvas = args.canvas;\r\n\r\n        this.emission_amount_min = 1;\r\n\r\n        this.emission_amount_max = 1;\r\n\r\n        this.radius = 0;\r\n\r\n        this.mass = 1;\r\n\r\n        this.emissions_frequency = 5;\r\n\r\n        this.gravity = 0;\r\n\r\n        this.proton = {};\r\n\r\n        this.usingAttraction = false;\r\n\r\n        this.usingRepulsion = false;\r\n\r\n        this.usingPointZone = false;\r\n\r\n        this.pointZoneX = 0;\r\n\r\n        this.pointZoneY = 0;\r\n\r\n        this.usingBlendAlpha = false;\r\n\r\n        this.attraction = {\r\n\r\n          position:new Vector(0, 0),\r\n\r\n            min:0,\r\n\r\n            max:0\r\n\r\n        };\r\n\r\n        this.repulsion = {\r\n\r\n            position:new Gamestack.Vector(0, 0),\r\n\r\n            min:0,\r\n\r\n            max:0\r\n\r\n        };\r\n\r\n        this.startAlpha = 1.0;\r\n\r\n        this.endAlpha = 1.0;\r\n\r\n        this.startColor_asRandom = true;\r\n\r\n        this.startColor = \"#FFFFFF\";\r\n\r\n        this.startScale = 1.0;\r\n\r\n        this.endScale = 1.0;\r\n\r\n        this.endColor_asRandom = true;\r\n\r\n        this.endColor = \"#FFFFFF\";\r\n\r\n        this.positionX_asRandom = false;\r\n\r\n        this.positionY_asRandom = false;\r\n\r\n        this.positionX = 0;\r\n\r\n        this.positionY = 0;\r\n\r\n        this.vSpeedMin = 0.5;\r\n\r\n        this.vSpeedMax = 1.5;\r\n\r\n        this.vSpeedRotationMin = 0;\r\n\r\n        this.vSpeedRotationMax = 360;\r\n\r\n        this.lifeMin = 5;\r\n\r\n        this.lifeMax = 10;\r\n\r\n        for(var x in this)\r\n        {\r\n            if(args.hasOwnProperty(x))\r\n            {\r\n\r\n                this[x] = args[x];\r\n\r\n            }\r\n\r\n        }\r\n\r\n        //the following instantiate to empty []\r\n\r\n        this.initializers = [];\r\n\r\n        this.behaviors = [];\r\n\r\n    }\r\n\r\n    replaceBehaviorByType(constructor, replacement) {\r\n\r\n        for (var x in this.behaviors) //remove any existing object by type\r\n        {\r\n            if (this.behaviors[x] instanceof constructor) {\r\n\r\n                this.behaviors.splice(x, 1);\r\n\r\n            }\r\n        }\r\n\r\n        this.behaviors.push(replacement);\r\n\r\n        this.ticker = 0;\r\n\r\n    }\r\n\r\n    Collideables(collideableArray) {\r\n        this.collideables = collideableArray;\r\n    }\r\n\r\n    Rotation(minRot, maxRot) {\r\n\r\n        maxRot = maxRot || minRot; //they are either positive-number or the same\r\n        this.vSpeedRotationMin = minRot;\r\n\r\n        this.vSpeedRotationMax = maxRot;\r\n\r\n        this.replaceBehaviorByType(Proton.V, new Proton.V(new Proton.Span(this.vSpeedMin, this.vSpeedMax), new Proton.Span(this.vSpeedRotationMin, this.vSpeedRotationMax), 'polar'));\r\n\r\n    }\r\n\r\n    Gravity(grav) {\r\n\r\n        this.gravity = grav;\r\n\r\n        this.replaceBehaviorByType(Proton.Gravity, new Proton.Gravity(this.gravity));\r\n\r\n    }\r\n\r\n    Velocity(minV, maxV) {\r\n\r\n        maxV = maxV || minV; //they are either positive-number or the same\r\n        this.vSpeedMin = minV;\r\n\r\n        this.vSpeedMax = maxV;\r\n\r\n        this.replaceBehaviorByType(Proton.V, new Proton.V(new Proton.Span(this.vSpeedMin, this.vSpeedMax), new Proton.Span(this.vSpeedRotationMin, this.vSpeedRotationMax), 'polar'));\r\n\r\n    }\r\n\r\n    Attraction(position, min, max)\r\n    {\r\n        this.usingAttraction = true;\r\n\r\n       this.attraction.position = position;\r\n\r\n       this.attraction.min = min;\r\n\r\n       this.attraction.max = max;\r\n    }\r\n\r\n    Repulsion(x, y, min, max)\r\n    {\r\n        this.usingRepulsion = true;\r\n\r\n        this.repulsion.position = position;\r\n\r\n        this.repulsion.min = min;\r\n\r\n        this.repulsion.max = max;\r\n    }\r\n\r\n    onUpdate() {\r\n\r\n    }\r\n\r\n    isRectangularCollision(obj1, obj2) {\r\n\r\n        return obj1.position.x + obj1.size.x > obj2.position.x &&\r\n            obj1.position.y + obj1.size.y > obj2.position.y &&\r\n            obj1.position.x < obj2.position.x + obj2.size.x &&\r\n            obj1.position.y < obj2.position.y + obj2.size.y;\r\n\r\n    }\r\n\r\n    collide(obj1, obj2) {\r\n        console.log('collide() function UNSET');\r\n\r\n    }\r\n\r\n    update(collideables) {\r\n\r\n        collideables = collideables || this.collideables || [];\r\n\r\n        this.ticker += 1;\r\n\r\n        if (this.ticker % 100 == 0) {\r\n\r\n            console.log('Proton:update():');\r\n            console.log(this.emitter);\r\n\r\n        }\r\n\r\n        if (this.positionX_asRandom) {\r\n            this.emitter.p.x = Math.floor(Math.random() * canvas.width);\r\n        }\r\n        else {\r\n            this.emitter.p.x = this.positionX;\r\n\r\n        }\r\n\r\n\r\n        if (this.positionY_asRandom) {\r\n            this.emitter.p.y = Math.floor(Math.random() * canvas.width);\r\n        }\r\n        else {\r\n            this.emitter.p.y = this.positionY;\r\n\r\n        }\r\n\r\n        var particles = this.emitter.particles;\r\n\r\n\r\n        for (var x = 0; x < particles.length; x++) {\r\n            var p = {\r\n\r\n                size: {\r\n                    x: Math.round(this.emitter.initializes[0].w * this.emitter.scale),\r\n\r\n                    y: Math.round(this.emitter.initializes[0].h * this.emitter.scale)\r\n\r\n                },\r\n\r\n                position: particles[x].p\r\n\r\n            };\r\n            for (var y = 0; y < collideables.length; y++) {\r\n\r\n                if (collideables[y].hasOwnProperty('position') && collideables[y].hasOwnProperty('size') && this.isRectangularCollision(p, collideables[y])) {\r\n\r\n                    this.collide(p, collideables[y])\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    init() {\r\n\r\n        this.proton = new Proton;\r\n\r\n        this.emit_mode = this.emit_mode || \"\";\r\n\r\n        this.emitter = new Proton.Emitter();\r\n\r\n        this.emission_amount = this.emission_amount || 10;\r\n\r\n        this.emissions_frequency = this.emissions_frequency || 10;\r\n\r\n        var rps = 5 / this.emissions_frequency;\r\n\r\n        this.emitter.rate = new Proton.Rate([this.emission_amount_min, this.emission_amount_max], rps);\r\n\r\n        function allNumbers(list)\r\n        {\r\n            for(var x in list)\r\n            {\r\n                if(typeof(list[x]) == 'number')\r\n                {\r\n\r\n\r\n                }\r\n                else\r\n                {\r\n                    return false\r\n                }\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        };\r\n\r\n        this.initializers = [];\r\n\r\n        this.behaviors = [];\r\n\r\n        this.initializers.push(new Proton.ImageTarget(this.image));\r\n        this.initializers.push(new Proton.Mass(this.mass));\r\n        this.initializers.push(new Proton.Life(this.lifeMin, this.lifeMax));\r\n\r\n        this.initializers.push(new Proton.V(new Proton.Span(this.vSpeedMin, this.vSpeedMax), new Proton.Span(this.vSpeedRotationMin, this.vSpeedRotationMax), 'polar'));\r\n\r\n\r\n\r\n\r\n        if(this.usingPointZone)\r\n        {\r\n\r\n            this.initializers.push(new Proton.Position(new Proton.PointZone(this.pointZoneX, this.pointZoneY)));\r\n\r\n        }\r\n\r\n\r\n\r\n        this.behaviors.push(new Proton.Gravity(this.gravity));\r\n\r\n        this.behaviors.push(new Proton.Alpha(1, [this.startAlpha, this.endAlpha]));\r\n\r\n        this.behaviors.push(new Proton.Color(this.startColor_asRandom ? 'random' : this.startColor, this.endColor_asRandom ? 'random' : this.endColor, Infinity, Proton.easeInSine));\r\n\r\n        this.behaviors.push(new Proton.Scale(this.startScale, this.endScale));\r\n\r\n        if(allNumbers([this.attractionX, this.attractionY, this.attractionMin, this.attractionMax]))\r\n        {\r\n            console.info('Creating attraction');\r\n\r\n            this.behaviors.push(new Proton.Attraction({x:this.attractionX,y:this.attractionY}, this.attractionMin, this.attractionMax));\r\n\r\n        }\r\n\r\n        if(allNumbers([this.repulsionX, this.repulsionY, this.repulsionMin, this.repulsionMax]))\r\n        {\r\n            console.info('Creating repulsion');\r\n\r\n            this.behaviors.push(new Proton.Repulsion({x:this.repulsionX,y:this.repulsionY}, this.repulsionMin, this.repulsionMax));\r\n\r\n        }\r\n\r\n        if(this.usingAttraction)\r\n        {\r\n           this.behaviors.push(new Proton.Attraction(this.attraction.position, this.attraction.min, this.attraction.max));\r\n\r\n        }\r\n\r\n        if(this.usingRepulsion)\r\n        {\r\n            this.behaviors.push(new Proton.Repulsion(this.repulsion.position, this.repulsion.min, this.repulsion.max));\r\n\r\n        }\r\n\r\n        if(this.radius > 0)\r\n        {\r\n            this.initializers.push(new Proton.Radius(this.radius));\r\n\r\n\r\n        }\r\n\r\n\r\n        var i = this.initializers;\r\n\r\n        for (var x in i) {\r\n            this.emitter.addInitialize(i[x]);\r\n        }\r\n\r\n        var b = this.behaviors;\r\n\r\n        for (var x in b) {\r\n            this.emitter.addBehaviour(b[x]);\r\n        }\r\n\r\n        this.emitter.p = this.parent && this.parent.hasOwnProperty('x') ? new Vector(this.parent) : this.emitter.p;\r\n\r\n        this.emitter.p = this.parent && this.parent.hasOwnProperty('position')&& this.parent.position.hasOwnProperty('x') ? new Vector(this.parent.position) : this.emitter.p;\r\n\r\n        this.emitter.p.x += this.positionX;\r\n        this.emitter.p.y += this.positionY;\r\n\r\n            this.emitter.emit();\r\n\r\n        this.proton.addEmitter(this.emitter);\r\n\r\n        this.renderer = new Proton.Renderer('canvas', this.proton, this.canvas);\r\n\r\n        if(this.usingBlendAlpha)\r\n        {\r\n            this.renderer.blendFunc(\"SRC_ALPHA\", \"ONE\");\r\n\r\n        }\r\n\r\n        var __inst = this;\r\n\r\n        this.renderer.start();\r\n\r\n        this.tick();\r\n    }\r\n\r\n    on()\r\n    {\r\n        this.init();\r\n    }\r\n\r\n    off()\r\n    {\r\n       if(this.emitter && this.emitter.stopEmit)\r\n           this.emitter.stopEmit();\r\n    }\r\n\r\n    tick() {\r\n\r\n        requestAnimationFrame(function () {\r\n            __inst.tick()\r\n        });\r\n\r\n        var __inst =  this;\r\n\r\n            this.proton.update();\r\n       // this.update();\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nvar ProtonPresets = {\r\n\r\n    //particleDemoName:new GSProton();   //add particleDemoObjects\r\n\r\n\r\n};\r\n\r\nGamestack.GSProton = GSProton;\r\n\r\n})();\r\n;var head = document.head || document.getElementsByTagName('head')[0];\r\n\r\nhead.innerHTML += '<style>' +\r\n    '\\r\\n' +\r\n    '.speech-triangle { overflow:visible; }' +\r\n    '.speech-triangle:before { content: \"\";' +\r\n    'position: absolute;' +\r\n    'z-index:-1;' +\r\n    'width: 0;' +\r\n    'height: 0;' +\r\n    'left: 38px;' +\r\n    'bottom: -18px;' +\r\n    'border-width: 8px 8px;' +\r\n    'border-style: solid;' +\r\n    'border-color: #fff transparent transparent #fff;' +\r\n    ' } .farLeft:after{ right:0px; left:20px; } .farRight:after{ left:0px; right:20px; }   .flipX:after{  -moz-transform: scaleX(-1); -webkit-transform: scaleX(-1); -o-transform: scaleX(-1); transform: scaleX(-1); -ms-filter: fliph; /*IE*/ filter: fliph; /*IE*/  } ' +\r\n    ' </style>';\r\n\r\n\r\n(function () {\r\n    console.log('HtmlExtra classes... creating');\r\n\r\n\r\n    class HtmlExtra //to do apply a super object 'Extra'\r\n    {\r\n        constructor(args = {}) {\r\n            this.applyCSSArgs(args);\r\n        }\r\n\r\n        applyCSSArgs(args) {\r\n\r\n            var norms = Gamestack.normalArgs(args);\r\n\r\n            this.widthFloat = Gamestack.getArg(norms, ['width', 'widthfloat', 'w'], 0.5);\r\n\r\n            this.heightFloat = Gamestack.getArg(norms, ['height', 'heightfloat', 'h'], 0.5);\r\n\r\n            this.topFloat = Gamestack.getArg(norms, ['top', 'topfloat', 't'], 0.5);\r\n\r\n            this.bottomFloat = Gamestack.getArg(norms, ['bottom', 'bottomfloat', 'b'], false);\r\n\r\n            this.color = norms.color || '#ffffff';\r\n\r\n            this.backgroundColor = Gamestack.getArg(norms, ['backgroundcolor', 'backcolor', 'background', 'bc'], 'black');\r\n\r\n            this.text = norms.text || \"__BLANK\";\r\n\r\n            this.fontFamily = norms.font || norms.fontFamily || \"appFont\";\r\n\r\n            this.border = \"2px inset \" + this.color;\r\n\r\n            this.fontSize = norms.fontsize || \"20px\";\r\n\r\n            if (this.bottomFloat >= 0) {\r\n\r\n                this.targetBottom = this.get_float_pixels(this.bottomFloat, document.body.clientHeight);\r\n\r\n            }\r\n            else {\r\n\r\n                this.targetTop = this.get_float_pixels(this.topFloat, document.body.clientHeight);\r\n\r\n\r\n            }\r\n\r\n            this.fadeTime = {\r\n\r\n                in: 200,\r\n\r\n                out: 200\r\n            };\r\n\r\n        }\r\n\r\n        Opacity(o)\r\n        {\r\n            this.domElement.style.opacity = o;\r\n\r\n            return this;\r\n        }\r\n\r\n        Top(v) {\r\n\r\n            this.targetTop = this.get_float_pixels(v, document.body.clientHeight);\r\n\r\n            this.domElement.style.bottom = 'auto';\r\n            this.domElement.style.top = this.targetTop;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        Left(v) {\r\n\r\n            this.targetLeft = this.get_float_pixels(v, document.body.clientWidth);\r\n\r\n            this.domElement.style.right = 'auto';\r\n            this.domElement.style.left = this.targetLeft;\r\n\r\n            return this;\r\n        }\r\n\r\n        Bottom(v) {\r\n\r\n            this.targetBottom = this.get_float_pixels(v, document.body.clientHeight);\r\n\r\n            this.domElement.style.top = 'auto';\r\n            this.domElement.style.bottom = this.targetBottom;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        Right(v) {\r\n\r\n            this.targetRight = this.get_float_pixels(v, document.body.clientWidth);\r\n\r\n            this.domElement.style.left = 'auto';\r\n            this.domElement.style.right = this.targetRight;\r\n\r\n            return this;\r\n        }\r\n\r\n        FontSize(v) {\r\n            if (v.indexOf('px') == -1 && v.indexOf('em') == -1 && v.indexOf('%') == -1) {\r\n                //assume px:\r\n\r\n                v += 'px';\r\n\r\n            }\r\n\r\n            this.domElement.style.fontSize = v;\r\n\r\n            return this;\r\n        }\r\n\r\n        FontFamily(v) {\r\n\r\n            this.domElement.style.fontFamily = v;\r\n\r\n            return this;\r\n        }\r\n\r\n        Text(v) {\r\n            this.domElement.innerText = v;\r\n\r\n            return this;\r\n        }\r\n\r\n        Background(v) {\r\n            this.domElement.style.background = v;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        Duration(d) {\r\n\r\n            this.duration = d;\r\n\r\n            return this;\r\n        }\r\n\r\n        FadeTime(fadeInTime, fadeOutTime) {\r\n\r\n            this.fadeTime = {\r\n\r\n                in: fadeInTime || 250,\r\n\r\n                out: fadeOutTime || 250\r\n\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n        Color(c) {\r\n            this.domElement.style.color = c;\r\n\r\n            return this;\r\n        }\r\n\r\n        TextColor(c) {\r\n            this.domElement.style.color = c;\r\n\r\n            return this;\r\n        }\r\n\r\n        Border(b) {\r\n            this.domElement.style.border = b;\r\n\r\n        }\r\n\r\n        get_float_pixels(float, dimen) {\r\n            return Math.round(dimen * float) + 'px';\r\n        }\r\n\r\n        onComplete(fun) {\r\n\r\n            this.complete = fun;\r\n\r\n            return this;\r\n        }\r\n\r\n        show(text, duration) {\r\n            //create an html element\r\n\r\n            document.body.append(this.domElement);\r\n\r\n            var __inst = this;\r\n\r\n            if (this.show_interval) {\r\n                clearInterval(this.show_interval);\r\n            }\r\n\r\n            this.show_interval = setInterval(function () {\r\n\r\n\r\n                var o = parseFloat(__inst.domElement.style.opacity);\r\n\r\n                if (o < 1.0) {\r\n                    o += 1.0 * (20 / __inst.fadeTime.in);\r\n\r\n                    __inst.domElement.style.opacity = o;\r\n                }\r\n\r\n\r\n            }, 20);\r\n\r\n            setTimeout(function () {\r\n\r\n                clearInterval(__inst.show_interval);\r\n\r\n\r\n                __inst.hide_interval = setInterval(function () {\r\n\r\n                    var o = parseFloat(__inst.domElement.style.opacity);\r\n\r\n                    if (o > 0) {\r\n                        o -= 1.0 * (20 / __inst.fadeTime.out);\r\n\r\n                        __inst.domElement.style.opacity = o;\r\n                    }\r\n                    else {\r\n\r\n                        __inst.domElement.style.opacity = o;\r\n\r\n\r\n                        if (typeof(__inst.complete) == 'function') {\r\n                            __inst.complete();\r\n\r\n\r\n                        }\r\n\r\n                        clearInterval(__inst.hide_interval);\r\n\r\n                    }\r\n\r\n\r\n                }, 20);\r\n\r\n\r\n            }, __inst.duration);\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        update() {\r\n\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates an instance of TextDisplay.\r\n     *\r\n     * <info-bit>Gamestack.TextDisplay shows text on-screen;\r\n     * Composed of one or more HTML/Dom objects;\r\n     * Uses chainable function-calls.\r\n     * See the code examples below.</info-bit>\r\n     *\r\n     * <iframe style='width:400px; height:450px; overflow:hidden;' src='../client/examples/js-class/TextDisplay.html'> </iframe>\r\n     *\r\n     *\r\n     * @param   {TextDisplay= | Object=} textDisplayArg the textDisplay instance OR data to use when creating this instance of TextDisplay\r\n\r\n     *\r\n     *@returns {TextDisplay} an instance of Gamestack.TextDisplay\r\n     *\r\n     * */\r\n\r\n    class TextDisplay extends HtmlExtra {\r\n\r\n        constructor(textDisplayArg = {}) {\r\n\r\n            let args = textDisplayArg;\r\n\r\n            super(args);\r\n\r\n            if (!args) {\r\n                args = {};\r\n\r\n            }\r\n\r\n            this.duration = args.duration || 5000;\r\n\r\n            this.complete = args.complete || function () {\r\n            };\r\n\r\n            this.create_dom();\r\n        }\r\n\r\n        create_dom() {\r\n            this.domElement = document.createElement('SPAN');\r\n\r\n            this.domElement.style.position = \"fixed\";\r\n\r\n            this.domElement.style.color = this.color;\r\n\r\n            this.domElement.style.padding = \"5px\";\r\n\r\n            if (!this.targetBottom) {\r\n\r\n                this.domElement.style.top = Math.round(document.body.clientHeight * this.topFloat) + 'px';\r\n\r\n            }\r\n            else {\r\n\r\n                this.domElement.style.bottom = Math.round(document.body.clientHeight * this.bottomFloat) + 'px';\r\n\r\n            }\r\n\r\n            if (!this.targetRight) {\r\n\r\n                this.domElement.style.left = Math.round(document.body.clientWidth * this.leftFloat) + 'px';\r\n\r\n            } else {\r\n\r\n                this.domElement.style.right = Math.round(document.body.clientWidth * this.rightFloat) + 'px';\r\n            }\r\n\r\n            this.domElement.style.width = '90%';\r\n\r\n            this.domElement.style.left = \"5%\";\r\n\r\n            this.domElement.style.height = 'auto';\r\n\r\n            this.domElement.style.fontFamily = this.fontFamily;\r\n\r\n            this.domElement.style.fontSize = this.fontSize;\r\n\r\n            this.domElement.style.display = \"block\";\r\n\r\n            this.domElement.style.textAlign = \"center\";\r\n\r\n            this.domElement.style.zIndex = \"9999\";\r\n\r\n            this.domElement.innerText = this.text;\r\n\r\n            this.domElement.textContent = this.text;\r\n\r\n            this.domElement.style.backgroundColor = 'transparent'; //always transparent\r\n\r\n            this.domElement.style.opacity = this.fadeIn ? 0 : 1.0;\r\n\r\n            this.domElement.id = Gamestack.create_id();\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Gamestack.TextDisplay = TextDisplay;\r\n\r\n    /**\r\n     * Creates an instance of ImageStatDisplay:\r\n\r\n     * <info-bit>Gamestack.ImageStatDisplay displays item-counts or stats on the screen.\r\n     * Composed of one or more HTML/Dom objects;\r\n     * Uses chainable function-calls.\r\n     * See the code examples below.</info-bit>\r\n     *\r\n     * <iframe style='width:400px; height:450px; overflow:hidden;' src='../client/examples/js-class/ImageStatDisplay.html'> </iframe>\r\n     *\r\n     *\r\n     * @param   {ImageStatDisplay= | Object=} imageStatDisplayArgs the ImageStatDisplay instance OR data to use when creating this instance of ImageStatDisplay\r\n\r\n     *\r\n     *@returns {ImageStatDisplay} an instance of Gamestack.ImageStatDisplay\r\n     *\r\n     * */\r\n\r\n\r\n    class ImageStatDisplay extends HtmlExtra {\r\n\r\n        constructor(args = {}) {\r\n\r\n            super(args);\r\n\r\n            this.src = args.src || \"__NONE\";\r\n\r\n            this.size = args.size || new Gamestack.Vector(50, 50);\r\n\r\n            this.text_id = Gamestack.create_id();\r\n\r\n            this.id = Gamestack.create_id();\r\n\r\n            this.img_id = Gamestack.create_id();\r\n\r\n            this.create_dom();\r\n\r\n        }\r\n\r\n        Src(src) {\r\n            this.src = src;\r\n            this.img.setAttribute('src', src);\r\n\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        Source(src) //same as Src\r\n        {\r\n            this.src = src;\r\n            this.img.setAttribute('src', src);\r\n\r\n\r\n            return this;\r\n        }\r\n\r\n\r\n        Text(t) {\r\n\r\n            var el = this.span;\r\n\r\n            el.innerHTML = t;\r\n\r\n            el.textContent = t;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n        TextMarginTop(v) {\r\n            v = v + '';\r\n            if (v.indexOf('px') == -1 && v.indexOf('em') == -1 && v.indexOf('%') == -1) {\r\n                //assume px:\r\n\r\n                v += 'px';\r\n\r\n            }\r\n\r\n            var el = this.span;\r\n\r\n            el.style.marginTop = v;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n        Size(x, y) {\r\n            this.size = new Gamestack.Vector(x, y || x);\r\n\r\n\r\n            this.img.style.width = this.size.x + 'px';\r\n\r\n            this.img.style.height = 'auto';\r\n\r\n\r\n            return this;\r\n        }\r\n\r\n\r\n        FontSize(v) {\r\n            v = v + \"\";\r\n\r\n            if (v.indexOf('px') == -1 && v.indexOf('em') == -1 && v.indexOf('%') == -1) {\r\n                //assume px:\r\n\r\n                v += 'px';\r\n\r\n            }\r\n\r\n            this.pixelFontSize = v;\r\n\r\n            this.domElement.style.fontSize = v;\r\n\r\n            return this;\r\n        }\r\n\r\n        FontFamily(v) {\r\n\r\n            this.domElement.style.fontFamily = v;\r\n\r\n            return this;\r\n        }\r\n\r\n        setValue(value) {\r\n            document.getElementById(this.text_id);\r\n            return this;\r\n        }\r\n\r\n        get_float_pixels(float, dimen) {\r\n            return Math.round(dimen * float) + 'px';\r\n        }\r\n\r\n\r\n        get_id() {\r\n            return this.id;\r\n        }\r\n\r\n        update(v) {\r\n\r\n            var e = document.getElementById(this.text_id);\r\n\r\n            this.text = v + \"\";\r\n\r\n            e.innerText = this.text;\r\n\r\n            return this;\r\n        }\r\n\r\n        create_dom() {\r\n            //create an html element\r\n\r\n            this.domElement = document.createElement('DIV');\r\n\r\n            this.domElement.style.position = 'fixed';\r\n\r\n            this.domElement.setAttribute('class', 'gameStack-stats');\r\n\r\n            this.img = document.createElement('IMG');\r\n\r\n            this.img.id = this.img_id;\r\n\r\n            this.img.src = this.src;\r\n\r\n            this.img.style.width = this.size.x + 'px';\r\n\r\n            this.img.style.height = 'auto';\r\n\r\n            this.domElement.append(this.img);\r\n\r\n            this.span = document.createElement('SPAN');\r\n\r\n            this.span.id = this.text_id;\r\n\r\n            this.span.style.padding = '2px';\r\n\r\n            this.span.style.float = \"right\";\r\n\r\n            this.span.style.height = this.size.y + 'px';\r\n\r\n            this.span.style.display = 'table-cell';\r\n\r\n            this.span.style.verticalAlign = 'middle';\r\n\r\n            this.span.style.fontSize = 'inherit';\r\n\r\n            this.span.textContent = this.text;\r\n\r\n            this.domElement.append(this.span);\r\n\r\n            this.domElement.style.color = this.color;\r\n\r\n            //this.domElement.style.padding = \"10px\";\r\n\r\n            this.domElement.style.fontFamily = this.fontFamily;\r\n\r\n            this.domElement.style.fontSize = this.fontSize;\r\n\r\n            this.domElement.style.zIndex = \"9999\";\r\n\r\n            this.domElement.id = this.id;\r\n\r\n            return this;\r\n        }\r\n\r\n        show(x, y) {\r\n\r\n            this.domElement.style.left = x + \"px\";\r\n\r\n            this.domElement.style.top = y + \"px\";\r\n\r\n            document.body.append(this.domElement);\r\n\r\n            return this;\r\n        }\r\n    }\r\n\r\n    Gamestack.ImageStatDisplay = ImageStatDisplay;\r\n\r\n    class Bar extends HtmlExtra {\r\n        constructor(background, border) {\r\n\r\n            super({});\r\n\r\n            this.background = background;\r\n            var e = document.createElement(\"SPAN\");\r\n\r\n            e.style.position = 'fixed';\r\n\r\n            e.style.background = this.background;\r\n\r\n            e.style.zIndex = \"9999\";\r\n\r\n            e.style.backgroundSize = \"100% 100%\";\r\n\r\n            e.style.backgroundPosition = \"center bottom\";\r\n\r\n            if (border) {\r\n                e.style.border = border;\r\n\r\n            }\r\n\r\n\r\n            this.domElement = e;\r\n\r\n        }\r\n\r\n\r\n        width(w) {\r\n            this.domElement.style.width = w;\r\n\r\n            return this;\r\n        }\r\n\r\n        height(h) {\r\n            this.domElement.style.height = h;\r\n\r\n            return this;\r\n        }\r\n\r\n    }\r\n\r\n    Gamestack.Bar = Bar;\r\n\r\n    class BarFill extends HtmlExtra {\r\n        constructor(background) {\r\n\r\n            super({});\r\n\r\n            this.background = background;\r\n            var e = document.createElement(\"SPAN\");\r\n\r\n            e.style.background = this.background;\r\n\r\n            e.style.position = 'fixed';\r\n\r\n            e.style.zIndex = \"9995\";\r\n\r\n            this.domElement = e;\r\n\r\n        }\r\n\r\n        width(w) {\r\n            this.domElement.style.width = w;\r\n\r\n            return this;\r\n        }\r\n\r\n        height(h) {\r\n            this.domElement.style.height = h;\r\n\r\n            return this;\r\n        }\r\n\r\n    }\r\n\r\n    Gamestack.BarFill = BarFill;\r\n\r\n    /**\r\n     * Creates an instance of BarDisplay.\r\n     * <info-bit>Gamestack.BarDisplay is an instantiable a health-bar;\r\n     * Composed of one or more HTML/Dom objects;\r\n     * Uses chainable function-calls.\r\n     * See the code examples below.</info-bit>\r\n     *\r\n     * <iframe style='width:400px; height:450px; overflow:hidden;' src='../client/examples/js-class/BarDisplay.html'> </iframe>\r\n     *\r\n     *\r\n     * @param   {BarDisplay= | Object=} barDisplayArgs the BarDisplay instance OR data to use when creating this instance of BarDisplay\r\n\r\n     *\r\n     *@returns {BarDisplay} an instance of Gamestack.BarDisplay\r\n     *\r\n     * */\r\n\r\n\r\n    class BarDisplay extends HtmlExtra { //show BarDisplay as in 'health-bar'\r\n\r\n        constructor(barDisplayArgs = {}) {\r\n\r\n            var args = barDisplayArgs || {};\r\n\r\n            super(args);\r\n\r\n            this.border = args.border || \"none\";\r\n\r\n            this.inner = args.src || args.inner || 'darkorange';\r\n\r\n            this.outer = args.outer_src || args.outer || 'transparent';\r\n\r\n            this.width = args.width + '' || args.fill_width + '';\r\n\r\n            if (this.width.indexOf('px') == -1) {\r\n                this.width += 'px';\r\n            }\r\n\r\n            this.height = args.height + '' || args.fill_height + '';\r\n\r\n            if (this.height.indexOf('px') == -1) {\r\n                this.height += 'px';\r\n            }\r\n\r\n            this.color = args.color || args.fill_color;\r\n\r\n            Gamestack.defSize();\r\n\r\n            this.CreateDom();\r\n\r\n        }\r\n\r\n        Top(v) {\r\n\r\n            this.targetTop = this.get_float_pixels(v, document.body.clientHeight);\r\n\r\n            for (var x in [this.innerDom, this.outerDom]) {\r\n                [this.innerDom, this.outerDom][x].Top(v);\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        Left(v) {\r\n\r\n            this.targetLeft = this.get_float_pixels(v, document.body.clientWidth);\r\n\r\n            for (var x in [this.innerDom, this.outerDom]) {\r\n                [this.innerDom, this.outerDom][x].Left(v);\r\n\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n        Bottom(v) {\r\n\r\n\r\n            this.targetBottom = this.get_float_pixels(v, document.body.clientHeight);\r\n\r\n            for (var x in [this.innerDom, this.outerDom]) {\r\n                [this.innerDom, this.outerDom][x].Bottom(v);\r\n\r\n            }\r\n\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        Right(v) {\r\n\r\n            this.targetRight = this.get_float_pixels(v, document.body.clientWidth);\r\n\r\n            for (var x in [this.innerDom, this.outerDom]) {\r\n                [this.innerDom, this.outerDom][x].Right(v);\r\n\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n\r\n        CreateDom() {\r\n\r\n            this.innerDom = new BarFill(this.inner).width(this.width || \"80px\").height(this.height || \"10px\");\r\n\r\n            this.fill = this.innerDom;\r\n\r\n            this.outerDom = new Bar(this.outer, this.border).width(this.width || \"80px\").height(this.height || \"10px\");\r\n\r\n            this.bar = this.outerDom;\r\n\r\n        }\r\n\r\n        Inner(color_or_src) {\r\n            this.inner = color_or_src;\r\n\r\n            this.CreateDom();\r\n\r\n            return this;\r\n        }\r\n\r\n        Outer(color_or_src) {\r\n            this.outer = color_or_src;\r\n\r\n            this.CreateDom();\r\n\r\n            return this;\r\n        }\r\n\r\n        Border(css_border) {\r\n            this.border = css_border;\r\n\r\n            this.CreateDom();\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        show() {\r\n\r\n            document.body.append(this.innerDom.domElement);\r\n\r\n            document.body.append(this.outerDom.domElement);\r\n\r\n            return this;\r\n        }\r\n\r\n        Show() { //same as lc show()\r\n\r\n            document.body.append(this.innerDom.domElement);\r\n\r\n            document.body.append(this.outerDom.domElement);\r\n\r\n            return this;\r\n        }\r\n\r\n        Width(w)\r\n        {\r\n            this.portion_width(w);\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        Height(h)\r\n        {\r\n            this.portion_height(h);\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        get_float_pixels(float, dimen) {\r\n            return Math.round(dimen * float) + 'px';\r\n        }\r\n\r\n        portion_top(v) {\r\n\r\n            this.fill.domElement.style.top = this.get_float_pixels(v || this.topFloat, Gamestack.HEIGHT);\r\n\r\n            this.bar.domElement.style.top = this.get_float_pixels(v || this.topFloat, Gamestack.HEIGHT);\r\n\r\n        }\r\n\r\n        portion_left(v) {\r\n\r\n            this.fill.domElement.style.left = this.get_float_pixels(v || this.leftFloat, Gamestack.WIDTH);\r\n\r\n            this.bar.domElement.style.left = this.get_float_pixels(v || this.leftFloat, Gamestack.WIDTH);\r\n\r\n        }\r\n\r\n        portion_width(w) {\r\n\r\n            this.fill.domElement.style.width = this.get_float_pixels(w || this.widthFloat, Gamestack.WIDTH);\r\n\r\n            this.bar.domElement.style.width = this.get_float_pixels(w || this.widthFloat, Gamestack.WIDTH);\r\n\r\n\r\n        }\r\n\r\n        portion_height(h) {\r\n            this.fill.domElement.style.height = this.get_float_pixels(h || this.heightFloat, Gamestack.HEIGHT);\r\n\r\n            this.bar.domElement.style.height = this.get_float_pixels(h || this.heightFloat, Gamestack.HEIGHT);\r\n\r\n        }\r\n\r\n        update(f) {\r\n            this.fill.domElement.style.width = this.get_float_pixels(f || 0, parseFloat(this.bar.domElement.style.width));\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Gamestack.BarDisplay = BarDisplay;\r\n\r\n\r\n    /**\r\n     * Creates an instance of TextBubble.\r\n     *\r\n     * <info-bit>Gamestack.TextBubble is a text-bubble that shows on-screen, then fades.\r\n     * Composed of one or more HTML/Dom objects;\r\n     * Uses chainable function-calls.\r\n     * See the code examples below.</info-bit>\r\n     *\r\n     *\r\n     * @param   {Object} args the object of arguments\r\n     * @param   {number} args.opacity the 0-1 starting opacity of the text-bubble\r\n     * @param   {number} args.duration the duration in milliseconds that this text-bubble will stay visible / on-screen\r\n     *@returns {TextBubble} an instance of Gamestack.BarDisplay\r\n     * */\r\n\r\n    class TextBubble extends HtmlExtra {\r\n\r\n        constructor(args = {}) //merely an element of text\r\n        {\r\n            super(args);\r\n\r\n            this.opacity = args.opacity || 0.85;\r\n\r\n            this.create_dom();\r\n\r\n            this.duration = args.stay || args.duration || this.text.length * 100;\r\n\r\n        }\r\n\r\n        create_dom() {\r\n            this.domElement = document.createElement('SPAN');\r\n\r\n            this.domElement.setAttribute('class', 'speech-triangle')\r\n\r\n            this.domElement.style.textAlign = \"left\"; //reset to left\r\n\r\n            this.domElement.style.opacity = this.opacity;\r\n\r\n            this.domElement.style.position = \"fixed\";\r\n\r\n            this.domElement.style.color = this.color || 'white';\r\n\r\n            if (this.backgroundColor == 'transparent') {\r\n                this.backgroundColor = 'black';\r\n            }\r\n\r\n            this.domElement.style.backgroundColor = this.backgroundColor || 'black';\r\n\r\n            this.domElement.style.borderRadius = '0.4em';\r\n\r\n            this.domElement.style.border = this.border || '1px outset snow';\r\n\r\n            this.domElement.style.borderColor = this.borderColor || 'snow';\r\n\r\n            this.domElement.style.padding = \"5px\";\r\n\r\n            this.domElement.style.paddingBottom = \"2px\";\r\n\r\n            this.domElement.style.height = 'auto'; //auto-wrap to text\r\n\r\n            this.domElement.style.top = Math.round(document.body.clientHeight * this.topFloat) + 'px';\r\n\r\n            this.domElement.style.left = Math.round(document.body.clientWidth * this.leftFloat) + 'px';\r\n\r\n            this.domElement.style.width = 'auto';\r\n\r\n            this.domElement.style.height = 'auto';\r\n\r\n            this.domElement.style.fontFamily = this.fontFamily;\r\n\r\n            this.domElement.style.fontSize = this.fontSize;\r\n\r\n            this.domElement.style.display = \"block\";\r\n\r\n            this.domElement.style.textAlign = \"center\";\r\n\r\n            this.domElement.style.zIndex = \"9999\";\r\n\r\n            this.domElement.innerText = this.text;\r\n\r\n            this.domElement.textContent = this.text;\r\n\r\n            this.domElement.style.opacity = this.fadeIn ? 0 : this.opacity;\r\n\r\n            this.domElement.id = Gamestack.create_id();\r\n\r\n        }\r\n    }\r\n\r\n    Gamestack.TextBubble = TextBubble;\r\n\r\n})();\r\n;\r\nclass Level\r\n{\r\n    constructor(args={})\r\n    {\r\n        this.sprites = args.sprites || [];\r\n\r\n        this.backgrounds = args.backgrounds || [];\r\n\r\n        this.terrains = args.terrains || [];\r\n\r\n        this.interactives = args.interactives || [];\r\n\r\n        this.threes = args.threes || []; //3d objects\r\n\r\n    }\r\n\r\n    add()\r\n    {\r\n\r\n\r\n    }\r\n\r\n    add_all_to_game()\r\n    {\r\n\r\n\r\n\r\n    }\r\n}\r\n\r\n;\r\n(function(){\r\n    console.log('Line() class... creating');\r\n\r\n    var Curves = { //ALL HAVE INPUT AND OUTPUT OF: 0-1.0\r\n    // no easing, no acceleration\r\n    linearNone: function (t) { return t },\r\n\r\n    // accelerating from zero velocity\r\n    easeInQuadratic: function (t) { return t*t },\r\n    // decelerating to zero velocity\r\n    easeOutQuadratic: function (t) { return t*(2-t) },\r\n    // acceleration until halfway, then deceleration\r\n    easeInOutQuadratic: function (t) { return t<.5 ? 2*t*t : -1+(4-2*t)*t },\r\n    // accelerating from zero velocity\r\n    easeInCubic: function (t) { return t*t*t },\r\n    // decelerating to zero velocity\r\n    easeOutCubic: function (t) { return (--t)*t*t+1 },\r\n    // acceleration until halfway, then deceleration\r\n    easeInOutCubic: function (t) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 },\r\n    // accelerating from zero velocity\r\n    easeInQuartic: function (t) { return t*t*t*t },\r\n    // decelerating to zero velocity\r\n    easeOutQuartic: function (t) { return 1-(--t)*t*t*t },\r\n    // acceleration until halfway, then deceleration\r\n    easeInOutQuartic: function (t) { return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t },\r\n    // accelerating from zero velocity\r\n    easeInQuintic: function (t) { return t*t*t*t*t },\r\n    // decelerating to zero velocity\r\n    easeOutQuintic: function (t) { return 1+(--t)*t*t*t*t },\r\n    // acceleration until halfway, then deceleration\r\n    easeInOutQuintic: function (t) { return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t }\r\n}\r\n\r\nGamestack.Curves = Curves;\r\n\r\n\r\n\r\n\r\n\r\nvar inOutCurves = {\r\n\r\n    quadratic: function (t) { return t<.5 ? 2*t*t : -1+(4-2*t)*t },\r\n\r\n    cubic: function (t) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 },\r\n\r\n    quartic: function (t) { return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t },\r\n\r\n    quintic: function (t) { return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t },\r\n\r\n    linear: function (t) { return t; } //provided for consistency / in case 'linear' is needed\r\n\r\n    };\r\n\r\n\r\nGamestack.Curves.InOut = inOutCurves;\r\n\r\n\r\n    /**\r\n     *\r\n     * Creates an instance of Gamestack.Line\r\n     *\r\n     * --DevTODO --complete args & testing\r\n     *\r\n     * @param   {Object} args object of arguments\r\n     * @param   {string} args.curve passed in as string, the key to a curveMethod, options are ['cubic', 'quartic', 'quadratic', 'quintic']\r\n     * @param   {number} args.duration the millisecond duration of Line\r\n     * @param   {Gamestack.Vector} args.position the position vector\r\n     *\r\n     * @param   {number} args.pointDisp the numeric point-distance\r\n     *\r\n     * @param   {Gamestack.Vector} args.size the size vector\r\n     *\r\n     * @param   {number} args.rotation the numeric rotation of -360 - 360\r\n     *\r\n     * @param   {number} args.growth the numeric growth\r\n     *\r\n     * -While a min and max Vector(x,y) will describe the grid of Animation frames, the termPoint will indicate the last frame to show on the grid (Animations may stop early on the 'grid')\r\n     * @returns {Line} a Gamestack.Line object\r\n     */\r\n\r\nclass Line\r\n{\r\n    constructor(args={})\r\n    {\r\n        this.points = [];\r\n\r\n        this.pointDisp = 1;\r\n\r\n        this.size = args.size || new Gamestack.Vector(100, 100, 0);\r\n\r\n        this.position = new Gamestack.Vector(0, 0, 0);\r\n    }\r\n\r\n    Rot(r)\r\n    {\r\n\r\n        this.rotation = r;\r\n\r\n        return this;\r\n    }\r\n\r\n    Pos(p)\r\n    {\r\n\r\n        this.position = p;\r\n\r\n        if(typeof(p) == 'number')\r\n        {\r\n            this.position = new Gamestack.Vector(p, p, p);\r\n\r\n        }\r\n        else {\r\n\r\n            this.position = p;\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    Size(s)\r\n    {\r\n\r\n       this.size = s;\r\n\r\n        if(typeof(s) == 'number')\r\n        {\r\n            this.size = new Gamestack.Vector(s, s, s);\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    Dispersion(num)\r\n    {\r\n        this.pointDisp = num;\r\n        return this;\r\n    }\r\n\r\n    Curve(c, size)\r\n    {\r\n        this.curve = c;\r\n\r\n        this.curveMethod = Gamestack.Curves.InOut[this.curve.toLowerCase()];\r\n\r\n        if(c)\r\n        this.curve_size = new Gamestack.Vector(size)\r\n\r\n        return this;\r\n    }\r\n\r\n    CurveSize(s)\r\n    {\r\n\r\n        if(typeof(s) == 'number')\r\n        {\r\n            this.curve_size = new Gamestack.Vector(s, s, s);\r\n\r\n        }\r\n        else {\r\n\r\n            this.curve_size = s;\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    Duration(d)\r\n    {\r\n        this.duration = d;\r\n\r\n        return this;\r\n    }\r\n\r\n    Fill()\r\n    {\r\n\r\n        var current_point = new Gamestack.Vector(0, 0, 0);\r\n\r\n        for(var x = 0; x <= Math.abs(this.size.x); x++)\r\n        {\r\n\r\n            var position = new Gamestack.Vector(x, 0, 0);\r\n\r\n            if (current_point.trig_distance_xy(position) >= this.pointDisp)              {\r\n                this.points.push(new Gamestack.Vector(position));\r\n\r\n                current_point = new Gamestack.Vector(position);\r\n\r\n            }\r\n        }\r\n\r\n        this.TransposeByRotation(this.rotation);\r\n\r\n        return this;\r\n    }\r\n\r\n    TransposeByRotation(rotation)\r\n    {\r\n\r\n        this.rotation = rotation;\r\n\r\n        function rotate(cx, cy, x, y, angle) {\r\n            var radians = (Math.PI / 180) * angle,\r\n                cos = Math.cos(radians),\r\n                sin = Math.sin(radians),\r\n                nx = (cos * (x - cx)) + (sin * (y - cy)) + cx,\r\n                ny = (cos * (y - cy)) - (sin * (x - cx)) + cy;\r\n            return new Gamestack.Vector(nx, ny);\r\n        }\r\n\r\n        for(var x = 0; x < this.points.length; x++) {\r\n\r\n            var p = this.points[x];\r\n\r\n            var np = rotate(this.position.x, this.position.y, p.x, p.y, this.rotation);\r\n\r\n            this.points[x]= np;\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Highlight(sprite, ctx, gameWindow)\r\n    {\r\n\r\n        this.highlight_sprites = this.highlight_sprites || [];\r\n\r\n        ctx = ctx || Gamestack.ctx;\r\n\r\n        var points = this.points;\r\n\r\n        gameWindow = gameWindow || Gamestack.game_windows[0];\r\n\r\n        for(var x in points)\r\n        {\r\n\r\n            console.log(points[x]);\r\n\r\n            if(!this.highlight_sprites[x])\r\n            {\r\n                this.highlight_sprites[x] = gameWindow.add(new Gamestack.Sprite(sprite), ctx);\r\n            }\r\n\r\n            var point = points[x];\r\n\r\n            this.highlight_sprites[x].position = new Gamestack.Vector(point.sub(sprite.size.div(2)));\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    RemoveHighlight(sprite, ctx, gameWindow)\r\n    {\r\n        gameWindow = gameWindow || Gamestack.game_windows[0];\r\n\r\n        for(var x in this.highlight_sprites)\r\n        {\r\n            gameWindow.remove(this.highlight_sprites[x]);\r\n\r\n        }\r\n\r\n        this.highlight_sprites = [];\r\n\r\n        return this;\r\n\r\n    }\r\n}\r\n\r\nGamestack.Line = Line;\r\n\r\n\r\n\r\n\r\n    /**\r\n     *\r\n     * Creates an instance of Gamestack.WaveLine\r\n     * --A curving or wavy line, composed of iterations, which can reduce or grow in size-of-wave\r\n     * --DevTODO --complete args & testing\r\n     *\r\n     * @returns {WaveLine} a Gamestack.WaveLine object\r\n     */\r\n\r\n\r\nclass WaveLine extends Line\r\n{\r\n    constructor(pos, size, curve_key)\r\n    {\r\n        var args = {};\r\n\r\n        if(typeof(size) == 'number' || size instanceof Gamestack.Vector)\r\n        {\r\n            super({});\r\n        }\r\n        else if (size instanceof Object)\r\n        {\r\n            super(size);\r\n\r\n            args = size;\r\n        }\r\n\r\n\r\n        this.Pos(pos);\r\n\r\n        this.Size(size);\r\n\r\n        this.curve_options = Curves;//Curves Object (of functions)\r\n\r\n        curve_key = curve_key || args.curve_key || \"quadratic\"\r\n\r\n        this.curve = curve_key ? curve_key.toLowerCase() : \"quadratic\";\r\n\r\n        this.curve_options = ['cubic', 'quartic', 'quadratic', 'quintic', 'sine'];\r\n\r\n        this.curveMethod = Gamestack.Curves.InOut[this.curve.toLowerCase()];\r\n\r\n        this.points = args.points || [];\r\n\r\n        this.is_highlighted = args.is_highlighted || false;\r\n\r\n        this.offset = args.offset || new Gamestack.Vector(0, 0, 0);\r\n\r\n        this.pointDisp = args.pointDisp || 5;\r\n\r\n        this.rotation = args.rotation || 0;\r\n\r\n        this.iterations = args.iterations || 1;\r\n\r\n        this.max_size = args.max_size || this.size || new Gamestack.Vector(5000, 5000);\r\n\r\n        this.growth = args.growth || 1.0;\r\n\r\n    }\r\n\r\n    Max(p)\r\n    {\r\n\r\n        this.target = p;\r\n\r\n        if(typeof(p) == 'number')\r\n        {\r\n            this.target = new Gamestack.Vector(p, p, p);\r\n\r\n        }\r\n        else {\r\n\r\n            this.target = p;\r\n\r\n        }\r\n\r\n        this.max = this.target; //'max' is synonymous with 'target'\r\n\r\n        return this;\r\n    }\r\n\r\n    Min(p)\r\n    {\r\n\r\n        this.position = p;\r\n\r\n        if(typeof(p) == 'number')\r\n        {\r\n            this.position = new Gamestack.Vector(p, p, p);\r\n\r\n        }\r\n        else {\r\n\r\n            this.tposition = p;\r\n\r\n        }\r\n\r\n        this.min = this.position; //'max' is synonymous with 'target'\r\n\r\n        return this;\r\n    }\r\n\r\n    Decay(n)\r\n    {\r\n        if(n < -1.0)\r\n            n = -1.0;\r\n\r\n        if(n > 1.0)\r\n        {\r\n            n = 1.0;\r\n        }\r\n\r\n        this.growth = 1.0 - n;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    next(position)\r\n    {\r\n\r\n        var found = false;\r\n\r\n        for(var x = 0; x < this.points.length; x++)\r\n        {\r\n\r\n            if(position.equals(this.points[x]) &&  x < this.points.length - 1)\r\n            {\r\n                found = true;\r\n                return new Gamestack.Vector(this.points[x + 1]);\r\n\r\n            }\r\n\r\n            if(x==this.points.length - 1 && !found)\r\n            {\r\n\r\n                return new Gamestack.Vector(this.points[0]);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getGraphCanvas(curveCall, existing_canvas) {\r\n\r\n        var canvas = existing_canvas || document.createElement('canvas');\r\n\r\n        canvas.style.position = \"relative\";\r\n\r\n        canvas.id = 'curve-display';\r\n\r\n        canvas.setAttribute('class', 'motion-curve');\r\n\r\n        canvas.width = 180;\r\n        canvas.height = 100;\r\n\r\n        canvas.style.background = \"black\";\r\n\r\n        var context = canvas.getContext('2d');\r\n        context.fillStyle = \"rgb(0,0,0)\";\r\n        context.fillRect(0, 0, 180, 100);\r\n\r\n        context.lineWidth = 0.5;\r\n        context.strokeStyle = \"rgb(230,230,230)\";\r\n\r\n        context.beginPath();\r\n        context.moveTo(0, 20);\r\n        context.lineTo(180, 20);\r\n        context.moveTo(0, 80);\r\n        context.lineTo(180, 80);\r\n        context.closePath();\r\n        context.stroke();\r\n\r\n        context.lineWidth = 2;\r\n        context.strokeStyle = \"rgb(255,127,127)\";\r\n\r\n        var position = {x: 0, y: 80};\r\n        var position_old = {x: 0, y: 80};\r\n\r\n        this.test_graph_size = new Gamestack.Vector(185, 80 -20);\r\n\r\n        var points = this.get_line_segment(this.test_graph_size, 5, curveCall);\r\n\r\n        for(var x in points)\r\n        {\r\n            var position = new Gamestack.Vector(points[x].x, this.test_graph_size.y + 20 - points[x].y);\r\n\r\n            context.beginPath();\r\n            context.moveTo(position_old.x, position_old.y);\r\n            context.lineTo(position.x, position.y);\r\n            context.closePath();\r\n            context.stroke();\r\n\r\n            position_old.x = position.x;\r\n            position_old.y = position.y;\r\n        }\r\n\r\n        return canvas;\r\n    }\r\n\r\n    Fill()\r\n    {\r\n        this.size = new Gamestack.Vector(this.size);\r\n\r\n        var __inst = this;\r\n\r\n        this.points = [];\r\n\r\n        var current_point = new Gamestack.Vector(this.position), yTrack = 0;\r\n\r\n        var x = 1, max_recursion = 300;\r\n\r\n        var position = current_point;\r\n\r\n        var dist = new Gamestack.Vector(20, 20, 20);\r\n\r\n        var size = new Gamestack.Vector(this.curve_size || this.size);\r\n\r\n       while(Math.abs(position.x) <= Math.abs(this.max_size.x) && size.x > 2 && dist.x > 2) {\r\n\r\n             position = new Gamestack.Vector(current_point);\r\n\r\n               var target = new Gamestack.Vector(position.add(size)),\r\n\r\n                start = new Gamestack.Vector(position),\r\n\r\n                curveMethod = this.curveMethod,\r\n\r\n                ptrack = new Gamestack.Vector(start);\r\n\r\n            for (position.x = position.x; position.x < Math.abs(target.x); position.x += 1) {\r\n\r\n                dist = position.sub(start);\r\n\r\n                var pct = dist.x / size.x;\r\n\r\n                position.y = start.y +  curveMethod(pct) * (x % 2 == 0 ? size.y : size.y * -1);\r\n\r\n              //  position = position.round();\r\n\r\n                if (current_point.trig_distance_xy(position) >= this.pointDisp) {\r\n\r\n                    var p = new Gamestack.Vector(position);\r\n\r\n                        this.points.push(p);\r\n\r\n                    current_point = new Gamestack.Vector(position);\r\n\r\n                }\r\n            }\r\n\r\n            size = size.mult(this.growth);\r\n\r\n            if(x > max_recursion)\r\n            {\r\n                return console.error('Too much recursion in SwagLine');\r\n            }\r\n\r\n            x+= 1;\r\n\r\n        }\r\n\r\n        this.TransposeByRotation(this.rotation);\r\n\r\n        return this;\r\n    }\r\n\r\n    Rotate(rotation)\r\n    {\r\n        this.rotation = rotation;\r\n\r\n        if(typeof(this.rotation) == 'object')\r\n        {\r\n\r\n            this.rotation = this.rotation.x;\r\n\r\n        }\r\n\r\n      return this;\r\n    }\r\n\r\n}\r\n\r\nGamestack.WaveLine = WaveLine;\r\n\r\n    /**\r\n     * Creates an instance of Gamestack.ShapeLine\r\n     * --A shaped-line, in shape of a square, circle, or equilateral-polygon with specified number of sides\r\n     *\r\n     * --DevTODO --complete class & docs: args & testing\r\n     *\r\n     * @returns {ShapeLine} a Gamestack.ShapeLine object\r\n     */\r\n\r\nclass ShapeLine extends Line\r\n{\r\n\r\n    constructor(args={})\r\n    {\r\n        super(args);\r\n\r\n        this.targetTotalPoints = args.total || 200;\r\n\r\n    }\r\n\r\n    Total(t)\r\n    {\r\n\r\n        this.targetTotalPoints = t;\r\n        return this;\r\n    }\r\n\r\n    Eliptical(pos, size, rotation)\r\n    {\r\n        this.Pos(pos || this.position);\r\n\r\n        this.Size(size || this.size);\r\n\r\n        this.Rot(rotation || this.rotation);\r\n\r\n        function fill(elipse)\r\n        {\r\n\r\n        elipse.points = [];\r\n\r\n        var center = elipse.position.add(elipse.size.div(2));\r\n\r\n        var current_point = new Gamestack.Vector(0, 0, 0);\r\n\r\n        var a = Math.abs(elipse.size.x /2), b = Math.abs(elipse.size.y /2);\r\n\r\n        var perim = 2 * Math.PI * Math.sqrt(a * a + b * b);\r\n\r\n        var step = Math.round(((2 * Math.PI) / elipse.targetTotalPoints) * 1000) / 1000;\r\n\r\n        for (var i = 0 * Math.PI; i < 2 * Math.PI; i += step) {\r\n\r\n            var p = new Gamestack.Vector(Math.round(center.x - (a * Math.cos(i))), Math.round(center.y + (b * Math.sin(i))));\r\n\r\n            elipse.points.push(new Gamestack.Vector(p));\r\n\r\n            current_point = new Gamestack.Vector(p);\r\n\r\n        }\r\n        }\r\n\r\n        fill(this);\r\n\r\n        this.Fill = function(){\r\n\r\n            fill(this);\r\n\r\n            return this;\r\n\r\n        };\r\n\r\n        return this;\r\n    }\r\n\r\n    Quadrilateral(pos, size, rotation)\r\n    {\r\n        this.Pos(pos || this.position);\r\n\r\n        this.Size(size || this.size);\r\n\r\n        this.Rot(rotation || this.rotation);\r\n\r\n        function fill(quad)\r\n        {\r\n\r\n            quad.points = [];\r\n\r\n            var current_point = new Gamestack.Vector(0, 0, 0);\r\n\r\n            var perim = 2 * quad.size.x + 2 * quad.size.y,\r\n\r\n                stepX = quad.size.x / (quad.targetTotalPoints * (quad.size.x / perim)),\r\n\r\n                stepY =  quad.size.y / (quad.targetTotalPoints * (quad.size.y / perim));\r\n\r\n            for(var x = 0; x < quad.size.x; x+= stepX)\r\n            {\r\n                var p1 = new Gamestack.Vector(x, 0).add(quad.position);\r\n\r\n                    quad.points.push(new Gamestack.Vector(p1));\r\n            }\r\n\r\n            for(var y = 0; y < quad.size.y; y+= stepY)\r\n            {\r\n                var p1 = new Gamestack.Vector(quad.size.x, y).add(quad.position);\r\n\r\n                    quad.points.push(new Gamestack.Vector(p1));\r\n            }\r\n\r\n            for(var x = quad.size.x; x >= 0; x-= stepX)\r\n            {\r\n                var p1 = new Gamestack.Vector(x, quad.size.y).add(quad.position);\r\n\r\n                quad.points.push(new Gamestack.Vector(p1));\r\n            }\r\n\r\n            for(var y = quad.size.y; y >= 0; y-= stepY)\r\n            {\r\n                var p1 = new Gamestack.Vector(0, y).add(quad.position);\r\n\r\n                quad.points.push(new Gamestack.Vector(p1));\r\n            }\r\n\r\n\r\n        }\r\n\r\n        fill(this);\r\n\r\n        this.Fill = function(){\r\n\r\n            fill(this);\r\n\r\n            return this;\r\n\r\n        };\r\n\r\n        return this;\r\n    }\r\n};\r\n\r\nGamestack.ShapeLine = ShapeLine;\r\n\r\n})();;\r\n\r\n(function () {\r\n    console.log('Motion class... creating');\r\n\r\n    /*\r\n     * TweenMotion constructors:\r\n     *\r\n     * new TweenMotion({motion_curve, distance(Vector), rotation(Vector)})\r\n     *\r\n     *  new Motion(new JaggedLine())\r\n     *\r\n     * */\r\n\r\n    class Motion extends GSO //extends GSO || GamestackOverrideable\r\n    {\r\n        constructor(args={})\r\n        {\r\n            super(args);\r\n\r\n            this.state_save = false;\r\n\r\n            this.parent = args.parent || Gamestack.Modifiers.applyParentalArgs(this, args);\r\n\r\n            Gamestack.Modifiers.informable(this, args);\r\n\r\n            Gamestack.Modifiers.tweenable(this, args);\r\n\r\n        }\r\n\r\n        restoreState()\r\n        {\r\n            for(var x in this.state_save)\r\n            {\r\n                this.parent[x] = this.state_save[x];\r\n            }\r\n        }\r\n\r\n    };\r\n\r\n    Gamestack.Motion = Motion;\r\n\r\n    /**\r\n     * Creates an instance of TweenMotion object.\r\n     * <info>Gamestack.TweenMotion animates smooth changes in position, rotation, and/or size within a specified time <info>\r\n     * <iframe style='width:400px; height:450px; overflow:hidden;' src='../client/examples/js-class/TweenMotion.html'> </iframe>\r\n     *\r\n     * @param   {Object} Dev-TODO : define arguments for this class\r\n     *\r\n     * @returns {TweenMotion} a Gamestack.TweenMotion object\r\n     */\r\n\r\n    class TweenMotion extends Motion { //tween the state of an object, including 'position', 'size', and 'rotation' --rotation.x, etc..\r\n\r\n        constructor(args = {}) {\r\n\r\n            super(args);\r\n\r\n            this.getArg = $Q.getArg;\r\n\r\n            this.transition = args.trans || args.transition || \"literal\" || \"add\";\r\n            this.transition_options = ['literal', 'add'];\r\n\r\n            if(typeof(args.curve) == 'string')\r\n            {\r\n                args.curve_string = args.curve;\r\n            }\r\n\r\n            this.setTweenCurve(args.curve_string);\r\n\r\n            this.target = false;\r\n\r\n            this.target = args.target || {};\r\n\r\n            this.curvesList = this.curvesToArray(); //Tween.Easing\r\n\r\n            this.duration = Gamestack.getArg(args, 'duration', 500);\r\n\r\n            this.delay = Gamestack.getArg(args, 'delay', 0);\r\n        }\r\n\r\n        targetCheck(parent)\r\n        {\r\n\r\n            if(!this.target.position)\r\n            {\r\n                this.target.position = new Gamestack.Vector();\r\n            }\r\n\r\n            if(!this.target.size)\r\n            {\r\n                this.target.size = new Gamestack.Vector();\r\n            }\r\n\r\n            if(!this.target.rotation)\r\n            {\r\n                this.target.rotation = new Gamestack.Vector();\r\n            }\r\n\r\n        }\r\n\r\n        AddPos(x, y)\r\n        {\r\n            this.transition = 'add';\r\n\r\n            this.target.position = new Gamestack.Vector(x, y);\r\n\r\n            return this;\r\n        }\r\n\r\n        Duration(d)\r\n        {\r\n            this.duration = d;\r\n\r\n            return this;\r\n        }\r\n\r\n        engage() {\r\n\r\n            var __inst = this;\r\n\r\n            __inst.call_on_run(); //call any on-run extensions\r\n\r\n            this.tweens = [];\r\n\r\n            var object = this.parent;\r\n\r\n            this.targetCheck();\r\n\r\n            if(!this.state_save) {\r\n\r\n                this.state_save = {\r\n                    position: new Gamestack.Vector(this.parent.position),\r\n                    rotation: new Gamestack.Vector(this.parent.rotation),\r\n                    size: new Gamestack.Vector(this.parent.size)\r\n                };\r\n\r\n            }\r\n\r\n            if(this.parent && !this.target){\r\n\r\n                this.target = {\r\n\r\n                    position: new Gamestack.Vector(this.parent.position),\r\n\r\n                    rotation: new Gamestack.Vector(this.parent.rotation),\r\n\r\n                    size: new Gamestack.Vector(this.parent.size)\r\n\r\n                };\r\n\r\n            }\r\n            else if (!this.target) {\r\n\r\n                this.target = {\r\n\r\n                    position: new Gamestack.Vector(),\r\n\r\n                    rotation: new Gamestack.Vector(),\r\n\r\n                    size: new Gamestack.Vector()\r\n\r\n                };\r\n\r\n            };\r\n\r\n\r\n            if (this.transition !== 'literal') { //transition is assumed to be additive\r\n\r\n                this.target.position = object.position.add(this.target.position);\r\n                this.target.rotation = object.rotation.add(this.target.rotation);\r\n                this.target.size = object.size.add(this.target.size);\r\n\r\n            };\r\n\r\n            //we always have a targetPosition\r\n            //construct a tween::\r\n            this.tweens.push(new TWEEN.Tween(object.position)\r\n                .easing(__inst.curve || __inst.motion_curve)\r\n\r\n                .to(this.target.position, __inst.duration)\r\n                .onUpdate(function () {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n                })\r\n                .onComplete(function () {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n                    if (__inst.complete) {\r\n\r\n                        __inst.call_on_complete(); //only call once\r\n\r\n                    }\r\n\r\n\r\n                }));\r\n\r\n            this.tweens.push(new TWEEN.Tween(object.rotation)\r\n                .easing(__inst.curve || __inst.motion_curve)\r\n\r\n                .to(this.target.rotation, __inst.duration)\r\n                .onUpdate(function () {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n                })\r\n                .onComplete(function () {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n                    if (__inst.complete) {\r\n\r\n                        __inst.call_on_complete(); //only call once\r\n\r\n                    }\r\n\r\n\r\n                }));\r\n\r\n\r\n            this.tweens.push(new TWEEN.Tween(object.size)\r\n                .easing(__inst.curve || __inst.motion_curve)\r\n\r\n                .to(this.target.size, __inst.duration)\r\n                .onUpdate(function () {\r\n                    //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n                })\r\n                .onComplete(function () {\r\n                    //console.log(objects[0].position.x, objects[0].position.y);\r\n                    if (__inst.complete) {\r\n\r\n                        __inst.call_on_complete(); //only call once\r\n\r\n                    }\r\n\r\n\r\n                }));\r\n\r\n\r\n            for (var x = 0; x < this.tweens.length; x++) {\r\n\r\n                this.tweens[x].start();\r\n\r\n            };\r\n        }\r\n\r\n        /**\r\n         * start the Motion transition\r\n         *\r\n         * @function\r\n         * @memberof Motion\r\n         *\r\n         **********/\r\n\r\n        start() {\r\n\r\n            this.engage();\r\n\r\n        }\r\n\r\n        // obj.getGraphCanvas( $(c.domElement), value.replace('_', '.'), TWEEN.Easing[parts[0]][parts[1]] );\r\n\r\n        getGraphCanvas(t, f, c) {\r\n\r\n            var canvas = c || document.createElement('canvas');\r\n\r\n            canvas.style.position = \"relative\";\r\n\r\n            canvas.id = 'curve-display';\r\n\r\n            canvas.setAttribute('class', 'motion-curve');\r\n\r\n            canvas.width = 180;\r\n            canvas.height = 100;\r\n\r\n            canvas.style.background = \"black\";\r\n\r\n            var context = canvas.getContext('2d');\r\n            context.fillStyle = \"rgb(0,0,0)\";\r\n            context.fillRect(0, 0, 180, 100);\r\n\r\n            context.lineWidth = 0.5;\r\n            context.strokeStyle = \"rgb(230,230,230)\";\r\n\r\n            context.beginPath();\r\n            context.moveTo(0, 20);\r\n            context.lineTo(180, 20);\r\n            context.moveTo(0, 80);\r\n            context.lineTo(180, 80);\r\n            context.closePath();\r\n            context.stroke();\r\n\r\n            context.lineWidth = 2;\r\n            context.strokeStyle = \"rgb(255,127,127)\";\r\n\r\n            var position = {x: 5, y: 80};\r\n            var position_old = {x: 5, y: 80};\r\n\r\n            new TWEEN.Tween(position).to({x: 175}, 2000).easing(TWEEN.Easing.Linear.None).start();\r\n            new TWEEN.Tween(position).to({y: 20}, 2000).easing(f).onUpdate(function () {\r\n\r\n                context.beginPath();\r\n                context.moveTo(position_old.x, position_old.y);\r\n                context.lineTo(position.x, position.y);\r\n                context.closePath();\r\n                context.stroke();\r\n\r\n                position_old.x = position.x;\r\n                position_old.y = position.y;\r\n\r\n            }).start();\r\n\r\n            return canvas;\r\n        }\r\n\r\n        getTweenPoints(size, line) {\r\n\r\n            //must have line.minPointDist\r\n\r\n            var curve = line.curve,\r\n                duration = line.duration;\r\n\r\n            var points = [];\r\n\r\n            var position = new Vector(line.position);\r\n\r\n            var target = new Vector(position).add(size);\r\n\r\n            var start = new Vector(position);\r\n\r\n            var dist = new Vector(0, 0, 0);\r\n\r\n            var ptrack;\r\n\r\n\r\n            var easeInOutQuad = function (t) {\r\n                return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t\r\n            };\r\n\r\n\r\n            return points;\r\n\r\n            var t1 = new TWEEN.Tween(position).to({x: target.x}, 2000).easing(TWEEN.Easing.Linear.None).start();\r\n\r\n            if (t2) {\r\n                t2.stop();\r\n            }\r\n\r\n            var t2 = new TWEEN.Tween(position).to({y: target.y}, 2000).easing(curve).onUpdate(function () {\r\n\r\n\r\n                if (ptrack) {\r\n\r\n                    dist = ptrack.sub(p);\r\n\r\n                    var d = Math.sqrt(dist.x * dist.x + dist.y * dist.y);\r\n\r\n                    if (d >= line.minPointDist) {\r\n\r\n                        points.push(p);\r\n\r\n                        ptrack = new Vector(p);\r\n                    }\r\n\r\n                }\r\n\r\n                else {\r\n                    ptrack = p;\r\n\r\n                    points.push(p);\r\n                }\r\n                ;\r\n\r\n            }).onComplete(function () {\r\n\r\n                // alert(line.minPointDist);\r\n\r\n                line.first_segment = points.slice();\r\n\r\n                var extendLinePoints = function (segment, points, ix) {\r\n\r\n                    var next_points = segment.slice();\r\n\r\n                    var last_point = points[points.length - 1];\r\n\r\n                    for (var x = 0; x < next_points.length; x++) {\r\n\r\n                        var sr = new Vector(Gamestack.GeoMath.rotatePointsXY(line.size.x * ix, line.size.y * ix, line.rotation));\r\n\r\n                        var p = next_points[x].add(sr);\r\n\r\n                        if (points.indexOf(p) <= -1) {\r\n\r\n                            points.push(p);\r\n\r\n\r\n                        }\r\n\r\n                    }\r\n                };\r\n\r\n                for (var x = 0; x <= line.curve_iterations; x++) {\r\n                    if (x > 1) {\r\n\r\n                        extendLinePoints(line.first_segment, line.points, x - 1);\r\n\r\n                    }\r\n\r\n                }\r\n\r\n\r\n            }).start();\r\n\r\n            return points;\r\n        }\r\n    }\r\n\r\n    Gamestack.TweenMotion = TweenMotion;\r\n\r\n    /**\r\n     * Creates an instance of LineMotion.\r\n     *\r\n     * <info>Gamestack.LineMotion animates smooth motion over the points of Gamestack.Line</info>\r\n     *\r\n     * <br/>\r\n     *\r\n     * <iframe style='width:400px; height:450px; overflow:hidden;' src='../client/examples/js-class/LineMotion.html'> </iframe>\r\n\r\n     *\r\n     * @param   {Object} Dev-TODO : define arguments for this class\r\n     *\r\n     * @returns {LineMotion} a Gamestack.LineMotion object\r\n     */\r\n\r\n\r\n    class LineMotion extends Motion\r\n    {\r\n        constructor(args={})\r\n        {\r\n            super(args);\r\n\r\n            Gamestack.Modifiers.spatial(this);\r\n\r\n            this.total = args.total || 20;\r\n\r\n            this.Size(args.size || new Gamestack.Vector(200, 200));\r\n\r\n            this.Pos(args.size || new Gamestack.Vector(200, 200));\r\n\r\n            this.Rot(args.size || new Gamestack.Vector(200, 200));\r\n\r\n        }\r\n\r\n        Total(t)\r\n        {\r\n            this.total = t;\r\n            return this;\r\n        }\r\n\r\n        Highlight(spr, ctx, gameWindow)\r\n        {\r\n            this.line.Highlight(spr, ctx, gameWindow);\r\n\r\n            return this;\r\n        }\r\n        Eliptical(pos, size)\r\n        {\r\n            size = size || this.size;\r\n\r\n            pos = pos || this.position;\r\n\r\n            this.line = new Gamestack.ShapeLine().Total(this.total || 20).Eliptical(pos, size, 0).Fill();\r\n\r\n            return this;\r\n        }\r\n\r\n\r\n        Box(pos, size)\r\n        {\r\n            size = size || this.size;\r\n\r\n            pos = pos || this.position;\r\n\r\n            this.line = new Gamestack.ShapeLine().Total(this.total || 20).Quadrilateral(pos, size, 0).Fill();\r\n\r\n            return this;\r\n        }\r\n        QuadraticWave(pos, size)\r\n        {\r\n            size = size || this.size;\r\n\r\n            pos = pos || this.position;\r\n\r\n            this.line = new Gamestack.WaveLine(pos, size, 'quadratic').Fill();\r\n\r\n            return this;\r\n\r\n        }\r\n        CubicWave(pos, size)\r\n        {\r\n            size = size || this.size;\r\n\r\n            pos = pos || this.position;\r\n\r\n            this.line = new Gamestack.WaveLine(pos, size, 'cubic').Fill();\r\n\r\n            return this;\r\n        }\r\n        QuinticWave(pos, size)\r\n        {\r\n            size = size || this.size;\r\n\r\n            pos = pos || this.position;\r\n\r\n            this.line = new Gamestack.WaveLine(pos, size, 'quintic').Fill();\r\n\r\n            return this;\r\n        }\r\n    }\r\n\r\n    Gamestack.LineMotion = LineMotion;\r\n})\r\n();\r\n\r\n\r\n;/**\r\n * Takes an object of arguments and returns Projectile() object. Projectile fires a shot from the parent sprite, with specified offset, rotation, motion_curve, line_curve\r\n\r\n * @param   {Object} args object of arguments\r\n * @param   {string} args.name optional\r\n * @param   {string} args.description optional\r\n * @param   {string} args.distance the distance before dissappearance\r\n * @param   {TWEEN.Easing.'objectGroup'.'objectMember'} args.motion_curve the TWEEN.Easing function to be applied for motion/speed (Example: TWEEN.Easing.Quadratic.InOut)\r\n *\r\n *  * @param   {TWEEN.Easing.'objectGroup'.'objectMember'} args.line_curve the TWEEN.Easing function to be applied for line (Example: TWEEN.Easing.Quadratic.InOut)\r\n *\r\n * @returns {Projectile} a Projectile object\r\n */\r\n\r\nclass Projectile {\r\n\r\n    constructor(args = {}) {\r\n\r\n        this.getArg = $Q.getArg;\r\n\r\n        for (var x in args) {\r\n            this[x] = args[x];\r\n\r\n        }\r\n\r\n        this.name = args.name || \"__\";\r\n\r\n        this.description = args.description || \"__\";\r\n\r\n        this.animation = Gamestack.getArg(args, 'animation', new Animation());\r\n\r\n        this.parent_id = args.parent_id || args.object_id || \"__blank\"; //The parent object\r\n\r\n        this.name = Gamestack.getArg(args, 'name', \"__\");\r\n\r\n        this.size = false;\r\n\r\n        if(args.size)\r\n        {\r\n            this.size = new Vector(args.size);\r\n        }\r\n        else if(this.animation && this.animation.frameSize)\r\n        {\r\n           this.size =  new Vector(this.animation.frameSize);\r\n\r\n        }\r\n        else\r\n        {\r\n            console.info('Projectile():using default size.');\r\n            this.size = new Vector(20, 20, 20);\r\n        }\r\n\r\n        this.origin = args.origin || new Vector(0, 0, 0);\r\n\r\n        this.rotation = args.rotation || 0;\r\n\r\n        this.line.Rotation(this.rotation);\r\n\r\n        this.description = Gamestack.getArg(args, 'description', false);\r\n\r\n        this.duration = Gamestack.getArg(args, 'duration', 500);\r\n\r\n        this.delay = Gamestack.getArg(args, 'delay', 0);\r\n\r\n        this.position = Gamestack.getArg(args, 'position', new Vector(0, 0, 0));\r\n\r\n        this.motion_curve = Gamestack.getArg(args, 'motion_curve', TWEEN.Easing.Linear.None);\r\n\r\n        this.highlighted = false;\r\n\r\n        this.sprites = [];\r\n\r\n        this.run_ext = args.run_ext || [];\r\n\r\n    }\r\n\r\n    /**\r\n     * specify a function to be called when Motion is complete\r\n     *\r\n     * @function\r\n     * @memberof Projectile\r\n     * @param {Function} fun the function to be called when complete\r\n     *\r\n     **********/\r\n\r\n    onComplete(fun) {\r\n        this.complete = fun;\r\n\r\n    }\r\n\r\n    onCollide(fun) {\r\n        this.collide = fun;\r\n\r\n    }\r\n\r\n    setAnimation(anime) {\r\n\r\n        this.animation = anime;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    setMotionCurve(c) {\r\n\r\n        this.motion_curve = c;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    kill_one() {\r\n\r\n        var spr = this.sprites[this.sprites.length - 1];\r\n\r\n        Gamestack.remove(spr);\r\n\r\n    }\r\n\r\n    onRun(caller, callkey) {\r\n\r\n        this.run_ext = this.run_ext || [];\r\n\r\n        this.run_ext.push({caller: caller, callkey: callkey});\r\n\r\n    }\r\n\r\n    shoot_basic(position, size, rot_offset, speed, numberShots, disp){\r\n\r\n        var __playerInst = this;\r\n\r\n        var bx = position.x, by = position.y, bw = size.x, bh = size.y;\r\n\r\n        var half = numberShots / 2;\r\n\r\n        for(var x = half * -1; x <= half; x++) {\r\n            var shot = Gamestack.add(new Sprite({\r\n\r\n                active: true,\r\n\r\n                position: position,\r\n\r\n                size: size,\r\n\r\n                speed: speed,\r\n\r\n                image: animation.image,\r\n\r\n                rotation: new Vector3(0, 0, 0),\r\n\r\n                flipX: false\r\n\r\n            }));\r\n\r\n            shot.setAnimation(animation);\r\n\r\n            rot_offset = new Vector(rot_offset + (x * disp), 0, 0);\r\n\r\n            shot.position.x = bx, shot.position.y = by;\r\n            shot.rotation.x = 0 + rot_offset.x;\r\n\r\n            shot.stats = {\r\n\r\n                damage: 1\r\n\r\n            };\r\n\r\n            if (!options.line) {\r\n\r\n                shot.onUpdate(function () {\r\n\r\n                    shot.position.x += Math.cos((shot.rotation.x) * 3.14 / 180) * speed;\r\n\r\n                    shot.position.y += Math.sin((shot.rotation.x) * 3.14 / 180) * speed;\r\n\r\n                });\r\n\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    fire(origin, rotation) {\r\n\r\n        for (var x = 0; x < this.run_ext.length; x++) {\r\n\r\n            this.run_ext[x].caller[this.run_ext[x].callkey]();\r\n\r\n        }\r\n\r\n\r\n        this.line.origin = origin;\r\n\r\n        this.line.rotation = rotation;\r\n\r\n        console.log('FIRING FROM:' + jstr(origin));\r\n\r\n        var sprite = new Sprite({image: this.animation.image});\r\n\r\n        sprite.setAnimation(this.animation);\r\n\r\n        sprite.setSize(this.size);\r\n\r\n        sprite.position = new Vector(0, 0, 0);\r\n\r\n        var __inst = this;\r\n\r\n        __inst.line.fill();\r\n\r\n        var lp = this.line.points;\r\n\r\n        sprite.position = new Vector(lp[0]);\r\n\r\n        sprite.onUpdate(function (sprite) {\r\n\r\n            for (var x = 0; x < lp.length; x++) {\r\n\r\n                if (sprite.position.equals(lp[x]) && x < lp.length - 1) {\r\n\r\n                    sprite.position = new Vector(lp[x + 1]);\r\n\r\n                    break;\r\n                }\r\n\r\n                if (x == lp.length - 1) {\r\n                    Gamestack.remove(sprite);\r\n\r\n                }\r\n\r\n            }\r\n\r\n        });\r\n\r\n        Gamestack.add(sprite);\r\n\r\n        this.sprites.push(sprite);\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nGamestack.Projectile = Projectile;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n;\r\n\r\n\r\n\r\n\r\nvar Shapes = {\r\n\r\n    circle:function(radius, freq) {\r\n\r\n        return {\r\n\r\n            radius:radius,\r\n\r\n            points:[],\r\n\r\n            fill:function(center, freq)\r\n            {\r\n\r\n\r\n\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    square:function(s, freq)\r\n    {\r\n        console.error('STILL NEED TO BUILD THIS SQUARE IN GS-API');\r\n\r\n        return{\r\n\r\n            size:new Gamestack.Vector(s, s),\r\n\r\n            width:w,\r\n\r\n            height:h,\r\n\r\n            freq:freq,\r\n\r\n            points:[],\r\n\r\n            fill:function(start, freq)\r\n            {\r\n\r\n\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    rect:function(w, h, freq)\r\n    {\r\n        console.error('STILL NEED TO BUILD THIS TRIANGLE');\r\n\r\n        return{\r\n\r\n            size:new Gamestack.Vector(w, h),\r\n\r\n            width:w,\r\n\r\n            height:h,\r\n\r\n            freq:freq,\r\n\r\n            points:[],\r\n\r\n            fill:function(start, freq)\r\n            {\r\n\r\n\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    triangle:function(base, h, freq)\r\n    {\r\n\r\n        console.error('STILL NEED TO BUILD THIS TRIANGLE');\r\n\r\n        return{\r\n\r\n            base:base,\r\n\r\n            height:height,\r\n\r\n            freq:freq,\r\n\r\n            points:[],\r\n\r\n            fill:function(start, freq)\r\n            {\r\n\r\n\r\n            }\r\n        }\r\n\r\n    }\r\n};\r\n\r\n\r\nGamestack.Shapes = Shapes;\r\n;\r\n\r\n\r\n/**\r\n * Creates an instance of Shot.\r\n * <info-bit>Shot object fires a moving-animation from a sprite </info-bit>\r\n *\r\n * @param   {string} name the name of this Shot\r\n * @param   {GameImage | Animation} imageOrAnimation the GameImage or Animation to apply for this Shot\r\n * @returns {Shot} a Gamestack.Shot object\r\n */\r\n\r\nclass Shot\r\n{\r\n    constructor(name, imageOrAnimation)\r\n    {\r\n        this.name = name || 'No-Name';\r\n\r\n        if(imageOrAnimation instanceof Gamestack.GameImage)\r\n        {\r\n            this.anime = new Animation(imageOrAnimation);\r\n        }\r\n        else if(imageOrAnimation instanceof Gamestack.Animation)\r\n        {\r\n            this.anime = imageOrAnimation;\r\n\r\n        }\r\n\r\n        this.rotation = 0;\r\n\r\n        this.rot_disp = 0;\r\n\r\n\r\n        var args = name instanceof Object ? name : {};\r\n\r\n        //is name / first arg an entire instance of shot?\r\n\r\n        this.init(args);\r\n\r\n    }\r\n\r\n    init(args)\r\n    {\r\n        if(args instanceof Object) {\r\n\r\n            for (var x in args) {\r\n\r\n                this[x] = args[x];\r\n\r\n                if(args[x] instanceof Object && args[x].hasOwnProperty('x'))//process as Vector\r\n                {\r\n                    this[x] = new Vector(args[x]);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        Gamestack.Modifiers.informable(this);\r\n    }\r\n\r\n    Image(image)\r\n    {\r\n\r\n        this.anime = new Animation(image);\r\n\r\n    }\r\n\r\n    Animation(anime)\r\n    {\r\n        this.anime = anime;\r\n        return this;\r\n    }\r\n\r\n    Total(total, rot_disp_per_unit)\r\n    {\r\n\r\n        this.total =total;\r\n\r\n        this.rot_disp = rot_disp_per_unit;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    WaveGrowth(growth)\r\n    {\r\n        if(growth > 0)\r\n            this.curve_growth = growth;\r\n    }\r\n\r\n    CurveMode(key, size, growth)\r\n    {\r\n        this.curve = Gamestack.Curves.InOut[key.toLowerCase()];\r\n\r\n        this.curve_key = key.toLowerCase();\r\n\r\n        this.curve_size = size;\r\n\r\n        if(growth > 0)\r\n        this.curve_growth = growth;\r\n\r\n        if(typeof(this.curve_size)=='number')\r\n            this.curve_size = new Gamestack.Vector(this.curve_size, this.curve_size);\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    RotDisp( rot_disp)\r\n    {\r\n        this.rot_disp = rot_disp;\r\n\r\n        return this;\r\n    }\r\n\r\n    Velocity(v)\r\n    {\r\n        this.velocity = v;\r\n\r\n        return this;\r\n    }\r\n\r\n    Position(p)\r\n    {\r\n        if(typeof(p) == 'number')\r\n        {\r\n            this.position = new Gamestack.Vector(p, p, p);\r\n\r\n        }\r\n        else {\r\n\r\n            this.position = p;\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Size(s)\r\n    {\r\n        if(typeof(s) == 'number')\r\n        {\r\n            this.size = new Gamestack.Vector(s, s, s);\r\n\r\n        }\r\n        else {\r\n\r\n            this.size = s;\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Rotation(r)\r\n    {\r\n        this.rotation = r;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    onCollide(collideables, callback)\r\n    {\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nGamestack.Shot = Shot;;\r\n\r\n/**\r\n * Creates an instance of Rectangle.\r\n * @param   {Gamestack.Vector} min the minimum vector point (x,y)\r\n * @param   {Gamestack.Vector} max the maximum vector point (x,y)\r\n *\r\n * @returns {Rectangle} a Rectangle object\r\n */\r\n\r\nclass Rectangle {\r\n\r\n    constructor(min, max) {\r\n\r\n        this.min = new Gamestack.Vector(min);\r\n        this.max = new Gamestack.Vector(max);\r\n\r\n    }\r\n    toLine()\r\n    {\r\n\r\n\r\n    }\r\n}\r\n;\r\n\r\n\r\n\r\nlet VectorBounds = Rectangle;\r\n\r\nGamestack.VectorBounds =VectorBounds;\r\n\r\nGamestack.Rectangle = Rectangle;\r\n\r\n/**\r\n * Takes the min and max vectors plus termPoint ('termination-point'), returns VectorFrameBounds\r\n *  *use this to define the bounds of an Animation object.\r\n * @param   {Vector} min the minimum vector point (x,y)\r\n * @param   {Vector} max the maximum vector point (x,y)\r\n * @param   {Vector=} termPoint the optional termination vector point (x,y) : defaults to the value of 'max'\r\n * -While a min and max Gamestack.Vector(x,y) will describe the grid-size of Animation frames,\r\n * the termPoint will indicate the last frame on-grid for this set of frames --Animation may stop early on the 'grid')\r\n * @returns {VectorFrameBounds} a VectorFrameBounds object\r\n */\r\n\r\nclass VectorFrameBounds extends Rectangle {\r\n\r\n    constructor(min, max, termPoint) {\r\n\r\n        super(min, max);\r\n\r\n        this.termPoint = termPoint || new Gamestack.Vector(this.max.x, this.max.y, this.max.z);\r\n\r\n    }\r\n\r\n\r\n}\r\n;\r\n\r\nGamestack.VectorFrameBounds = VectorFrameBounds;\r\n\r\n\r\n\r\n/**\r\n * Takes several args and returns Line object. Intended for curved-line / trajectory of Projectile Object.\r\n * @param   {Object} args object of arguments\r\n * @param   {Easing} args.curve the curve applied to line see TWEEN.Easing , limited options for immediate line-drawing\r\n * @param   {number} args.duration the millisecond duration of Line\r\n * @param   {Gamestack.Vector} args.position the position vector\r\n *\r\n * @param   {number} args.pointDist the numeric point-distance\r\n *\r\n * @param   {Gamestack.Vector} args.size the size vector\r\n *\r\n * @param   {number} args.rotation the numeric rotation of -360 - 360\r\n *\r\n * @param   {number} args.growth the numeric growth\r\n *\r\n * -While a min and max Vector(x,y) will describe the grid of Animation frames, the termPoint will indicate the last frame to show on the grid (Animations may stop early on the 'grid')\r\n * @returns {VectorFrameBounds} a VectorFrameBounds object\r\n */\r\n\r\nclass Line\r\n{\r\n    constructor(args = {})\r\n    {\r\n\r\n\r\n        this.curve_options = Curves;//Curves Object (of functions)\r\n        this.curve_string = args.curve_string || \"linearNone\";\r\n\r\n        this.curve = this.get_curve_from_string(this.curve_string);\r\n\r\n        this.motion_curve = args.motion_curve || TWEEN.Easing.Linear.None;\r\n\r\n        if(typeof(args.curve) == 'function')\r\n        {\r\n            this.curve = args.curve;\r\n        }\r\n\r\n        this.points = args.points || [];\r\n\r\n        this.position = args.position ||  new Gamestack.Vector();\r\n\r\n        this.is_highlighted = args.is_highlighted || false;\r\n\r\n        this.offset = args.offset || new Gamestack.Vector();\r\n\r\n        this.pointDist = 5;\r\n\r\n        this.size = args.size || new Gamestack.Vector();\r\n\r\n        this.rotation = args.rotation || 0;\r\n\r\n        this.origin = args.origin || new Gamestack.Vector(0, 0);\r\n\r\n        this.iterations = 1;\r\n\r\n        this.growth = args.growth || 1.2;\r\n\r\n    }\r\n\r\n    Iterations(n)\r\n    {\r\n\r\n       this.iterations = n;\r\n       return this;\r\n    }\r\n\r\n    Growth(n)\r\n    {\r\n        this.growth = n;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Origin(o)\r\n    {\r\n        this.position = o;\r\n       this.origin = o;\r\n\r\n       return this;\r\n\r\n    }\r\n\r\n    Pos(p)\r\n    {\r\n        this.origin = p;\r\n        this.position = p;\r\n        return this;\r\n    }\r\n\r\n    PointDisp(num)\r\n    {\r\n        this.minPointDist = num;\r\n        return this;\r\n    }\r\n\r\n    Curve(c)\r\n    {\r\n        this.curve = c;\r\n        this.curve_string = this.get_curve_string(c);\r\n        return this;\r\n    }\r\n\r\n    Duration(d)\r\n    {\r\n        this.duration = d;\r\n\r\n        return this;\r\n    }\r\n    Rotation(r)\r\n    {\r\n        this.rotation = r;\r\n        return this;\r\n    }\r\n    next(position)\r\n    {\r\n\r\n        var found = false;\r\n\r\n        for(var x = 0; x < this.points.length; x++)\r\n        {\r\n\r\n            if(position.equals(this.points[x]) &&  x < this.points.length - 1)\r\n            {\r\n                found = true;\r\n                return new Gamestack.Vector(this.points[x + 1]);\r\n\r\n            }\r\n\r\n            if(x==this.points.length - 1 && !found)\r\n            {\r\n\r\n                return new Gamestack.Vector(this.points[0]);\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    get_curve_from_string(str)\r\n    {\r\n\r\n        console.log('Applying Line():curve:' + str);\r\n\r\n        for(var x in this.curve_options) {\r\n\r\n            if(x.toLowerCase() == str.toLowerCase())\r\n            {\r\n                return this.curve_options[x];\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    get_curve_string(c)\r\n    {\r\n        for(var x in this.curve_options) {\r\n\r\n            if(this.curve_options[x] == c)\r\n            {\r\n                return x;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    getGraphCanvas(curveCall, existing_canvas) {\r\n\r\n        var canvas = existing_canvas || document.createElement('canvas');\r\n\r\n        canvas.style.position = \"relative\";\r\n\r\n        canvas.id = 'curve-display';\r\n\r\n        canvas.setAttribute('class', 'motion-curve');\r\n\r\n        canvas.width = 180;\r\n        canvas.height = 100;\r\n\r\n        canvas.style.background = \"black\";\r\n\r\n        var context = canvas.getContext('2d');\r\n        context.fillStyle = \"rgb(0,0,0)\";\r\n        context.fillRect(0, 0, 180, 100);\r\n\r\n        context.lineWidth = 0.5;\r\n        context.strokeStyle = \"rgb(230,230,230)\";\r\n\r\n        context.beginPath();\r\n        context.moveTo(0, 20);\r\n        context.lineTo(180, 20);\r\n        context.moveTo(0, 80);\r\n        context.lineTo(180, 80);\r\n        context.closePath();\r\n        context.stroke();\r\n\r\n        context.lineWidth = 2;\r\n        context.strokeStyle = \"rgb(255,127,127)\";\r\n\r\n        var position = {x: 0, y: 80};\r\n        var position_old = {x: 0, y: 80};\r\n\r\n        this.test_graph_size = new Gamestack.Vector(185, 80 -20);\r\n\r\n       var points = this.get_line_segment(this.test_graph_size, 5, curveCall);\r\n\r\n        for(var x in points)\r\n        {\r\n            var position = new Gamestack.Vector(points[x].x, this.test_graph_size.y + 20 - points[x].y);\r\n\r\n            context.beginPath();\r\n            context.moveTo(position_old.x, position_old.y);\r\n            context.lineTo(position.x, position.y);\r\n            context.closePath();\r\n            context.stroke();\r\n\r\n            position_old.x = position.x;\r\n            position_old.y = position.y;\r\n        }\r\n\r\n        return canvas;\r\n    }\r\n\r\n    transpose(origin, rotation)\r\n    {\r\n\r\n        this.rotation = rotation;\r\n\r\n        this.origin = origin;\r\n\r\n        var t_points = [];\r\n\r\n        for(var x = 0; x < this.points.length; x++) {\r\n\r\n            var p = this.points[x];\r\n\r\n            var np = new Gamestack.Vector(Gamestack.GeoMath.rotatePointsXY(p.x, p.y, this.rotation));\r\n\r\n            t_points.push(np.add(origin));\r\n\r\n            console.log(np);\r\n\r\n        }\r\n\r\n\r\n\r\n\r\n        return t_points;\r\n\r\n    }\r\n\r\n    add_segment(next_segment, offset)\r\n    {\r\n        for(var x = 0; x < next_segment.length; x++) {\r\n\r\n            next_segment[x] = new Gamestack.Vector(next_segment[x]).add(offset);\r\n\r\n            this.points.push(next_segment[x]);\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n    get_flipped_segment(points)\r\n    {\r\n\r\n        var t_points = points.slice(), t_len = t_points.length;\r\n\r\n        for(var x = 0; x < points.length; x++) {\r\n\r\n            t_points[t_len - x].x = points[x].x\r\n\r\n        }\r\n\r\n        return t_points;\r\n\r\n    }\r\n\r\n    Highlight(origin, ctx)\r\n    {\r\n\r\n        ctx = ctx || Gamestack.ctx;\r\n\r\n        var points = this.transpose(origin);\r\n\r\n        for(var x in points)\r\n        {\r\n\r\n            var point = points[x];\r\n\r\n            var dist = point.sub(Gamestack.point_highlighter.position);\r\n\r\n            var d = Math.sqrt( dist.x * dist.x + dist.y * dist.y );\r\n\r\n\r\n            if(d >= 10)\r\n            {\r\n                Gamestack.point_highlighter.position = new Gamestack.Vector(points[x]);\r\n            }\r\n\r\n\r\n               Canvas.draw(Gamestack.point_highlighter, ctx);\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\nvar GeoMath = {\r\n\r\n        rotatePointsXY:function(x,y,angle) {\r\n\r\n            var theta = angle*Math.PI/180;\r\n\r\n            var point = {};\r\n            point.x = x * Math.cos(theta) - y * Math.sin(theta);\r\n            point.y = x * Math.sin(theta) + y * Math.cos(theta);\r\n\r\n            point.z = 0;\r\n\r\n            return point\r\n        }\r\n\r\n}\r\n\r\nGamestack.GeoMath = GeoMath;\r\n;\r\n/**\r\n * Creates a Sound instance. Implements HTML5-Audio object\r\n * --DevTODO : complete docs for the Sound class\r\n *\r\n * @param   {string} src the source-path of the targeted sound-file\r\n * @returns {Sound} instance of Gamestack.Sound\r\n * */\r\n\r\nclass Sound {\r\n\r\n    constructor(src, data) {\r\n\r\n        if (typeof(src) == 'object') {\r\n\r\n            this.sound = document.createElement('audio');\r\n\r\n            this.sound.src = src.src;\r\n\r\n            this.src = src.src;\r\n        }\r\n\r\n        else if (typeof(src) == 'string') {\r\n\r\n            this.sound = document.createElement('audio');\r\n\r\n            this.sound.src = src;\r\n\r\n            this.src = src;\r\n\r\n        }\r\n\r\n        if(typeof(data)=='object') {\r\n            for (var x in data) {\r\n                if (x !== 'sound') {\r\n                    this[x] = data[x];\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        this.onLoad = this.onLoad || function () {\r\n            };\r\n\r\n        if (typeof(this.onLoad) == 'function') {\r\n\r\n            this.onLoad(this.sound);\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Loop(loop)\r\n    {\r\n        this.sound.loop = loop || true;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    loop(loop) //same as Loop()\r\n    {\r\n        this.sound.loop = loop || true;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n\r\n    Volume(val)\r\n    {\r\n\r\n        this.sound.volume = val;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n\r\n    volume(val) //same as Volume()\r\n    {\r\n\r\n        this.sound.volume = val;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Play() {\r\n        if (typeof(this.sound) == 'object' && typeof(this.sound.play) == 'function') {\r\n\r\n            this.sound.play();\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    play() { //same as Play()\r\n        if (typeof(this.sound) == 'object' && typeof(this.sound.play) == 'function') {\r\n\r\n            this.sound.play();\r\n        }\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\n\r\nclass SoundList{\r\n\r\n    constructor(list)\r\n    {\r\n        this.cix = 1;\r\n\r\n        this.sounds = [];\r\n\r\n        if(list instanceof Array)\r\n        {\r\n            for(var x in list)\r\n            {\r\n                if(list[x].src)\r\n                {\r\n                    this.sounds.push(new Sound(list[x].src, list[x]));\r\n\r\n                }\r\n                else if(typeof(list[x]) == 'string')\r\n                {\r\n                    this.sounds.push(new Sound(list[x]));\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    add(src, name)\r\n    {\r\n        if(typeof(src) == 'object' && src.src)\r\n        {\r\n            this.sounds.push(new Sound(src.src, src));\r\n\r\n        }\r\n        else if(typeof(src) == 'string')\r\n        {\r\n            var data = {};\r\n\r\n            if(name)\r\n            {\r\n                data.name = name;\r\n            }\r\n\r\n            this.sounds.push(new Sound(list[x], data));\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Volume(v)\r\n    {\r\n        for(var x = 0; x < this.sounds.length;x++)\r\n        {\r\n            this.sounds[x].volume(v);\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    volume(v)\r\n    {\r\n        for(var x = 0; x < this.sounds.length;x++)\r\n        {\r\n            this.sounds[x].volume(v);\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n    PlayNext()\r\n    {\r\n        this.sounds[this.cix % this.sounds.length].play();\r\n\r\n        this.cix += 1;\r\n\r\n    }\r\n\r\n    Play()\r\n    {\r\n\r\n        this.sounds[this.cix % this.sounds.length].play();\r\n\r\n        this.cix += 1;\r\n\r\n\r\n    }\r\n\r\n    playNext() //same as PlayNext()\r\n    {\r\n        this.sounds[this.cix % this.sounds.length].play();\r\n\r\n        this.cix += 1;\r\n\r\n    }\r\n\r\n    play() //same as Play()\r\n    {\r\n\r\n        this.sounds[this.cix % this.sounds.length].play();\r\n\r\n        this.cix += 1;\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\nGamestack.Sound = Sound;\r\n\r\nGamestack.SoundList = SoundList;\r\n;(function () {\r\n    console.log('Sprite class... creating');\r\n\r\n\r\n    /**\r\n     * Creates an instance of Sprite.\r\n     *\r\n     * <info-bit>Gamestack.Sprite is a container for the properties and behaviors associated with a single 2d-game-entity.\r\n     *\r\n     * Sprites hold reference to their-own Animations, Motions, Shots, and Sounds.</info-bit>\r\n\r\n     * <iframe style='width:400px; height:450px; overflow:hidden;' src='../client/examples/js-class/Sprite.html'> </iframe>\r\n\r\n     * @param   {string=} [src] the srcPath (image) of this Sprite\r\n     * @param   {Animation=} [anime] the animation to be applied\r\n     * @param   {Object | Sprite=} [sprite] the Sprite-data to be returned as fully unique instance\r\n     * @param   {number} [scale] the scale to be applied to the sprite's image\r\n     *\r\n     * @returns {Sprite} a Gamestack.Sprite object\r\n     *\r\n     * @example\r\n     *\r\n     * //Create Animation using Chainable functions of Gamestack.Animation\r\n     * var anime = new Gamestack.Animation('../images/characters/full/spaceman1.png') //constructor is called\r\n     * .FrameSize(130, 130) //FrameSize(x, y) are applied\r\n     * .FrameBounds(new Gamestack.Vector(9, 0), new Gamestack.Vector(23, 0), new Gamestack.Vector(23, 0)) //Defines a frame-grid of min-max(x,y), and termPoint(x, y)\r\n     * .Seesaw() //The Animation will play back-and-forth repeatedly (cycle through frames forwards, then backwards and so on.\r\n     * .Duration(900); //Animation lasts 900 millis OR just under 1 second\r\n     *\r\n     * //Use the anime to create Sprite...\r\n     * var spaceman = new Gamestack.Sprite(anime);\r\n     *\r\n     * //OR Create Sprite(), then set the animation using Sprite.setAnimation:\r\n     * spaceman = new Gamestack.Sprite();\r\n     * spaceman.setAnimation(anime);\r\n     *\r\n     */\r\n\r\n    class Sprite {\r\n        constructor(src={}, scale=1.0) {\r\n\r\n            var args = typeof(src) == 'object' ? src : {};\r\n\r\n            if (args instanceof Gamestack.Animation) //instantiate from animation\r\n            {\r\n\r\n\r\n                args = {selected_animation: args, image:args.image, size: new Gamestack.Vector(args.frameSize)};\r\n            }\r\n\r\n            //apply image from string 'src'\r\n\r\n            if(typeof(src) == 'string') {\r\n\r\n                this.src = src;\r\n                this.image = new Gamestack.GameImage(src);\r\n                this.selected_animation = new Gamestack.Animation(src);\r\n                this.selected_animation.setToSingleFrame();\r\n\r\n            }\r\n\r\n            this.animations = [];\r\n\r\n            //create size property\r\n            this.size = new Gamestack.Vector(0, 0);\r\n\r\n            if (typeof(scale) == 'number') //image plus 'scale' argument\r\n            {\r\n                this.scale = scale || 1.0;\r\n\r\n            }\r\n\r\n            Gamestack.Modifiers.spatial(this);\r\n\r\n            this.active = true; //defaults to active or visible\r\n\r\n            //apply remaining args\r\n            this.apply_args(args);\r\n\r\n            if(!this.selected_animation)\r\n            this.setToSingleFrame();\r\n        }\r\n\r\n        /**\r\n         * runs a function when the sprite's image has loaded\r\n         *\r\n         * @function\r\n         * @params {Function} f the function to be called on load\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        onLoad(f) {\r\n\r\n            var __inst = this;\r\n\r\n            var img = this.image.domElement, load = img.onload;\r\n\r\n            img.onload = function () {\r\n\r\n                    onload(false, __inst);\r\n\r\n                    f(false, __inst);\r\n\r\n            };\r\n\r\n            img.onerror = function (err) {\r\n\r\n                    f(true, __inst);\r\n\r\n            };\r\n\r\n            return this;\r\n        }\r\n\r\n\r\n        /**********\r\n         * @ignore\r\n         **********/\r\n\r\n        apply_args(args = {}) {\r\n\r\n            this.FromData(args, true); //Using a FUNCTIONAL COPY --heavy to process\r\n\r\n            if(args.image instanceof Gamestack.GameImage && !this.image)\r\n            {\r\n                this.image = args.image;\r\n            }\r\n\r\n            this.name = args.name || \"__blankName\";\r\n\r\n            this.life = args.life || 999999999999;\r\n\r\n            this.description = args.description || \"__spriteDesc\";\r\n\r\n            this.id = Gamestack.getArg(args, 'id', this.create_id());\r\n\r\n            this.animations = Gamestack.getArg(args, 'animations', []);\r\n\r\n            this.motions = Gamestack.getArg(args, 'motions', []);\r\n\r\n            this.particles = Gamestack.getArg(args, 'particles', []);\r\n\r\n            this.shots = Gamestack.getArg(args, 'shots', []);\r\n\r\n            this.sounds = Gamestack.getArg(args, 'sounds', []);\r\n\r\n            this.__initializers = Gamestack.getArg(args, '__initializers', []);\r\n\r\n            this.group = Gamestack.getArg(args, 'group', 'one');\r\n\r\n            this.scrollFactor = args.scrollFactor || 1.0;\r\n\r\n            this.noScroll = args.noScroll || false;\r\n\r\n            if(this.noScroll){this.scrollFactor = 0;}\r\n\r\n            this.speed = new Gamestack.Vector(Gamestack.getArg(args, 'speed', new Gamestack.Vector(0, 0)));\r\n\r\n            this.size = new Gamestack.Vector(Gamestack.getArg(args, 'size', new Gamestack.Vector(0, 0)));\r\n\r\n            this.position = new Gamestack.Vector(Gamestack.getArg(args, 'position', new Gamestack.Vector(0, 0, 0)));\r\n\r\n            this.collision_bounds = Gamestack.getArg(args, 'collision_bounds', new Gamestack.VectorBounds(new Gamestack.Vector(0, 0, 0), new Gamestack.Vector(0, 0, 0)));\r\n\r\n            this.rotation = new Gamestack.Vector(Gamestack.getArg(args, 'rotation', new Gamestack.Vector(0, 0, 0)));\r\n\r\n            this.scale = args.scale || 1.0;\r\n\r\n            this.acceleration = Gamestack.getArg(args, 'acceleration', new Gamestack.Vector(0, 0, 0));\r\n\r\n            this.rot_speed = new Gamestack.Vector(Gamestack.getArg(args, 'rot_speed', new Gamestack.Vector(0, 0)));\r\n\r\n            this.rot_accel = new Gamestack.Vector(Gamestack.getArg(args, 'rot_accel', new Gamestack.Vector(0, 0)));\r\n\r\n            this.padding = Gamestack.getArg(args, 'padding', new Gamestack.Vector(0, 0, 0));\r\n\r\n\r\n            var __inst = this;\r\n\r\n            //Apply / instantiate Sound(), Gamestack.Motion(), and Gamestack.Animation() args...\r\n\r\n\r\n            Gamestack.each(this.shots, function (ix, item) {\r\n\r\n                __inst.shots[ix] = new Gamestack.Shot(item);\r\n\r\n            });\r\n\r\n            Gamestack.each(this.sounds, function (ix, item) {\r\n\r\n                __inst.sounds[ix] = new Gamestack.Sound(item);\r\n\r\n            });\r\n\r\n            Gamestack.each(this.motions, function (ix, item) {\r\n\r\n                __inst.motions[ix] = new Gamestack.TweenMotion(item);\r\n\r\n            });\r\n\r\n            Gamestack.each(this.animations, function (ix, item) {\r\n\r\n                __inst.animations[ix] = new Gamestack.Animation(item);\r\n\r\n            });\r\n\r\n            Gamestack.each(this.particles, function (ix, item) {\r\n\r\n                __inst.particles[ix] = new Gamestack.GSProton(item);\r\n\r\n            });\r\n\r\n            //Apply initializers:\r\n\r\n            Gamestack.each(this.__initializers, function (ix, item) {\r\n\r\n                __inst.onInit(item);\r\n\r\n            });\r\n\r\n            Gamestack.Modifiers.informable(this);\r\n\r\n            if (!this.selected_animation && args.selected_animation) {\r\n\r\n                //log('applying animation:' + jstr(args.selected_animation));\r\n\r\n                this.selected_animation = new Gamestack.Animation(args.selected_animation);\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        FromData(data={}, fxlCopy=false)\r\n        {\r\n            for(var x in data)\r\n            {\r\n\r\n                if(fxlCopy || typeof(data[x]) !== 'function')\r\n                    this[x] = data[x];\r\n\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n        /**************************************************************\r\n         * scales the sprite.size property according to image-size.\r\n         * @param {number} scaleFloat a 0-1+ value\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         **************************************************************/\r\n\r\n        Scale(scaleFloat)\r\n        {\r\n\r\n            this.scale = scaleFloat;\r\n\r\n            this.size = new Gamestack.Vector(this.image.domElement.width * scaleFloat, this.image.domElement.height * scaleFloat);\r\n\r\n            return this;\r\n        }\r\n\r\n        /**************************************************************\r\n         * applies a float value arg to Sprite.scrollFactor\r\n         * @param {number} s a 0-1+ value\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         **************************************************************/\r\n\r\n\r\n        ScrollFactor(s)\r\n        {\r\n            this.scrollFactor = s;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n        engage(obj) //engages an object having an engage function\r\n        {\r\n\r\n            obj.parent = this;\r\n\r\n            if(obj.engage)\r\n            {\r\n                obj.engage();\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * pass argument v to the sprite.life property.\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {number} v number of render-updates that this Sprite will last. --update occurs 60+ times per second, or less, depending on performance\r\n         * @returns {Sprite} the sprite object --enables chainable function calls\r\n         **********/\r\n\r\n        Life(v) {\r\n\r\n            this.life = v;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * @ignore\r\n         **********/\r\n\r\n        singleFrame() {\r\n            var __inst = this;\r\n\r\n            console.log('Sprite.singleFrame():');\r\n\r\n            __inst.size = __inst.size || new Gamestack.Vector(0, 0);\r\n\r\n            if(__inst.size.x == 0 && __inst.size.y == 0) //if size[x, y] are zero, then size according to image.domElement...\r\n            {\r\n                __inst.size = new Gamestack.Vector(__inst.image.domElement.width, __inst.image.domElement.height);\r\n\r\n                __inst.Scale(__inst.scale || 1.0);\r\n\r\n            }\r\n\r\n            if (!__inst.selected_animation) {\r\n\r\n                console.log('setting Animation with :' + this.image.domElement.src);\r\n\r\n                __inst.setAnimation(new Gamestack.Animation({\r\n\r\n                    image: __inst.image,\r\n\r\n                    frameSize: new Gamestack.Vector(__inst.image.domElement.width, __inst.image.domElement.height),\r\n\r\n                    frameBounds: new Gamestack.VectorFrameBounds(new Gamestack.Vector(), new Gamestack.Vector())\r\n\r\n\r\n                }));\r\n\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n\r\n        /**\r\n         * initializes sprites. triggers all functions previously passed to the onInit function.\r\n         * Use this function when a sprite, instantiated from json-data, carries initializers.\r\n         * --This feature is built for the purpose of data-persistence. --sprites from json-file may carry behaviors onto the scene.\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        init() {\r\n\r\n\r\n        }\r\n\r\n        /**\r\n         * extends the init function.\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {function} fun the function to be passed into the init function of the sprite\r\n         **********/\r\n\r\n        onInit(fun) {\r\n\r\n            if (typeof fun == 'string') {\r\n\r\n                if (this.__initializers.indexOf(fun) < 0) {\r\n\r\n                    this.__initializers.push(fun)\r\n                }\r\n                ;\r\n\r\n                var __inst = this;\r\n\r\n                var keys = fun.split('.');\r\n\r\n                console.log('finding init from string:' + fun);\r\n\r\n                if (!keys.length >= 2) {\r\n                    return console.error('need min 2 string keys separated by \".\"');\r\n                }\r\n\r\n                var f = Gamestack.options.SpriteInitializers[keys[0]][keys[1]];\r\n\r\n                if (typeof(f) == 'function') {\r\n\r\n                    var __inst = this;\r\n\r\n                    var f_init = this.init;\r\n\r\n                    this.init = function () {\r\n\r\n                        f_init(__inst);\r\n\r\n                        f(__inst);\r\n\r\n                    };\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n            else if (typeof fun == 'function') {\r\n\r\n                console.log('extending init:');\r\n\r\n\r\n                var f_init = this.init;\r\n                var __inst = this;\r\n\r\n                this.init = function () {\r\n\r\n                    f_init(__inst);\r\n\r\n                    fun(__inst);\r\n\r\n                };\r\n\r\n\r\n            }\r\n\r\n            else if (typeof fun == 'object') {\r\n\r\n                console.log('extending init:');\r\n\r\n                console.info('Quick2D does not yet implement onInit() from arg of object type');\r\n\r\n            }\r\n\r\n        }\r\n\r\n        /*****************************\r\n         * Getters\r\n         ***************************/\r\n\r\n        /**\r\n         * returns the 'id' property of the sprite\r\n         * @function\r\n         * @memberof Sprite\r\n         * @returns {string}\r\n         **********/\r\n\r\n        get_id() {\r\n            return this.id;\r\n        }\r\n\r\n        /**********\r\n         * @ignore\r\n         **********/\r\n\r\n        to_map_object(size, framesize) {\r\n\r\n            this.__mapSize = new Gamestack.Vector(size || this.size);\r\n\r\n            this.frameSize = new Gamestack.Vector(framesize || this.size);\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        /*****************************\r\n         * Setters and Creators\r\n         ***************************/\r\n\r\n        /**\r\n         * @ignore\r\n         * creates a unique string id for the purpose of identifying objects.\r\n         * @function\r\n         * @memberof Sprite\r\n         * @returns {string}\r\n         **********/\r\n\r\n        create_id() {\r\n\r\n            return Gamestack.create_id();\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * sets the size of the Sprite()\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        setSize(size) {\r\n\r\n            this.size = new Gamestack.Vector(size.x, size.y, size.z);\r\n\r\n        }\r\n\r\n        /**\r\n         * sets the position of the Sprite()\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        setPos(pos) {\r\n            this.position = new Gamestack.Vector(pos.x, pos.y, pos.z || 0);\r\n\r\n        }\r\n\r\n\r\n        setFrame(ix)\r\n        {\r\n            if(this.selected_animation)\r\n            {\r\n\r\n                this.selected_animation.selected_frame = this.selected_animation.frames[ix];\r\n\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * returns a maximum scaled size, according to max dimensions of width and height\r\n         * @param {number} mx the maximum size.x for the returned size\r\n         * @param {number} my the maximum size.y for the returned size\r\n         * @function\r\n         * @memberof Sprite\r\n         * @returns {Vector} a vector of x,y,z? values\r\n         **********/\r\n\r\n        getSizeByMax(mx, my) {\r\n\r\n            var size = new Gamestack.Vector(this.size);\r\n\r\n            var wth = size.y / size.x;\r\n\r\n            var htw = size.x / size.y;\r\n\r\n            if (size.x > mx) {\r\n                size.x = mx;\r\n\r\n                size.y = size.x * wth;\r\n\r\n            }\r\n\r\n            if (size.y > my) {\r\n                size.y = my;\r\n\r\n                size.x = size.y * htw;\r\n\r\n            }\r\n\r\n            return size;\r\n\r\n        }\r\n\r\n        /*****************************\r\n         *  @memberof Sprite\r\n         *  assert the existence of a speed{} object\r\n         *  sprite.speed (vector) is created if absent from sprite\r\n         ***************************/\r\n\r\n        assertSpeed() {\r\n            if (!this.speed) {\r\n\r\n                this.speed = new Gamestack.Vector(0, 0, 0);\r\n\r\n            }\r\n\r\n        }\r\n\r\n        /*****************************\r\n         *  setAnimation(anime)\r\n         *  -set the select_animation of this sprite\r\n         ***************************/\r\n\r\n        /**\r\n         * sets the 'selected_animation' property of the sprite\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Animation}\r\n         **********/\r\n\r\n        setAnimation(anime) {\r\n\r\n            if (anime instanceof Gamestack.Animation && this.animations.indexOf(anime) < 0) {\r\n                this.animations.push(anime);\r\n            }\r\n\r\n            this.selected_animation = anime;\r\n\r\n            this.image = this.selected_animation.image || new Gamestack.GameImage(this.selected_animation.src);\r\n\r\n            Gamestack.log('set the animation');\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * sets the 'selected_animation' property to a single-frame-animation, from sprite.image\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        setToSingleFrame() {\r\n\r\n            if(!this.image || !this.image.domElement)\r\n            {\r\n                return this;\r\n            }\r\n\r\n            var __inst = this, load = this.image.domElement.onload || function(){};\r\n\r\n\r\n\r\n            this.image.domElement.onload = function () {\r\n\r\n                load(false, __inst);\r\n\r\n                __inst.size = new Gamestack.Vector(__inst.image.domElement.width, __inst.image.domElement.height);\r\n                __inst.selected_animation = new Gamestack.Animation(__inst.image).FrameSize(__inst.size);\r\n                __inst.Scale(__inst.scale || 1.0);\r\n\r\n            };\r\n\r\n            Gamestack.log('set single-frame animation');\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n        LifeSpan(value) {\r\n            this.life = value;\r\n        }\r\n\r\n        Life(value) //same as LifeSpan\r\n        {\r\n            this.life = value;\r\n        }\r\n\r\n        isDead(gw) {\r\n\r\n            gw = gw || Gamestack.game_windows[0];\r\n\r\n            return this.hasOwnProperty('life') && this.life <= 0;\r\n        }\r\n\r\n        die(gw) {\r\n\r\n       this.life = 0;\r\n\r\n       return this;\r\n\r\n        }\r\n\r\n        /**\r\n         * indicates if any portion of the sprite is within screen bounds --uses Gamestack.WIDTH, Gamestack.HEIGHT OR any w,h arguments passed to this method\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {number} w optional screen-width argument, defaults to Gamestack.WIDTH\r\n         * @param {number} h optional screen-height argument, defaults to Gamestack.HEIGHT\r\n         * @returns {boolean} a true or false value to show if any part of the sprite is on-screen\r\n         **********/\r\n\r\n        onScreen(w, h, gw) {\r\n\r\n            w = w || Gamestack.WIDTH;\r\n\r\n            h = h || Gamestack.HEIGHT;\r\n\r\n            gw = gw || Gamestack.game_windows[0];\r\n\r\n            var camera = gw.camera || Gamestack.camera || {position: new Gamestack.Vector(0, 0, 0)},\r\n                scrollFactor = this.noScroll ? 0 : this.scrollFactor;\r\n\r\n            var camPos = new Gamestack.Vector(camera.position).mult(scrollFactor);\r\n\r\n            var p = new Gamestack.Vector(this.position.x - camPos.x, this.position.y - camPos.y, this.position.z - camPos.z);\r\n\r\n            return p.x + this.size.x > -1000 - w && p.x < w + 1000\r\n                && p.y + this.size.y > 0 - 1000 - h && p.y < h + 1000;\r\n\r\n        }\r\n\r\n        /*****************************\r\n         * Updates\r\n         ***************************/\r\n\r\n        /*****************************\r\n         * update()\r\n         * -starts empty:: is applied recursively by Gamestack.js as the main sprite-update\r\n         ***************************/\r\n\r\n        /**\r\n         * the main update for the sprite --applied recursively by GameWindow after gameWindow.start is called\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        update(sprite) {\r\n        }\r\n\r\n        /*****************************\r\n         * def_update()\r\n         * -applies speed and other default factors of movement\r\n         * -is used by Quick2d.js as the system def_update (default update)\r\n         ***************************/\r\n\r\n        /**\r\n         * Automatically updates various speed and rotational properties for the Sprite()\r\n         * @function\r\n         *\r\n         * @memberof Sprite\r\n         *\r\n         *\r\n         * @example\r\n         * // applies a constant speed\r\n         * mySprite.rot_speed = new Gamestack.Vector(3);\r\n         * //def_update() will run automatically with the gamestack update. The above sprite will rotate at a constant speed of 3.\r\n         * @example\r\n         * // if automatic speed updates are undesired, replace the def_update() function with a 'do nothing' function.\r\n         * mySprite.def_update = function()\r\n         *                      {\r\n         *                     //do nothing\r\n         *                     };\r\n         **********/\r\n\r\n\r\n        def_update(sprite) {\r\n\r\n            if (this.hasOwnProperty('life') && !isNaN(this.life)) {\r\n\r\n                this.life -= 1;\r\n\r\n            };\r\n\r\n            for (var x in this.speed) {\r\n\r\n                if (this.speed[x] > 0 || this.speed[x] < 0) {\r\n\r\n                    this.position[x] += this.speed[x];\r\n\r\n                }\r\n\r\n            }\r\n\r\n            for (var x in this.acceleration) {\r\n\r\n                if (this.acceleration[x] > 0 || this.acceleration[x] < 0) {\r\n\r\n                    this.speed[x] += this.acceleration[x];\r\n\r\n                }\r\n\r\n            }\r\n\r\n            for (var x in this.rot_speed) {\r\n\r\n                if (this.rot_speed[x] > 0 || this.rot_speed[x] < 0) {\r\n\r\n                    this.rotation[x] += this.rot_speed[x];\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n            for (var x in this.rot_accel) {\r\n\r\n\r\n                if (this.rot_accel[x] > 0 || this.rot_accel[x] < 0) {\r\n\r\n                    this.rot_speed[x] += this.rot_accel[x];\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * This function resolves a function nested in an object, from a string-key, and it is applied by Gamestack.js for persistence of data and Sprite() behaviors\r\n         * @ignore\r\n         * -REMOVED FROM DOCS : SYSTEM USE ONLY\r\n         **********/\r\n\r\n        resolveFunctionFromDoubleKeys(keyString1, keyString2, obj, callback) {\r\n\r\n            callback(typeof obj[keyString1][keyString2] == 'function' ? obj[keyString1][keyString2] : {});\r\n\r\n        }\r\n\r\n        /**\r\n         * extends an existing function, and is applied by Gamestack in onInit();\r\n         * @ignore\r\n         * -REMOVED FROM DOCS : SYSTEM USE ONLY\r\n         **********/\r\n\r\n        extendFunc(fun, extendedFunc) {\r\n\r\n            console.log('extending func');\r\n\r\n            var ef = extendedFunc;\r\n\r\n            var __inst = this;\r\n\r\n            return function () {\r\n\r\n\r\n                ef(__inst);\r\n\r\n                //any new function comes after\r\n\r\n                fun(__inst);\r\n\r\n\r\n            };\r\n\r\n        }\r\n\r\n\r\n        /*****************************\r\n         *  onUpdate(fun)\r\n         * -args: 1 function(sprite){ } //the self-instance/sprite is passed into the function()\r\n         * -overrides and maintains existing code for update(){} function\r\n         ***************************/\r\n\r\n\r\n        /**\r\n         * extends the update of this sprite with a new function to be called during the update\r\n         * --repeated calls will extend, (not replace) the update --Allows multiple extensions of the update\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {function} fun the function to be appended to sprite.update\r\n         *\r\n         *  * @example\r\n         * // extend the behavior of your sprite\r\n         * mySprite.onUpdate(function(spr)\r\n         *\r\n         *                    console.log('extended update'); //runs automatically whenever sprite.update runs\r\n         *\r\n         *                   });\r\n         *\r\n         **********/\r\n\r\n\r\n        onUpdate(fun) {\r\n\r\n            var id = this.create_id();\r\n\r\n            fun = this['update_' + id] = fun || function () {\r\n                };\r\n\r\n          //  console.log('created sprite update with key:' + 'update_' + id);\r\n\r\n            let update = this.update;\r\n\r\n            let __inst = this;\r\n\r\n            this.update = function (__inst) {\r\n\r\n                update(__inst);\r\n\r\n                for(var x in __inst)\r\n                {\r\n                    if(__inst[x] == fun)\r\n                    {\r\n                        //console.log('calling update');\r\n                        __inst[x](__inst);\r\n                    }\r\n\r\n                }\r\n            };\r\n        }\r\n\r\n        /*****************************\r\n         *  travelLineTwoWay()\r\n         *  -sprite travels line: any Line() or object with property of line\r\n         ***************************/\r\n\r\n        /********************************************************************************\r\n         * sprite travels on a line in a back-and-forth motion --to the end of the line, and back.\r\n         * #Dev-todo:MORE ON THIS\r\n         * @function\r\n         * @memberof Sprite\r\n         *********************************************************************************/\r\n\r\n        travelLineTwoWay(lineObject, speed, curveKey, offset) {\r\n\r\n            speed = speed || 1;\r\n\r\n            var motionCurveOptions = [\"linear\", \"quadratic\", \"cubic\"];\r\n\r\n            curveKey = curveKey || \"linear\";\r\n\r\n            var line = lineObject;\r\n\r\n            if (lineObject.line) {\r\n                line = lineObject.line;\r\n            }\r\n\r\n            this.__crtLineIx = this.__crtLineIx || 0;\r\n\r\n            var __inst = this,\r\n\r\n                pctFloat = __inst.__crtLineIx % ((line.points.length - 1) / 2) / ((line.points.length - 1) / 2);\r\n\r\n            if (__inst.__crtLineIx >= ((line.points.length - 1) / 2)) {\r\n                pctFloat = 1.0 - pctFloat;\r\n\r\n            }\r\n\r\n            var ixChange = Gamestack.Curves.InOut[curveKey](pctFloat) * speed * 0.5;\r\n\r\n            if (curveKey == 'linear') {\r\n                ixChange = speed;\r\n            }\r\n\r\n            ixChange = Math.ceil(ixChange);\r\n\r\n            if (ixChange < 1) {\r\n                ixChange = 1;\r\n            }\r\n\r\n            __inst.position = new Gamestack.Vector(line.points[__inst.__crtLineIx]);\r\n\r\n            //console.log(ixChange);\r\n\r\n            __inst.__crtLineIx += ixChange;\r\n\r\n            if (__inst.__crtLineIx >= line.points.length) {\r\n\r\n                line.points = line.points.reverse();\r\n                __inst.__crtLineIx = 0;\r\n            }\r\n\r\n            if (offset instanceof Gamestack.Vector) {\r\n                this.position = this.position.add(offset);\r\n            }\r\n\r\n\r\n        }\r\n\r\n\r\n        /*****************************\r\n         *  travelLineOnLoop()\r\n         *  -sprite travels line: any Line() or object with property of line\r\n         ***************************/\r\n\r\n        /**\r\n         * the sprite travels one line in a looping motion --useful for traveling Square, Circle, or other enclosed Lines.\r\n         * #Dev-todo:MORE ON THIS\r\n         * @function\r\n         * @memberof Sprite\r\n         **********/\r\n\r\n        travelLineOnLoop(lineObject, speed, curveKey, offset) {\r\n\r\n            speed = speed || 1;\r\n\r\n            var motionCurveOptions = [\"linear\", \"quadratic\", \"cubic\"];\r\n\r\n            curveKey = curveKey || \"linear\";\r\n\r\n            var line = lineObject;\r\n\r\n            if (lineObject.line) {\r\n                line = lineObject.line;\r\n            }\r\n\r\n            this.__crtLineIx = this.__crtLineIx || 0;\r\n\r\n            var __inst = this,\r\n\r\n                pctFloat = __inst.__crtLineIx % ((line.points.length - 1) / 2) / ((line.points.length - 1) / 2);\r\n\r\n            if (__inst.__crtLineIx >= ((line.points.length - 1) / 2)) {\r\n                pctFloat = 1.0 - pctFloat;\r\n\r\n            }\r\n\r\n            var ixChange = Gamestack.Curves.InOut[curveKey](pctFloat) * speed * 0.5;\r\n\r\n            if (curveKey == 'linear') {\r\n                ixChange = speed;\r\n            }\r\n\r\n            ixChange = Math.ceil(ixChange);\r\n\r\n            if (ixChange < 1) {\r\n                ixChange = 1;\r\n            }\r\n\r\n            __inst.position = new Gamestack.Vector(line.points[__inst.__crtLineIx]);\r\n\r\n           // console.log(ixChange);\r\n\r\n            __inst.__crtLineIx += ixChange;\r\n\r\n            if (__inst.__crtLineIx >= line.points.length) {\r\n                __inst.__crtLineIx = 0;\r\n            }\r\n\r\n            if (offset instanceof Gamestack.Vector) {\r\n                this.position = this.position.add(offset);\r\n            }\r\n\r\n\r\n        }\r\n\r\n        /**\r\n         * returns a true || false value for immediate color-collision --non-transparent-pixels --between colored-pixels of this sprite and the sprite argument\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Sprite} spr the sprite object to be collided\r\n         * @returns {boolean} a true or false value to show if collision is happening\r\n         **********/\r\n\r\n        hasColorCollision(sprite)\r\n        {\r\n\r\n            var grid1 = this.selected_animation.getCurrentColorMap() || [{position:this.position, size:this.size}],\r\n\r\n                grid2 = sprite.selected_animation.getCurrentColorMap() || [{position:spr.position, size:sprite.size}];\r\n\r\n            for(var x in grid1)\r\n            {\r\n                for(var y in grid2)\r\n                {\r\n\r\n                    if(Gamestack.Collision.basicBoxCollision(grid1[x].position, grid1[x].size, grid2[y].position, grid2[y].size))\r\n                    {\r\n                        return true;\r\n\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n\r\n        /**\r\n         * returns a true || false value for immediate box-collision --between this sprite and the sprite argument\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Sprite} sprite the alternate Sprite for collision detection\r\n         * @returns {boolean} a true or false value to show if collision is happening\r\n         **********/\r\n\r\n        hasBoxCollision(sprite) {\r\n\r\n            return Gamestack.Collision.spriteRectanglesCollide(this, sprite);\r\n\r\n        }\r\n\r\n        /*****************************\r\n         *  shoot(sprite)\r\n         *  -fire a shot from the sprite:: as in a firing gun or spaceship\r\n         *  -takes options{} for number of shots anglePerShot etc...\r\n         *  -TODO: complete and test this code\r\n         ***************************/\r\n\r\n\r\n        /**\r\n         * fire a Shot, or bullet-Sprite from the Sprite\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Object} options an object of arguments\r\n         * @param {Gamestack.Animation} animation the animation to fire from the Sprite\r\n         * @param {number} speed the speed of the shot that is projected\r\n         * @param {Gamestack.Vector} position the initial position of the shot: defaults to current Sprite position\r\n         * @param {Gamestack.Vector} size the Vector size of the shot\r\n         * @param {Gamestack.Vector} rot_offset the rotational offset to apply: controls direction of the shot\r\n         **********/\r\n\r\n        shoot(options, gw) {\r\n            //character shoots an animation\r\n\r\n            gw = gw || Gamestack.game_windows[0];\r\n\r\n            this.prep_key = 'shoot';\r\n\r\n            let animation = options.bullet || options.animation || options.anime || new Gamestack.Animation();\r\n\r\n            let speed = options.speed || options.velocity || 1;\r\n\r\n\r\n            let size = options.size || new Gamestack.Vector(10, 10, 0);\r\n\r\n            let position = new Gamestack.Vector(options.position) || new Gamestack.Vector(this.position);\r\n\r\n\r\n            let rot_offset = options.rot_offset || options.rotation || 0;\r\n\r\n            let total = options.total || 1;\r\n\r\n            let rot_disp = options.rot_disp || 0;//the full rotational-dispersion of the bullets\r\n\r\n            let curve = options.curve, curve_size = options.curve_size, curve_growth = options.curve_growth || 1.0;\r\n\r\n            let curve_key = options.curve_key || 'quintic';\r\n\r\n            let life = options.life || 900;\r\n\r\n            var shots = [];\r\n\r\n            for (var x = 0; x < total; x++) {\r\n\r\n                var __playerInst = this;\r\n\r\n                if (Gamestack.isAtPlay) {\r\n\r\n                    var bx = position.x, by = position.y, bw = size.x, bh = size.y;\r\n\r\n                    var shot = new Gamestack.Sprite({\r\n\r\n                        active: true,\r\n\r\n                        position: new Gamestack.Vector(position),\r\n\r\n                        size: new Gamestack.Vector(size),\r\n\r\n                        speed: speed,\r\n\r\n                        image: animation.image,\r\n\r\n                        rotation: new Gamestack.Vector(0, 0, 0),\r\n\r\n                        flipX: false,\r\n\r\n                        life: options.life\r\n\r\n                    });\r\n\r\n                    shot.noScroll = true;\r\n\r\n                    shot.setAnimation(animation);\r\n\r\n                    rot_offset = new Gamestack.Vector(rot_offset, 0, 0);\r\n\r\n                    shot.position.x = bx, shot.position.y = by;\r\n\r\n                    //Danger On this line: annoying math --dispersing rotation of bullets by rot_disp\r\n\r\n                    var div = rot_disp / total;\r\n\r\n                    var rotPlus = div * x + div / 2 - rot_disp / 2;\r\n\r\n                    shot.rotation.x = rot_offset.x + rotPlus;\r\n\r\n                    shot.origin = new Gamestack.Vector(position);\r\n\r\n                    shot.speed = new Gamestack.Vector(Math.cos((shot.rotation.x) * 3.14 / 180) * speed, Math.sin((shot.rotation.x) * 3.14 / 180) * speed);\r\n\r\n\r\n                    shots.push(shot);\r\n\r\n                    if (!curve) {\r\n\r\n                        shot.onUpdate(function (spr) {\r\n                            // console.log('update:rotation:' + shot.rotation.x);\r\n\r\n\r\n                        });\r\n                    }\r\n                    else {\r\n\r\n                        shot.ticker = 0;\r\n\r\n                        var r = shot.rotation.x + 0;\r\n\r\n                        shot.line = new Gamestack.CurvedLine().Pos(position)\r\n                            .Curve(curve_key).SegmentSize(curve_size)\r\n                            .MaxSize(2000).Growth(1.5).Rotate(r).Fill();\r\n\r\n                        shot.onUpdate(function (spr) {\r\n\r\n                            spr.ticker += 1;\r\n\r\n                            if (spr.ticker < spr.line.points.length)\r\n                                spr.position = new Gamestack.Vector(spr.line.points[spr.ticker]);\r\n\r\n                        });\r\n                    }\r\n\r\n                    gw.add(shot);\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return shots;\r\n\r\n        }\r\n\r\n        /**\r\n         * create a sub-sprite belonging to the current sprite\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Object} options an object of arguments\r\n         * @param {Animation} animation the animation to fire from the Sprite\r\n         * @param {number} speed the speed of the shot that is projected\r\n         * @param {Vector} position the initial position of the shot: defaults to current Sprite position\r\n         * @param {Vector} size the Vector size of the shot\r\n         * @param {Vector} offset the positional offset to apply\r\n         * @returns {Sprite} a Gamestack.Sprite object\r\n         **********/\r\n\r\n        subsprite(options, gw) {\r\n\r\n            gw = gw || Gamestack.game_windows[0];\r\n\r\n            let animation = options.animation || new Gamestack.Animation();\r\n\r\n            let position = options.position || new Gamestack.Vector(this.position);\r\n\r\n            let offset = options.offset || new Gamestack.Vector(0, 0, 0);\r\n\r\n            let size = new Gamestack.Vector(options.size || this.size);\r\n\r\n            if (Gamestack.isAtPlay) {\r\n\r\n                var subsprite = gw.add(new Gamestack.Sprite({\r\n\r\n                    active: true,\r\n\r\n                    position: position,\r\n\r\n                    size: size,\r\n\r\n                    offset: offset,\r\n\r\n                    image: animation.image,\r\n\r\n                    rotation: new Gamestack.Vector(0, 0, 0),\r\n\r\n                    flipX: false,\r\n\r\n                    scrollFactor: this.scrollFactor,\r\n\r\n                    noScroll: this.noScroll\r\n\r\n                }));\r\n\r\n                subsprite.setAnimation(animation);\r\n\r\n                return subsprite;\r\n\r\n            }\r\n            else {\r\n                alert('No subsprite when not at play');\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * switch to the next frame on sprite.selected_animation\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Animation} animation the optional animation to switch to before animate is called, defaults to the existing sprite.selected_animation\r\n         **********/\r\n\r\n        animate(animation) {\r\n\r\n            if (Gamestack.isAtPlay) {\r\n\r\n                if (animation) {\r\n                    this.setAnimation(animation)\r\n                }\r\n\r\n                this.selected_animation.animate();\r\n\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * run a function when the sprite.selected_animation is complete\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Function} fun the function to call when the animation is complete\r\n         *\r\n         **********/\r\n\r\n        onAnimationComplete(fun) {\r\n            this.selected_animation.onComplete(fun);\r\n\r\n        }\r\n\r\n        /*****************************\r\n         *  accelY\r\n         *  -accelerate on Y-Axis with 'accel' and 'max' (speed) arguments\r\n         *  -example-use: gravitation of sprite || up / down movement\r\n         ***************************/\r\n\r\n        /**\r\n         * accelerate speed on the y-axis\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {number} accel the increment of acceleration\r\n         * @param {number} max the maximum for speed\r\n         *\r\n         **********/\r\n\r\n        accelY(accel, max) {\r\n\r\n            accel = Math.abs(accel);\r\n\r\n            if (typeof(max) == 'number') {\r\n                max = {y: max};\r\n\r\n            }\r\n\r\n            this.assertSpeed();\r\n\r\n            let diff = max.y - this.speed.y;\r\n\r\n            if (diff > 0) {\r\n                this.speed.y += Math.abs(diff) >= accel ? accel : diff;\r\n\r\n            }\r\n            ;\r\n\r\n            if (diff < 0) {\r\n                this.speed.y -= Math.abs(diff) >= accel ? accel : diff;\r\n\r\n            }\r\n            ;\r\n\r\n        }\r\n\r\n        /*****************************\r\n         *  accelX\r\n         *  -accelerate on x-Axis\r\n         *  -example-use: running of sprite || left / right movement\r\n         ***************************/\r\n\r\n\r\n        /**\r\n         * accelerate speed on the x-Axis\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {number} accel the increment of acceleration\r\n         * @param {number} max the maximum for speed\r\n         *\r\n         **********/\r\n\r\n\r\n        accelX(accel, max) {\r\n\r\n            accel = Math.abs(accel);\r\n\r\n            if (typeof(max) == 'number') {\r\n                max = {x: max};\r\n\r\n            }\r\n\r\n            this.assertSpeed();\r\n\r\n            let diff = max.x - this.speed.x;\r\n\r\n            if (diff > 0) {\r\n                this.speed.x += Math.abs(diff) >= accel ? accel : diff;\r\n\r\n            }\r\n            ;\r\n\r\n            if (diff < 0) {\r\n                this.speed.x -= Math.abs(diff) >= accel ? accel : diff;\r\n\r\n            }\r\n            ;\r\n\r\n        }\r\n\r\n\r\n        /*****************************\r\n         *  accel\r\n         *  -accelerate any acceleration -key\r\n         ***************************/\r\n\r\n\r\n        /**\r\n         * decelerate speed on the x-Axis, toward zero\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {number} amt the increment of deceleration, negatives ignored\r\n         *\r\n         **********/\r\n\r\n        decelY(amt) {\r\n\r\n            amt = Math.abs(amt);\r\n\r\n            if (Math.abs(this.speed.y) <= amt) {\r\n                this.speed.y = 0;\r\n\r\n            }\r\n            else if (this.speed.y > amt) {\r\n\r\n                this.speed.y -= amt;\r\n            }\r\n            else if (this.speed.y < amt * -1) {\r\n\r\n                this.speed.y += amt;\r\n            }\r\n\r\n        }\r\n\r\n        /*****************************\r\n         *  decelX\r\n         *  -decelerate on the X axis\r\n         *  -args: 1 float:amt\r\n         ***************************/\r\n\r\n\r\n        /**\r\n         * decelerate speed on the x-Axis, toward zero\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {number} amt the increment of deceleration, negatives ignored\r\n         *\r\n         **********/\r\n\r\n        decelX(amt) {\r\n\r\n            amt = Math.abs(amt);\r\n\r\n\r\n            if (this.speed.x > amt) {\r\n\r\n                this.speed.x -= amt;\r\n            }\r\n            else if (this.speed.x < amt * -1) {\r\n\r\n                this.speed.x += amt;\r\n            }\r\n\r\n            if (Math.abs(this.speed.x) <= amt) {\r\n\r\n                this.speed.x = 0;\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * accelerate toward a max value on any object-property\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Object} prop The object to control\r\n         * @param {string} key the target property-key for object argument\r\n         * @param {number} accel the additive increase to the property on each call\r\n         * @param {number} max the max value to accelerate towards\r\n         **********/\r\n\r\n       accel(object, key, accel, max) {\r\n\r\n           var prop = object;\r\n\r\n           accel = Math.abs(accel);\r\n\r\n           if (typeof(max) == 'number') {\r\n               max = {x: max};\r\n\r\n           }\r\n\r\n           let speed = prop[key];\r\n\r\n           // this.assertSpeed();\r\n\r\n           let diff = max.x - prop[key];\r\n\r\n           if (diff > 0) {\r\n               prop[key] += Math.abs(diff) >= accel ? accel : diff;\r\n\r\n           }\r\n           ;\r\n\r\n           if (diff < 0) {\r\n               prop[key] -= Math.abs(diff) >= accel ? accel : diff;\r\n\r\n           }\r\n           ;\r\n\r\n       }\r\n\r\n\r\n\r\n       /*****************************\r\n        *  decel\r\n        *  -deceleration -key\r\n        ***************************/\r\n\r\n        /**\r\n         * decelerate toward a max value on any object-property\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Object} prop the object to control\r\n         * @param {string} key the property-key for targeted property of prop argument\r\n         *\r\n         * @param {number} decel the increment of deceleration\r\n         *\r\n         * @param {number} max the max value to decelerate towards\r\n         *\r\n         *\r\n         **********/\r\n\r\n        decel(prop, key, rate) {\r\n            if (typeof(rate) == 'object') {\r\n\r\n                rate = rate.rate;\r\n\r\n            }\r\n\r\n            rate = Math.abs(rate);\r\n\r\n            if (Math.abs(prop[key]) <= rate) {\r\n                prop[key] = 0;\r\n            }\r\n\r\n            else if (prop[key] > 0) {\r\n                prop[key] -= rate;\r\n\r\n            }\r\n            else if (prop[key] < 0) {\r\n                prop[key] += rate;\r\n\r\n            }\r\n            else {\r\n\r\n                prop[key] = 0;\r\n\r\n            }\r\n        }\r\n\r\n\r\n        /*****************************\r\n         *  decelY\r\n         *  -decelerate on the Y axis\r\n         *  -args: 1 float:amt\r\n         ***************************/\r\n\r\n\r\n        /**\r\n         * A generic 'smooth motion', adds to position.x and position.y with smooth acceleration and deceleration\r\n         * --uses quadratic-easing of the TWEEN.js library\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {number} x The x to be added to Sprite().positon.x over the course of the SmoothMotion --use negative for subtractive motion\r\n         * @param {number} y The y to be added to Sprite().positon.y over the course of the SmoothMotion- -use negative for subtractive motion\r\n         * @param {number} duration the amount of time taken to complete this motion\r\n         *\r\n         **********/\r\n\r\n        SmoothMotion(x, y, duration)\r\n        {\r\n            if(typeof(x) == 'object') //argument coercion: x is a vector, y is duration\r\n            {\r\n                duration = y;\r\n                y = x.y;\r\n                x = x.x;\r\n            }\r\n\r\n            x = x + this.position.x;\r\n\r\n            y = y + this.position.y;\r\n\r\n            if(!TWEEN instanceof Object)\r\n            {\r\n                return console.error('TWEEN.js required for SmoothMotion();');\r\n            }\r\n\r\n               var t = new TWEEN.Tween(this.position)\r\n                    .easing(TWEEN.Easing.Quadratic.InOut)\r\n\r\n                    .to(new Gamestack.Vector(x, y), duration)\r\n                    .onUpdate(function () {\r\n                        //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n                    })\r\n                    .onComplete(function () {\r\n                        //console.log(objects[0].position.x, objects[0].position.y);\r\n\r\n\r\n                    });\r\n\r\n            t.start();\r\n\r\n        }\r\n\r\n        /**\r\n         * A generic 'smooth rotate', adds to rotation.x with smooth acceleration and deceleration\r\n         * --uses quadratic-easing of the TWEEN.js library\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {number} r The numeric value to be added to Sprite().rotation.x over the course of the SmoothRotate --use negative for subtractive rotation\r\n         * @param {number} duration the amount of time taken to complete this rotation\r\n         **********/\r\n\r\n        SmoothRotate(r, duration)\r\n        {\r\n\r\n            if(!TWEEN instanceof Object)\r\n            {\r\n                return console.error('TWEEN.js required for SmoothRotate();');\r\n            }\r\n\r\n            r = r + this.rotation.x;\r\n\r\n            var t = new TWEEN.Tween(this.rotation)\r\n                    .easing(TWEEN.Easing.Quadratic.InOut)\r\n\r\n                    .to(new Gamestack.Vector(r), duration)\r\n                    .onUpdate(function () {\r\n                        //console.log(objects[0].position.x,objects[0].position.y);\r\n\r\n\r\n                    })\r\n                    .onComplete(function () {\r\n                        //console.log(objects[0].position.x, objects[0].position.y);\r\n\r\n\r\n                    });\r\n            t.start();\r\n\r\n        }\r\n\r\n        /**\r\n         * get the vector-position at the center of the sprite, based on its current position and size\r\n         * @function\r\n         * @memberof Sprite\r\n         *\r\n         * @returns (Vector) a vector-position pinpointing the current-center of the sprite\r\n         *\r\n         **********/\r\n\r\n        center() {\r\n\r\n            return new Gamestack.Vector(this.position.x + this.size.x / 2, this.position.y + this.size.y / 2, 0);\r\n\r\n        }\r\n\r\n\r\n\r\n        /*****************************\r\n         *  System Use / Collision\r\n         ***************************/\r\n\r\n\r\n        /*****************************\r\n         * @ignore\r\n         ***************************/\r\n\r\n        shortest_stop(item, callback) {\r\n\r\n            var diff_min_y = item.min ? item.min.y : Math.abs(item.position.y - this.position.y + this.size.y);\r\n\r\n            var diff_min_x = item.min ? item.min.x : Math.abs(item.position.x - this.position.x + this.size.x);\r\n\r\n            var diff_max_y = item.max ? item.max.y : Math.abs(item.position.y + item.size.y - this.position.y);\r\n\r\n            var diff_max_x = item.max ? item.max.x : Math.abs(item.position.x + item.size.x - this.position.y);\r\n\r\n            var dimens = {top: diff_min_y, left: diff_min_x, bottom: diff_max_y, right: diff_max_x};\r\n\r\n            var minkey = \"\", min = 10000000;\r\n\r\n            for (var x in dimens) {\r\n                if (dimens[x] < min) {\r\n                    min = dimens[x];\r\n                    minkey = x; // a key of top left bottom or right\r\n\r\n                }\r\n            }\r\n\r\n            callback(minkey);\r\n\r\n        }\r\n\r\n\r\n\r\n        /*************\r\n         * #BE CAREFUL\r\n         * -with this function :: change sensitive / tricky / 4 way collision\r\n         * *************/\r\n\r\n\r\n        /**\r\n         * determine if sprite overlaps on x-axis with another sprite\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Sprite} item the Sprite to compare with\r\n         * @param {number} padding the 0-1.0 float value of padding to use on self when testing overlap\r\n         * @returns {boolean} a true || false var showing if overlap has occured\r\n         *\r\n         **********/\r\n\r\n        overlap_x(item, padding) {\r\n            if (!padding) {\r\n                padding = 0;\r\n            }\r\n\r\n            var paddingX = Math.round(padding * this.size.x),\r\n\r\n                paddingY = Math.round(padding * this.size.y), left = this.position.x + paddingX,\r\n                right = this.position.x + this.size.x - paddingX,\r\n\r\n                top = this.position.y + paddingY, bottom = this.position.y + this.size.y - paddingY;\r\n\r\n            return right > item.position.x && left < item.position.x + item.size.x;\r\n\r\n\r\n        }\r\n\r\n        /*************\r\n         * #BE CAREFUL\r\n         * -with this function :: change sensitive / tricky / 4 way collision\r\n         * *************/\r\n\r\n\r\n        /**\r\n         * determine if sprite overlaps on y-axis with another sprite\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Sprite} item the Sprite to compare with\r\n         * @param {number} padding the 0-1.0 float value of padding to use on self when testing overlap\r\n         * @returns {boolean} a true || false var showing if overlap has occured\r\n         *\r\n         **********/\r\n\r\n        overlap_y(item, padding) {\r\n            if (!padding) {\r\n                padding = 0;\r\n            }\r\n\r\n            var paddingX = Math.round(padding * this.size.x),\r\n\r\n                paddingY = Math.round(padding * this.size.y), left = this.position.x + paddingX,\r\n                right = this.position.x + this.size.x - paddingX,\r\n\r\n                top = this.position.y + paddingY, bottom = this.position.y + this.size.y - paddingY;\r\n\r\n            return bottom > item.position.y && top < item.position.y + item.size.y;\r\n\r\n        }\r\n\r\n\r\n        /*************\r\n         * #BE CAREFUL\r\n         * -with this function :: change sensitive / tricky / 4 way collision\r\n         * *************/\r\n\r\n\r\n        /**\r\n         * stop collision on x-axis with another sprite\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Sprite} item the Sprite with which to collide-stop on the x-axis\r\n         **********/\r\n\r\n        collide_stop_x(item) {\r\n\r\n            var apart = false;\r\n\r\n            var ct = 10000;\r\n\r\n            while (!apart && ct > 0) {\r\n\r\n                ct--;\r\n\r\n                var diffX = this.center().sub(item.center()).x;\r\n\r\n                var distX = Math.abs(this.size.x / 2 + item.size.x / 2 - Math.round(this.size.x * this.padding.x));\r\n\r\n                if (Math.abs(diffX) < distX) {\r\n\r\n                    this.position.x -= diffX > 0 ? -1 : 1;\r\n\r\n\r\n                }\r\n                else {\r\n\r\n                    this.speed.x = 0;\r\n\r\n                    apart = true;\r\n\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n\r\n        /*************\r\n         * #BE CAREFUL\r\n         * -with this function :: change sensitive / tricky / 4 way collision\r\n         * *************/\r\n\r\n\r\n        /**\r\n         * Trigger a fourway collision-stop between this and another Sprite ::\r\n         * objects will behave clastically and resist passing through one-another\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Sprite} item the Sprite to collide with\r\n         *\r\n         **********/\r\n\r\n        collide_stop(item) {\r\n\r\n            if (this.id == item.id) {\r\n                return false;\r\n\r\n            }\r\n\r\n            this.speed = this.speed || new Gamestack.Vector(0, 0, 0);\r\n\r\n            this.padding = this.padding || new Gamestack.Vector(0, 0, 0);\r\n\r\n            // this.position = this.position.sub(this.speed);\r\n\r\n            if (this.hasBoxCollision(item)) {\r\n\r\n                var diff = this.center().sub(item.center());\r\n\r\n                if (this.overlap_x(item, this.padding.x + 0.1) && Math.abs(diff.x) < Math.abs(diff.y)) {\r\n\r\n                    var apart = false;\r\n\r\n                    var ct = 10000;\r\n\r\n                    while (!apart && ct > 0) {\r\n\r\n                        ct--;\r\n\r\n                        var diffY = this.center().sub(item.center()).y;\r\n\r\n                        var distY = Math.abs(this.size.y / 2 + item.size.y / 2 - Math.round(this.size.y * this.padding.y));\r\n\r\n                        if (Math.abs(diffY) < distY) {\r\n\r\n                            this.position.y -= diffY > 0 ? -1 : diffY < 0 ? 1 : 0;\r\n\r\n                            this.position.y = Math.round(this.position.y);\r\n\r\n                        }\r\n\r\n                        else {\r\n\r\n                            if (diffY <= 0) {\r\n                                this.__inAir = false;\r\n                            }\r\n                            ;\r\n\r\n                            this.speed.y = 0;\r\n\r\n                            return apart = true;\r\n\r\n\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n\r\n                }\r\n\r\n\r\n                if (this.overlap_y(item, this.padding.y) && Math.abs(diff.y) < Math.abs(diff.x)) {\r\n\r\n                    this.collide_stop_x(item);\r\n\r\n                }\r\n\r\n\r\n            }\r\n\r\n\r\n        }\r\n\r\n        /**\r\n         * collide-stop only from the top (of the sprite passed as argument) ::\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         * @param {Sprite} item the Sprite to collide with\r\n         *\r\n         **********/\r\n\r\n        collide_stop_top(item) {\r\n\r\n\r\n            if (this.id == item.id) {\r\n                return false;\r\n\r\n            }\r\n\r\n            if (this.overlap_x(item, this.padding.x + 0.1)) {\r\n\r\n                console.log('OVERLAP_X');\r\n\r\n                var paddingY = this.padding.y * this.size.y;\r\n\r\n                if (this.position.y + this.size.y - paddingY <= item.position.y) {\r\n\r\n                    this.groundMaxY = item.position.y - this.size.y + paddingY;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * restore a sprite from existing json-data --applies to data-persistence\r\n         *\r\n         * @function\r\n         * @memberof Sprite\r\n         *\r\n         * @returns (Sprite)\r\n         **********/\r\n\r\n        restoreFrom(data) {\r\n            data.image = new GameImage(data.src || data.image.src);\r\n\r\n            return new Gamestack.Sprite(data);\r\n\r\n        }\r\n\r\n\r\n        /*****************************\r\n         * @ignore\r\n         * #IN-TESTING\r\n         *  fromFile(file_path)\r\n         *  -TODO : complete this function based on code to load Sprite() from file, located in the spritemaker.html file\r\n         *  -TODO: test this function\r\n         ***************************/\r\n\r\n        fromFile(file_path) {\r\n\r\n            if (typeof file_path == 'string') {\r\n\r\n                var __inst = this;\r\n\r\n                $.getJSON(file_path, function (data) {\r\n\r\n                    __inst = new Gamestack.Sprite(data);\r\n\r\n                });\r\n            }\r\n        }\r\n\r\n        /*****************************\r\n         * return a decycled json-string for the sprite --without circular references\r\n         * @returns {string} a json string\r\n         ***************************/\r\n\r\n        toJSONString() {\r\n            return jstr(JSON.decycle(this));\r\n        }\r\n\r\n    }\r\n    ;\r\n\r\n    Gamestack.Sprite = Sprite;\r\n\r\n})();\r\n;(function () {\r\n    console.log('Vector class... creating');\r\n\r\n    /**\r\n     * Creates a Vector object with x, y, and z properties.\r\n     * <info-bit>Vector-2D requires only x and y args --new Vector(10, 10)\r\n     * For Vector-3D, use x,y, and z --new Vector(10, 10, 10)\r\n     * Pass an existing Vector as the sole argument in order to copy that Vector to a new instance</info-bit>\r\n     * @param   {number} x the x coordinate\r\n     * @param   {number} y the y coordinate\r\n     * @param   {number} z the optional z coordinate\r\n     * @param   {number} r the optional r value\r\n     * @returns {Vector} a Vector object\r\n     */\r\n\r\n    class Vector {\r\n        constructor(x, y, z, r) {\r\n\r\n            var copied = false;\r\n\r\n            if (typeof(x) == 'object' && x.hasOwnProperty('x') && x.hasOwnProperty('y')) //optionally pass vector3\r\n            {\r\n                this.x = x.x;\r\n                this.y = x.y;\r\n                this.z = x.z || 0;\r\n\r\n                if (this.z == null) {\r\n                    this.z = 0;\r\n                }\r\n\r\n                this.valid_check();\r\n\r\n                copied = true;\r\n            }\r\n\r\n            if (z == null) {\r\n                z = 0;\r\n            }\r\n\r\n            if(!copied) {\r\n\r\n                this.x = x;\r\n                this.y = y;\r\n                this.z = z;\r\n                this.r = r;\r\n\r\n                this.valid_check();\r\n\r\n            }\r\n        }\r\n\r\n        valid_check() {\r\n            if (this.x == undefined) {\r\n                this.x = 0;\r\n            }\r\n            if (this.y == undefined) {\r\n                this.y = 0;\r\n            }\r\n            if (this.z == undefined) {\r\n                this.z = 0;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Subtracts another Vector from this vector and returns a vector for the resulting difference.\r\n         *\r\n         * @function\r\n         * @param {Vector} v the vector to be subtracted from this vector\r\n         * @memberof Vector\r\n         **********/\r\n\r\n        sub(v) {\r\n            if (typeof(v) == 'number') {\r\n                v = {x: v, y: v, z: v};\r\n            }\r\n            ;\r\n\r\n            return new Gamestack.Vector(this.x - v.x, this.y - v.y, this.z - v.z);\r\n\r\n        }\r\n\r\n        /**\r\n         * Adds another Vector to this vector and returns a vector for the resulting sum.\r\n         *\r\n         * @function\r\n         * @param {Vector} v the vector to be added to this vector\r\n         * @memberof Vector\r\n         **********/\r\n\r\n        add(v) {\r\n            if (typeof(v) == 'number') {\r\n                v = {x: v, y: v, z: v};\r\n            }\r\n            ;\r\n\r\n            return new Gamestack.Vector(this.x + v.x, this.y + v.y, this.z + v.z);\r\n\r\n        }\r\n\r\n        /**\r\n         * Multiplies another Vector by this vector and returns a vector for the resulting product.\r\n         *\r\n         * @function\r\n         * @param {Vector} v the vector that this vector will by muliplied by\r\n         * @memberof Vector\r\n         **********/\r\n\r\n        mult(v) {\r\n            if (typeof(v) == 'number') {\r\n                v = {x: v, y: v, z: v};\r\n            }\r\n            ;\r\n\r\n            return new Gamestack.Vector(this.x * v.x, this.y * v.y, this.z * v.z);\r\n\r\n        }\r\n\r\n        /**\r\n         * Divides another Vector by this vector and returns a vector for the resulting quotient.\r\n         *\r\n         * @function\r\n         * @param {Vector} v the vector for this vector to be divided by\r\n         * @memberof Vector\r\n         **********/\r\n\r\n        div(v) {\r\n            if (typeof(v) == 'number') {\r\n                v = {x: v, y: v, z: v};\r\n            }\r\n            ;\r\n\r\n            return new Gamestack.Vector(this.x / v.x, this.y / v.y, this.z / v.z);\r\n        }\r\n\r\n        /**\r\n         * Rounds this vector to the nearest set of whole numbers and returns the result.\r\n         *\r\n         * @function\r\n         * @memberof Vector\r\n         * @returns {Vector} a Gamestack.Vector object\r\n         **********/\r\n\r\n        round() {\r\n            return new Gamestack.Vector(Math.round(this.x), Math.round(this.y), Math.round(this.z));\r\n\r\n        }\r\n\r\n        /**\r\n         * Floors this vector to the nearest set of whole numbers and returns the result (subtractive-only, an x of 1.7 becomes 1)\r\n         *\r\n         * @function\r\n         * @memberof Vector\r\n         * @returns {Vector} a Gamestack.Vector object\r\n         **********/\r\n\r\n        floor() {\r\n            return new Gamestack.Vector(Math.floor(this.x), Math.floor(this.y), Math.floor(this.z));\r\n\r\n        }\r\n\r\n        /**\r\n         * Ceils this vector to the nearest set of whole numbers  and returns the result (additive-only, an x of 1.2 becomes 2)\r\n         *\r\n         * @function\r\n         * @memberof Vector\r\n         * @returns {Vector} a Gamestack.Vector object\r\n         **********/\r\n\r\n        ceil() {\r\n            return new Gamestack.Vector(Math.ceil(this.x), Math.ceil(this.y), Math.ceil(this.z));\r\n\r\n        }\r\n\r\n        /**\r\n         * An equals-test for vectors. Returns true OR false.\r\n         *\r\n         * @function\r\n         * @memberof Vector\r\n         * @returns {boolean} a true OR false value\r\n         **********/\r\n\r\n        equals(v) {\r\n\r\n            return this.x == v.x && this.y == v.y && this.z == v.z;\r\n        }\r\n\r\n        /**\r\n         * Gets  the specific distance between this and the argument-vector. --applies to x and y of two vectors. Returns a single number.\r\n         *\r\n         * @function\r\n         * @memberof Vector\r\n         * @returns {number} the specific distance between this and the argument-vector\r\n         **********/\r\n\r\n        trig_distance_xy(v) {\r\n\r\n            var dist = this.sub(v);\r\n\r\n            return Math.sqrt(dist.x * dist.x + dist.y * dist.y);\r\n\r\n        }\r\n\r\n\r\n\r\n        is_between(v1, v2) {\r\n            //TODO : overlap vectors return boolean\r\n\r\n            return this.x >= v1.x && this.x <= v2.x &&\r\n                this.y >= v1.y && this.y <= v2.y &&\r\n                this.z >= v1.z && this.z <= v2.z;\r\n\r\n\r\n        }\r\n\r\n        /**\r\n         * Returns a vector-multiple: the original-size, multiplied by a random between the minFloat and maxFloat arguments.\r\n         *\r\n         * @function\r\n         * @memberof Vector\r\n         * @returns {Vector} the resulting vector.\r\n         **********/\r\n\r\n        randomize(minFloat, maxFloat)\r\n        {\r\n\r\n            var random = (Math.random() * (maxFloat - minFloat) + minFloat) * 1000 / 1000;\r\n\r\n            return this.mult(random);\r\n\r\n        }\r\n\r\n        /**\r\n         * Returns a speed vector, based on rotation.\r\n         *\r\n         * @function\r\n         * @param {number} rotation in degrees, 0-360\r\n         * @param {number} speed the level of speed to apply, default being 1\r\n         * @returns {Vector}\r\n         * @memberof Vector\r\n         **********/\r\n\r\n        rotationalSpeedPoint(rotation, speed)\r\n        {\r\n            var r = rotation;\r\n\r\n            if(isNaN(speed))\r\n            {\r\n                speed = 1;\r\n            }\r\n\r\n            if(typeof(rotation) == 'object' && rotation.x)\r\n            {\r\n                r = rotation.x;\r\n            }\r\n\r\n           return new Gamestack.Vector(Math.cos((r) * 3.14 / 180) * speed, Math.sin((r) * 3.14 / 180) * speed);\r\n\r\n        }\r\n\r\n        /**\r\n         * Returns the right-handed angle of degrees between two two position-vectors.\r\n\r\n         * @memberof Vector\r\n         * @function\r\n         * @param {Vector} p1 the 1st vector-argument\r\n         * @param {Vector} p2 the 2nd vector-argument\r\n         * @returns {number} the resulting angle in degrees.\r\n         **********/\r\n\r\n        angleBetween(p1, p2)\r\n        {\r\n\r\n            return Math.atan2(p2.y - p1.y, p2.x - p1.x) * 180 / Math.PI;\r\n        }\r\n\r\n    }\r\n    ;\r\n\r\n    let Vector3 = Vector, Pos = Vector, Size = Vector, Position = Vector, Vector2 = Vector, Rotation = Vector;\r\n\r\n    Gamestack.Vector = Vector;\r\n\r\n    Gamestack.Rotation = Vector;\r\n\r\n    Gamestack.Pos = Vector;\r\n\r\n    Gamestack.Position = Vector;\r\n\r\n    Gamestack.Size = Vector;\r\n\r\n    //The above are a list of synonymous expressions for Vector. All of these do the same thing in this library (store and manipulate x,y,z values)\r\n\r\n    var VectorMath = {\r\n\r\n    rotatePointsXY(x, y, angle) {\r\n\r\n        var theta = angle * Math.PI / 180;\r\n\r\n        var point = {};\r\n        point.x = x * Math.cos(theta) - y * Math.sin(theta);\r\n        point.y = x * Math.sin(theta) + y * Math.cos(theta);\r\n\r\n        point.z = 0;\r\n\r\n        return point\r\n    }\r\n\r\n}\r\n\r\nGamestack.VectorMath = VectorMath;\r\n\r\n})();;class Background extends Gamestack.Sprite {\r\n\r\n    constructor(arg1={}, arg2={}) {\r\n\r\n        super(arg1, arg2);\r\n\r\n        let args = typeof(arg1) == 'object' ? arg1 : {};\r\n\r\n        this.type = args.type || \"parallax\" || \"basic\" || false;\r\n\r\n        this.source_objects = args.objects || args.source_objects || [];\r\n\r\n        this.members = [];\r\n\r\n        this.rows = args.rows || 1;//The Y number of repititions\r\n\r\n        this.cols = args.cols || 1; //The X number of repetitions of the images\r\n\r\n        this.flip = args.flip || false;\r\n\r\n        this.fill = args.fill || false;\r\n\r\n        this.flip = args.flip || false;\r\n\r\n    }\r\n\r\n    Flip(value)\r\n    {\r\n        if(value == undefined)\r\n        {\r\n            this.flip = true;\r\n        }\r\n        else if (value == true || value == false) {\r\n            this.flip = value;\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    Rows(r)\r\n    {\r\n        this.rows = r;\r\n        return this;\r\n    }\r\n\r\n    Cols(c)\r\n    {\r\n        this.cols = c;\r\n        return this;\r\n    }\r\n\r\n    Fill(approxRows, approxCols, gw)\r\n    {\r\n\r\n\r\n        approxRows = approxRows || this.rows || 1;\r\n\r\n        approxCols = approxCols || this.cols || 1;\r\n\r\n        this.members.push(new Background(this)); //\"This\" or base image is always applied\r\n\r\n        for(var x = 0; x < this.source_objects.length; x++)\r\n        {\r\n            this.members.push(new Background(this.source_objects[x]));//src strings OR Sprites()\r\n        }\r\n\r\n        gw = gw || Gamestack.game_windows[0];\r\n\r\n        var w= gw.canvas.width, h = gw.canvas.height,\r\n            xBacksTotal = Math.floor(approxRows / 2), yBacksTotal =  Math.floor(approxCols / 2);\r\n\r\n        var __inst = this;\r\n\r\n        //create first row:\r\n\r\n        for(var y = -yBacksTotal; y <= yBacksTotal + 1; y++)\r\n        {\r\n            console.log('adding background:' + y);\r\n\r\n\r\n            for(var x = -xBacksTotal; x <= xBacksTotal + 1; x++)\r\n            {\r\n\r\n                this.members.push(new Background(this));\r\n\r\n                var b = this.members[this.members.length - 1];\r\n\r\n                b.setSize(this.size);\r\n\r\n                var __inst = this;\r\n\r\n\r\n                b.position.x = x * this.size.x;\r\n\r\n                b.position.y = y * this.size.y;\r\n\r\n\r\n\r\n                b.minX = -xBacksTotal * b.size.x + b.size.x;\r\n\r\n                b.maxX = (xBacksTotal + 1) * b.size.x ;\r\n\r\n                b.minY = -yBacksTotal * b.size.y + b.size.y;\r\n\r\n                b.maxY = yBacksTotal * b.size.y ;\r\n\r\n\r\n                if(x % 2 == 0)\r\n                {\r\n                    b.flipX = true;\r\n\r\n                }\r\n\r\n                if(y % 2 == 0)\r\n                {\r\n                    b.flipY = true;\r\n\r\n                }\r\n\r\n\r\n\r\n                b.onUpdate(function(spr){\r\n\r\n                    spr.campos = gw.camera.position;\r\n\r\n                    var cx = spr.campos.x - (spr.campos.x  % spr.size.x), cy = spr.campos.y - ( spr.campos.y % spr.size.y );\r\n\r\n                    if(spr.position.x - cx < spr.minX)\r\n                    {\r\n\r\n                        spr.position.x = spr.maxX + cx;\r\n\r\n                    }\r\n\r\n                    if(spr.position.x - cx > spr.maxX)\r\n                    {\r\n\r\n                        spr.position.x = spr.minX + cx;\r\n\r\n                    }\r\n\r\n                    if(spr.position.y - cy < spr.minY)\r\n                    {\r\n\r\n                        spr.position.y = spr.maxY + cy;\r\n\r\n                    }\r\n\r\n                    if(spr.position.y - cy > spr.maxY)\r\n                    {\r\n\r\n                        spr.position.y = spr.minY + cy;\r\n\r\n                    }\r\n\r\n                });\r\n\r\n                gw.add(b); //add to window\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    add(object)\r\n    {\r\n        var cleanCheck = object instanceof Gamestack.Sprite || object instanceof Array && object[0] instanceof Gamestack.Sprite; //is Sprite\r\n\r\n        if(!cleanCheck)\r\n        {\r\n            return console.error('Must have: valid contents (Gamestack.Sprite OR [] of Gamestack.Sprite())');\r\n        }\r\n\r\n        if(object instanceof Array)\r\n        {\r\n            this.source_objects.cancat(object)\r\n        }\r\n        else\r\n        {\r\n            this.source_objects.push(object);\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n}\r\n\r\nGamestack.Background = Background;;\r\n\r\n\r\n(function(){\r\n    console.log('Interactive class... creating');\r\n\r\n    class Interactive extends Gamestack.Sprite {\r\n        constructor(args = {}) {\r\n            super(args); //init as Gamestack.Sprite()\r\n\r\n            this.collision_settings = new Gamestack.CollisionSettings(args);\r\n\r\n            this.collideables = args.collideables || [];\r\n\r\n            Gamestack.Extendors.collideable(this, args); //overwrites the onCollide():\r\n\r\n        }\r\n\r\n        Collideables(c)\r\n        {\r\n            this.collideables = c || [];\r\n\r\n            if(!this.collideables instanceof Array)\r\n            {\r\n                return console.error('Must pass array for \"c\" argument');\r\n\r\n            }\r\n\r\n            return this;\r\n        }\r\n\r\n        onCollide() // Gamestack.Interactive instance should have an onCollide() function\r\n        {\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\nGamestack.Interactive = Interactive;\r\n\r\n\r\n})();;\r\n\r\n\r\n(function(){\r\n    console.log('Terrain class... creating');\r\n\r\nclass Terrain extends Gamestack.Sprite\r\n{\r\n    constructor(args={})\r\n    {\r\n        super(args); //init as Gamestack.Sprite()\r\n\r\n        this.collision_settings = new Gamestack.CollisionSettings(args);\r\n\r\n        this.collideables = args.collideables || args.colliders || [];\r\n\r\n        Gamestack.Extendors.collideable(this, args); //overwrites the onCollide():\r\n\r\n\r\n    }\r\n\r\n    Collideables(c)\r\n    {\r\n        this.collideables = c || [];\r\n\r\n        if(!this.collideables instanceof Array)\r\n        {\r\n            return console.error('Must pass array for \"c\" argument');\r\n\r\n        }\r\n\r\n        return this;\r\n    }\r\n    onCollide() // Gamestack.Terrain instance should have an onCollide() function\r\n    {\r\n\r\n    }\r\n\r\n}\r\n\r\n\r\n    Gamestack.Terrain= Terrain;\r\n\r\n})();\r\n;\r\nvar THREE_EXT = {\r\n\r\n    defaults:{\r\n\r\n        DodecahedronGeometry:{radius:1, detail:0},\r\n\r\n        SphereGeometry:{radius:5, widthSegments:32, heightSegments:32},\r\n\r\n        BoxGeometry:{\r\n\r\n            width:20,\r\n\r\n            height:20,\r\n\r\n            depth:20\r\n\r\n        },\r\n\r\n        CylinderGeometry:{radiusTop:5, radiusBottom:5, height:20, heightSegments:32},\r\n\r\n        TorusGeometry:{radius:10, tube:3, radialSegments:16, tubularSegments:100 }\r\n    }\r\n\r\n}\r\n\r\nclass Three extends Gamestack.Sprite //dependency: THREE.js\r\n{\r\n    constructor(args={})\r\n    {\r\n        super(args); //init as Sprite()\r\n\r\n       if(!THREE) //THREE.js library must be loaded\r\n       {\r\n           return console.error('ThreeJSObject():Library: Three.js is required for this object.');\r\n\r\n       }\r\n\r\n        this.scene =  new THREE.Scene();\r\n\r\n       if(args.geometry instanceof String && THREE[args.geometry])\r\n       {\r\n           this.geometry = new THREE[args.geometry]();\r\n       }\r\n       else {\r\n\r\n           this.geometry = args.geometry || new THREE.TorusGeometry(50, 10, 16, 100);\r\n       }\r\n\r\n        this.scene.add( new THREE.AmbientLight( 0xffffff, 1.0  ) );\r\n\r\n\r\n        this.renderer = Gamestack.renderer || new THREE.WebGLRenderer({\r\n                preserveDrawingBuffer: true,\r\n                alpha:true\r\n            });\r\n\r\n        this.renderer.setSize(1000, 1000);\r\n\r\n        this.camera = new THREE.PerspectiveCamera(70, 1, 1, 1000);\r\n\r\n        this.camera.position.z = 1000 / 8;\r\n\r\n        var __inst = this;\r\n\r\n        var src = args.src || \"../assets/game/image/tiles/perlin_3.png\";\r\n\r\n        __inst.loader = new THREE.TextureLoader();\r\n\r\n        __inst.loader.load( src, function ( texture ) {\r\n\r\n            __inst.material = args.material || new THREE.MeshPhongMaterial({\r\n                    map: texture\r\n                });\r\n\r\n            if(!__inst.__init) {\r\n\r\n                __inst.mesh = new THREE.Mesh(__inst.geometry, __inst.material);\r\n\r\n                __inst.scene.add(__inst.mesh);\r\n\r\n                __inst.__init = true;\r\n\r\n            }\r\n\r\n            //__inst.mesh.size.set(__inst.size);\r\n\r\n            __inst.renderer.render(__inst.scene, __inst.camera);\r\n\r\n            __ServerSideFile.file_upload('test.png', __inst.renderer.domElement.toDataURL('image/png'), function(relpath, content){\r\n\r\n                relpath = relpath.replace('client/', '../');\r\n\r\n                __inst.selected_animation = new Animation({src:relpath, frameSize:new Vector(1000, 1000), frameBounds:new VectorFrameBounds(new Vector(0, 0, 0), new Vector(0, 0, 0),new Vector(0, 0, 0))}).singleFrame();\r\n\r\n                __inst.selected_animation.image.domElement.onload = function()\r\n                {\r\n\r\n                    __inst.setSize(new Vector(__inst.selected_animation.image.domElement.width, __inst.selected_animation.image.domElement.height));\r\n\r\n                    __inst.selected_animation.animate();\r\n\r\n\r\n                    console.log(jstr(__inst.selected_animation.frames));\r\n\r\n                };\r\n\r\n            });\r\n\r\n\r\n\r\n        } );\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    three_update()\r\n    {\r\n        console.log('THREE --GS-Object UPDATE');\r\n\r\n        this.mesh.rotation.y += 0.05;\r\n\r\n        this.renderer.clear();\r\n\r\n        this.renderer.setSize(this.size.x, this.size.y);\r\n\r\n        var pixels = new Uint8Array(this.size.x * this.size.y * 4);\r\n\r\n        this.renderer.render(this.scene, this.camera);\r\n\r\n        var gl = this.renderer.getContext();\r\n\r\n        gl.readPixels( 0, 0, this.size.x, this.size.y, gl.RGBA, gl.UNSIGNED_BYTE, pixels );\r\n\r\n        this.selected_animation.selected_frame = {image:{}};\r\n\r\n        this.selected_animation.selected_frame.image.data = new ImageData(new Uint8ClampedArray(pixels), this.size.x, this.size.y);\r\n\r\n    }\r\n    applyAnimativeState()\r\n    {\r\n\r\n\r\n    }\r\n};if (typeof JSON.decycle !== 'function') {\r\n    JSON.decycle = function decycle(object) {\r\n        \"use strict\";\r\n\r\n        var objects = [],   // Keep a reference to each unique object or array\r\n            paths = [];     // Keep the path to each unique object or array\r\n\r\n        return (function derez(value, path) {\r\n\r\n\r\n            var i,          // The loop counter\r\n                name,       // Property name\r\n                nu;         // The new object or array\r\n\r\n            switch (typeof value) {\r\n            case 'object':\r\n\r\n                if (!value) {\r\n                    return null;\r\n                }\r\n\r\n\r\n                for (i = 0; i < objects.length; i += 1) {\r\n                    if (objects[i] === value) {\r\n                        return {$ref: paths[i]};\r\n                    }\r\n                }\r\n\r\n// Otherwise, accumulate the unique value and its path.\r\n\r\n                objects.push(value);\r\n                paths.push(path);\r\n\r\n// If it is an array, replicate the array.\r\n\r\n                if (Object.prototype.toString.apply(value) === '[object Array]') {\r\n                    nu = [];\r\n                    for (i = 0; i < value.length; i += 1) {\r\n                        nu[i] = derez(value[i], path + '[' + i + ']');\r\n                    }\r\n                } else {\r\n\r\n// If it is an object, replicate the object.\r\n\r\n                    nu = {};\r\n                    for (name in value) {\r\n                        if (Object.prototype.hasOwnProperty.call(value, name)) {\r\n                            nu[name] = derez(value[name],\r\n                                path + '[' + JSON.stringify(name) + ']');\r\n                        }\r\n                    }\r\n                }\r\n                return nu;\r\n            case 'number':\r\n            case 'string':\r\n            case 'boolean':\r\n                return value;\r\n            }\r\n        }(object, '$'));\r\n    };\r\n}\r\n\r\nif (typeof JSON.retrocycle !== 'function') {\r\n    JSON.retrocycle = function retrocycle($) {\r\n        \"use strict\";\r\n\r\n        var px =\r\n            /^\\$(?:\\[(?:\\d?|\\\"(?:[^\\\\\\\"\\u0000-\\u001f]|\\\\([\\\\\\\"\\/bfnrt]|u[0-9a-zA-Z]{4}))*\\\")\\])*$/;\r\n\r\n        (function rez(value) {\r\n\r\n            var i, item, name, path;\r\n\r\n            if (value && typeof value === 'object') {\r\n                if (Object.prototype.toString.apply(value) === '[object Array]') {\r\n                    for (i = 0; i < value.length; i += 1) {\r\n                        item = value[i];\r\n                        if (item && typeof item === 'object') {\r\n                            path = item.$ref;\r\n                            if (typeof path === 'string' && px.test(path)) {\r\n                                value[i] = eval(path);\r\n                            } else {\r\n                                rez(item);\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    for (name in value) {\r\n                        if (typeof value[name] === 'object') {\r\n                            item = value[name];\r\n                            if (item) {\r\n                                path = item.$ref;\r\n                                if (typeof path === 'string' && px.test(path)) {\r\n                                    value[name] = eval(path);\r\n                                } else {\r\n                                    rez(item);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }($));\r\n        return $;\r\n    };\r\n}\r\n\r\n\r\n\r\n;/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\n\r\n/***************\r\n *\r\n * @ignore\r\n *\r\n * *****************/\r\n\r\nvar Stats = function () {\r\n\r\n\tvar mode = 0;\r\n\r\n\tvar container = document.createElement( 'div' );\r\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\r\n\tcontainer.addEventListener( 'click', function ( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\t\tshowPanel( ++ mode % container.children.length );\r\n\r\n\t}, false );\r\n\r\n\t//\r\n\r\n\tfunction addPanel( panel ) {\r\n\r\n\t\tcontainer.appendChild( panel.dom );\r\n\t\treturn panel;\r\n\r\n\t}\r\n\r\n\tfunction showPanel( id ) {\r\n\r\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\r\n\r\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\r\n\r\n\t\t}\r\n\r\n\t\tmode = id;\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\r\n\r\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\r\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\r\n\r\n\tif ( self.performance && self.performance.memory ) {\r\n\r\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\r\n\r\n\t}\r\n\r\n\tshowPanel( 0 );\r\n\r\n\treturn {\r\n\r\n\t\tREVISION: 16,\r\n\r\n\t\tdom: container,\r\n\r\n\t\taddPanel: addPanel,\r\n\t\tshowPanel: showPanel,\r\n\r\n\t\tbegin: function () {\r\n\r\n\t\t\tbeginTime = ( performance || Date ).now();\r\n\r\n\t\t},\r\n\r\n\t\tend: function () {\r\n\r\n\t\t\tframes ++;\r\n\r\n\t\t\tvar time = ( performance || Date ).now();\r\n\r\n\t\t\tmsPanel.update( time - beginTime, 200 );\r\n\r\n\t\t\tif ( time >= prevTime + 1000 ) {\r\n\r\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\r\n\r\n\t\t\t\tprevTime = time;\r\n\t\t\t\tframes = 0;\r\n\r\n\t\t\t\tif ( memPanel ) {\r\n\r\n\t\t\t\t\tvar memory = performance.memory;\r\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn time;\r\n\r\n\t\t},\r\n\r\n\t\tupdate: function () {\r\n\r\n\t\t\tbeginTime = this.end();\r\n\r\n\t\t},\r\n\r\n\t\t// Backwards Compatibility\r\n\r\n\t\tdomElement: container,\r\n\t\tsetMode: showPanel\r\n\r\n\t};\r\n\r\n};\r\n\r\nStats.Panel = function ( name, fg, bg ) {\r\n\r\n\tvar min = Infinity, max = 0, round = Math.round;\r\n\tvar PR = round( window.devicePixelRatio || 1 );\r\n\r\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\r\n\t\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\r\n\t\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\r\n\t\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\r\n\r\n\tvar canvas = document.createElement( 'canvas' );\r\n\tcanvas.width = WIDTH;\r\n\tcanvas.height = HEIGHT;\r\n\tcanvas.style.cssText = 'width:80px;height:48px';\r\n\r\n\tvar context = canvas.getContext( '2d' );\r\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\r\n\tcontext.textBaseline = 'top';\r\n\r\n\tcontext.fillStyle = bg;\r\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\r\n\r\n\tcontext.fillStyle = fg;\r\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\r\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\r\n\r\n\tcontext.fillStyle = bg;\r\n\tcontext.globalAlpha = 0.9;\r\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\r\n\r\n\treturn {\r\n\r\n\t\tdom: canvas,\r\n\r\n\t\tupdate: function ( value, maxValue ) {\r\n\r\n\t\t\tmin = Math.min( min, value );\r\n\t\t\tmax = Math.max( max, value );\r\n\r\n\t\t\tcontext.fillStyle = bg;\r\n\t\t\tcontext.globalAlpha = 1;\r\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\r\n\t\t\tcontext.fillStyle = fg;\r\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\r\n\r\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\r\n\r\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\r\n\r\n\t\t\tcontext.fillStyle = bg;\r\n\t\t\tcontext.globalAlpha = 0.9;\r\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n};\r\n;/**\r\n * Tween.js - Licensed under the MIT license\r\n * https://github.com/tweenjs/tween.js\r\n * ----------------------------------------------\r\n *\r\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\r\n * Thank you all, you're awesome!\r\n */\r\n\r\n\r\n/*\r\n*\r\n* @ignore\r\n*\r\n* */\r\n\r\nvar TWEEN = TWEEN || (function () {\r\n\r\n\tvar _tweens = [];\r\n\r\n\treturn {\r\n\r\n\t\tgetAll: function () {\r\n\r\n\t\t\treturn _tweens;\r\n\r\n\t\t},\r\n\r\n\t\tremoveAll: function () {\r\n\r\n\t\t\t_tweens = [];\r\n\r\n\t\t},\r\n\r\n\t\tadd: function (tween) {\r\n\r\n\t\t\t_tweens.push(tween);\r\n\r\n\t\t},\r\n\r\n\t\tremove: function (tween) {\r\n\r\n\t\t\tvar i = _tweens.indexOf(tween);\r\n\r\n\t\t\tif (i !== -1) {\r\n\t\t\t\t_tweens.splice(i, 1);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tupdate: function (time, preserve) {\r\n\r\n\t\t\tif (_tweens.length === 0) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar i = 0;\r\n\r\n\t\t\ttime = time !== undefined ? time : TWEEN.now();\r\n\r\n\t\t\twhile (i < _tweens.length) {\r\n\r\n\t\t\t\tif (_tweens[i].update(time) || preserve) {\r\n\t\t\t\t\ti++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_tweens.splice(i, 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\t};\r\n\r\n})();\r\n\r\n//removed polyfill\r\n\r\nTWEEN.now = Date.now;\r\n\r\nTWEEN.Tween = function (object) {\r\n\r\n\tvar _object = object;\r\n\tvar _valuesStart = {};\r\n\tvar _valuesEnd = {};\r\n\tvar _valuesStartRepeat = {};\r\n\tvar _duration = 1000;\r\n\tvar _repeat = 0;\r\n\tvar _repeatDelayTime;\r\n\tvar _yoyo = false;\r\n\tvar _isPlaying = false;\r\n\tvar _reversed = false;\r\n\tvar _delayTime = 0;\r\n\tvar _startTime = null;\r\n\tvar _easingFunction = TWEEN.Easing.Linear.None;\r\n\tvar _interpolationFunction = TWEEN.Interpolation.Linear;\r\n\tvar _chainedTweens = [];\r\n\tvar _onStartCallback = null;\r\n\tvar _onStartCallbackFired = false;\r\n\tvar _onUpdateCallback = null;\r\n\tvar _onCompleteCallback = null;\r\n\tvar _onStopCallback = null;\r\n\r\n\t// Set all starting values present on the target object\r\n\tfor (var field in object) {\r\n\t\t_valuesStart[field] = parseFloat(object[field], 10);\r\n\t}\r\n\r\n\tthis.to = function (properties, duration) {\r\n\r\n\t\tif (duration !== undefined) {\r\n\t\t\t_duration = duration;\r\n\t\t}\r\n\r\n\t\t_valuesEnd = properties;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.start = function (time) {\r\n\r\n\t\tTWEEN.add(this);\r\n\r\n\t\t_isPlaying = true;\r\n\r\n\t\t_onStartCallbackFired = false;\r\n\r\n\t\t_startTime = time !== undefined ? time : TWEEN.now();\r\n\t\t_startTime += _delayTime;\r\n\r\n\t\tfor (var property in _valuesEnd) {\r\n\r\n\t\t\t// Check if an Array was provided as property value\r\n\t\t\tif (_valuesEnd[property] instanceof Array) {\r\n\r\n\t\t\t\tif (_valuesEnd[property].length === 0) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Create a local copy of the Array with the start value at the front\r\n\t\t\t\t_valuesEnd[property] = [_object[property]].concat(_valuesEnd[property]);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// If `to()` specifies a property that doesn't exist in the source object,\r\n\t\t\t// we should not set that property in the object\r\n\t\t\tif (_object[property] === undefined) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\t_valuesStart[property] = _object[property];\r\n\r\n\t\t\tif ((_valuesStart[property] instanceof Array) === false) {\r\n\t\t\t\t_valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\r\n\t\t\t}\r\n\r\n\t\t\t_valuesStartRepeat[property] = _valuesStart[property] || 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.stop = function () {\r\n\r\n\t\tif (!_isPlaying) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\r\n\t\tTWEEN.remove(this);\r\n\t\t_isPlaying = false;\r\n\r\n\t\tif (_onStopCallback !== null) {\r\n\t\t\t_onStopCallback.call(_object, _object);\r\n\t\t}\r\n\r\n\t\tthis.stopChainedTweens();\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.end = function () {\r\n\r\n\t\tthis.update(_startTime + _duration);\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.stopChainedTweens = function () {\r\n\r\n\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\r\n\t\t\t_chainedTweens[i].stop();\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.delay = function (amount) {\r\n\r\n\t\t_delayTime = amount;\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.repeat = function (times) {\r\n\r\n\t\t_repeat = times;\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.repeatDelay = function (amount) {\r\n\r\n\t\t_repeatDelayTime = amount;\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.yoyo = function (yoyo) {\r\n\r\n\t\t_yoyo = yoyo;\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\r\n\tthis.easing = function (easing) {\r\n\r\n\t\t_easingFunction = easing;\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.interpolation = function (interpolation) {\r\n\r\n\t\t_interpolationFunction = interpolation;\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.chain = function () {\r\n\r\n\t\t_chainedTweens = arguments;\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.onStart = function (callback) {\r\n\r\n\t\t_onStartCallback = callback;\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.onUpdate = function (callback) {\r\n\r\n\t\t_onUpdateCallback = callback;\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.onComplete = function (callback) {\r\n\r\n\t\t_onCompleteCallback = callback;\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.onStop = function (callback) {\r\n\r\n\t\t_onStopCallback = callback;\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n\tthis.update = function (time) {\r\n\r\n\t\tvar property;\r\n\t\tvar elapsed;\r\n\t\tvar value;\r\n\r\n\t\tif (time < _startTime) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif (_onStartCallbackFired === false) {\r\n\r\n\t\t\tif (_onStartCallback !== null) {\r\n\t\t\t\t_onStartCallback.call(_object, _object);\r\n\t\t\t}\r\n\r\n\t\t\t_onStartCallbackFired = true;\r\n\t\t}\r\n\r\n\t\telapsed = (time - _startTime) / _duration;\r\n\t\telapsed = elapsed > 1 ? 1 : elapsed;\r\n\r\n\t\tvalue = _easingFunction(elapsed);\r\n\r\n\t\tfor (property in _valuesEnd) {\r\n\r\n\t\t\t// Don't update properties that do not exist in the source object\r\n\t\t\tif (_valuesStart[property] === undefined) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar start = _valuesStart[property] || 0;\r\n\t\t\tvar end = _valuesEnd[property];\r\n\r\n\t\t\tif (end instanceof Array) {\r\n\r\n\t\t\t\t_object[property] = _interpolationFunction(end, value);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Parses relative end values with start as base (e.g.: +10, -3)\r\n\t\t\t\tif (typeof (end) === 'string') {\r\n\r\n\t\t\t\t\tif (end.charAt(0) === '+' || end.charAt(0) === '-') {\r\n\t\t\t\t\t\tend = start + parseFloat(end, 10);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tend = parseFloat(end, 10);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Protect against non numeric properties.\r\n\t\t\t\tif (typeof (end) === 'number') {\r\n\t\t\t\t\t_object[property] = start + (end - start) * value;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif (_onUpdateCallback !== null) {\r\n\t\t\t_onUpdateCallback.call(_object, value);\r\n\t\t}\r\n\r\n\t\tif (elapsed === 1) {\r\n\r\n\t\t\tif (_repeat > 0) {\r\n\r\n\t\t\t\tif (isFinite(_repeat)) {\r\n\t\t\t\t\t_repeat--;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Reassign starting values, restart by making startTime = now\r\n\t\t\t\tfor (property in _valuesStartRepeat) {\r\n\r\n\t\t\t\t\tif (typeof (_valuesEnd[property]) === 'string') {\r\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesStartRepeat[property] + parseFloat(_valuesEnd[property], 10);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (_yoyo) {\r\n\t\t\t\t\t\tvar tmp = _valuesStartRepeat[property];\r\n\r\n\t\t\t\t\t\t_valuesStartRepeat[property] = _valuesEnd[property];\r\n\t\t\t\t\t\t_valuesEnd[property] = tmp;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_valuesStart[property] = _valuesStartRepeat[property];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (_yoyo) {\r\n\t\t\t\t\t_reversed = !_reversed;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (_repeatDelayTime !== undefined) {\r\n\t\t\t\t\t_startTime = time + _repeatDelayTime;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t_startTime = time + _delayTime;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif (_onCompleteCallback !== null) {\r\n\r\n\t\t\t\t\t_onCompleteCallback.call(_object, _object);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = 0, numChainedTweens = _chainedTweens.length; i < numChainedTweens; i++) {\r\n\t\t\t\t\t// Make the chained tweens start exactly at the time they should,\r\n\t\t\t\t\t// even if the `update()` method was called way past the duration of the tween\r\n\t\t\t\t\t_chainedTweens[i].start(_startTime + _duration);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t};\r\n\r\n};\r\n\r\n\r\nTWEEN.Easing = {\r\n\r\n\tLinear: {\r\n\r\n\t\tNone: function (k) {\r\n\r\n\t\t\treturn k;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tQuadratic: {\r\n\r\n\t\tIn: function (k) {\r\n\r\n\t\t\treturn k * k;\r\n\r\n\t\t},\r\n\r\n\t\tOut: function (k) {\r\n\r\n\t\t\treturn k * (2 - k);\r\n\r\n\t\t},\r\n\r\n\t\tInOut: function (k) {\r\n\r\n\t\t\tif ((k *= 2) < 1) {\r\n\t\t\t\treturn 0.5 * k * k;\r\n\t\t\t}\r\n\r\n\t\t\treturn - 0.5 * (--k * (k - 2) - 1);\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tCubic: {\r\n\r\n\t\tIn: function (k) {\r\n\r\n\t\t\treturn k * k * k;\r\n\r\n\t\t},\r\n\r\n\t\tOut: function (k) {\r\n\r\n\t\t\treturn --k * k * k + 1;\r\n\r\n\t\t},\r\n\r\n\t\tInOut: function (k) {\r\n\r\n\t\t\tif ((k *= 2) < 1) {\r\n\t\t\t\treturn 0.5 * k * k * k;\r\n\t\t\t}\r\n\r\n\t\t\treturn 0.5 * ((k -= 2) * k * k + 2);\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tQuartic: {\r\n\r\n\t\tIn: function (k) {\r\n\r\n\t\t\treturn k * k * k * k;\r\n\r\n\t\t},\r\n\r\n\t\tOut: function (k) {\r\n\r\n\t\t\treturn 1 - (--k * k * k * k);\r\n\r\n\t\t},\r\n\r\n\t\tInOut: function (k) {\r\n\r\n\t\t\tif ((k *= 2) < 1) {\r\n\t\t\t\treturn 0.5 * k * k * k * k;\r\n\t\t\t}\r\n\r\n\t\t\treturn - 0.5 * ((k -= 2) * k * k * k - 2);\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tQuintic: {\r\n\r\n\t\tIn: function (k) {\r\n\r\n\t\t\treturn k * k * k * k * k;\r\n\r\n\t\t},\r\n\r\n\t\tOut: function (k) {\r\n\r\n\t\t\treturn --k * k * k * k * k + 1;\r\n\r\n\t\t},\r\n\r\n\t\tInOut: function (k) {\r\n\r\n\t\t\tif ((k *= 2) < 1) {\r\n\t\t\t\treturn 0.5 * k * k * k * k * k;\r\n\t\t\t}\r\n\r\n\t\t\treturn 0.5 * ((k -= 2) * k * k * k * k + 2);\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tSinusoidal: {\r\n\r\n\t\tIn: function (k) {\r\n\r\n\t\t\treturn 1 - Math.cos(k * Math.PI / 2);\r\n\r\n\t\t},\r\n\r\n\t\tOut: function (k) {\r\n\r\n\t\t\treturn Math.sin(k * Math.PI / 2);\r\n\r\n\t\t},\r\n\r\n\t\tInOut: function (k) {\r\n\r\n\t\t\treturn 0.5 * (1 - Math.cos(Math.PI * k));\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tExponential: {\r\n\r\n\t\tIn: function (k) {\r\n\r\n\t\t\treturn k === 0 ? 0 : Math.pow(1024, k - 1);\r\n\r\n\t\t},\r\n\r\n\t\tOut: function (k) {\r\n\r\n\t\t\treturn k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\r\n\r\n\t\t},\r\n\r\n\t\tInOut: function (k) {\r\n\r\n\t\t\tif (k === 0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (k === 1) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\r\n\t\t\tif ((k *= 2) < 1) {\r\n\t\t\t\treturn 0.5 * Math.pow(1024, k - 1);\r\n\t\t\t}\r\n\r\n\t\t\treturn 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tCircular: {\r\n\r\n\t\tIn: function (k) {\r\n\r\n\t\t\treturn 1 - Math.sqrt(1 - k * k);\r\n\r\n\t\t},\r\n\r\n\t\tOut: function (k) {\r\n\r\n\t\t\treturn Math.sqrt(1 - (--k * k));\r\n\r\n\t\t},\r\n\r\n\t\tInOut: function (k) {\r\n\r\n\t\t\tif ((k *= 2) < 1) {\r\n\t\t\t\treturn - 0.5 * (Math.sqrt(1 - k * k) - 1);\r\n\t\t\t}\r\n\r\n\t\t\treturn 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tElastic: {\r\n\r\n\t\tIn: function (k) {\r\n\r\n\t\t\tif (k === 0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (k === 1) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\r\n\t\t\treturn -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\r\n\r\n\t\t},\r\n\r\n\t\tOut: function (k) {\r\n\r\n\t\t\tif (k === 0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (k === 1) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\r\n\t\t\treturn Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\r\n\r\n\t\t},\r\n\r\n\t\tInOut: function (k) {\r\n\r\n\t\t\tif (k === 0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (k === 1) {\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\r\n\t\t\tk *= 2;\r\n\r\n\t\t\tif (k < 1) {\r\n\t\t\t\treturn -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\r\n\t\t\t}\r\n\r\n\t\t\treturn 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tBack: {\r\n\r\n\t\tIn: function (k) {\r\n\r\n\t\t\tvar s = 1.70158;\r\n\r\n\t\t\treturn k * k * ((s + 1) * k - s);\r\n\r\n\t\t},\r\n\r\n\t\tOut: function (k) {\r\n\r\n\t\t\tvar s = 1.70158;\r\n\r\n\t\t\treturn --k * k * ((s + 1) * k + s) + 1;\r\n\r\n\t\t},\r\n\r\n\t\tInOut: function (k) {\r\n\r\n\t\t\tvar s = 1.70158 * 1.525;\r\n\r\n\t\t\tif ((k *= 2) < 1) {\r\n\t\t\t\treturn 0.5 * (k * k * ((s + 1) * k - s));\r\n\t\t\t}\r\n\r\n\t\t\treturn 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tBounce: {\r\n\r\n\t\tIn: function (k) {\r\n\r\n\t\t\treturn 1 - TWEEN.Easing.Bounce.Out(1 - k);\r\n\r\n\t\t},\r\n\r\n\t\tOut: function (k) {\r\n\r\n\t\t\tif (k < (1 / 2.75)) {\r\n\t\t\t\treturn 7.5625 * k * k;\r\n\t\t\t} else if (k < (2 / 2.75)) {\r\n\t\t\t\treturn 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\r\n\t\t\t} else if (k < (2.5 / 2.75)) {\r\n\t\t\t\treturn 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\r\n\t\t\t} else {\r\n\t\t\t\treturn 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tInOut: function (k) {\r\n\r\n\t\t\tif (k < 0.5) {\r\n\t\t\t\treturn TWEEN.Easing.Bounce.In(k * 2) * 0.5;\r\n\t\t\t}\r\n\r\n\t\t\treturn TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTWEEN.Interpolation = {\r\n\r\n\tLinear: function (v, k) {\r\n\r\n\t\tvar m = v.length - 1;\r\n\t\tvar f = m * k;\r\n\t\tvar i = Math.floor(f);\r\n\t\tvar fn = TWEEN.Interpolation.Utils.Linear;\r\n\r\n\t\tif (k < 0) {\r\n\t\t\treturn fn(v[0], v[1], f);\r\n\t\t}\r\n\r\n\t\tif (k > 1) {\r\n\t\t\treturn fn(v[m], v[m - 1], m - f);\r\n\t\t}\r\n\r\n\t\treturn fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\r\n\r\n\t},\r\n\r\n\tBezier: function (v, k) {\r\n\r\n\t\tvar b = 0;\r\n\t\tvar n = v.length - 1;\r\n\t\tvar pw = Math.pow;\r\n\t\tvar bn = TWEEN.Interpolation.Utils.Bernstein;\r\n\r\n\t\tfor (var i = 0; i <= n; i++) {\r\n\t\t\tb += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\r\n\t\t}\r\n\r\n\t\treturn b;\r\n\r\n\t},\r\n\r\n\tCatmullRom: function (v, k) {\r\n\r\n\t\tvar m = v.length - 1;\r\n\t\tvar f = m * k;\r\n\t\tvar i = Math.floor(f);\r\n\t\tvar fn = TWEEN.Interpolation.Utils.CatmullRom;\r\n\r\n\t\tif (v[0] === v[m]) {\r\n\r\n\t\t\tif (k < 0) {\r\n\t\t\t\ti = Math.floor(f = m * (1 + k));\r\n\t\t\t}\r\n\r\n\t\t\treturn fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif (k < 0) {\r\n\t\t\t\treturn v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\r\n\t\t\t}\r\n\r\n\t\t\tif (k > 1) {\r\n\t\t\t\treturn v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\r\n\t\t\t}\r\n\r\n\t\t\treturn fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tUtils: {\r\n\r\n\t\tLinear: function (p0, p1, t) {\r\n\r\n\t\t\treturn (p1 - p0) * t + p0;\r\n\r\n\t\t},\r\n\r\n\t\tBernstein: function (n, i) {\r\n\r\n\t\t\tvar fc = TWEEN.Interpolation.Utils.Factorial;\r\n\r\n\t\t\treturn fc(n) / fc(i) / fc(n - i);\r\n\r\n\t\t},\r\n\r\n\t\tFactorial: (function () {\r\n\r\n\t\t\tvar a = [1];\r\n\r\n\t\t\treturn function (n) {\r\n\r\n\t\t\t\tvar s = 1;\r\n\r\n\t\t\t\tif (a[n]) {\r\n\t\t\t\t\treturn a[n];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (var i = n; i > 1; i--) {\r\n\t\t\t\t\ts *= i;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ta[n] = s;\r\n\t\t\t\treturn s;\r\n\r\n\t\t\t};\r\n\r\n\t\t})(),\r\n\r\n\t\tCatmullRom: function (p0, p1, p2, p3, t) {\r\n\r\n\t\t\tvar v0 = (p2 - p0) * 0.5;\r\n\t\t\tvar v1 = (p3 - p1) * 0.5;\r\n\t\t\tvar t2 = t * t;\r\n\t\t\tvar t3 = t * t2;\r\n\r\n\t\t\treturn (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n\r\n\r\n//Attach to the global Gamestack object\r\n\r\n/***************\r\n *\r\n * @memberOf Gamestack\r\n *\r\n * *****************/\r\n\r\nGamestack.TWEEN = TWEEN;\r\n\r\n\r\n/*\r\n\r\n// UMD (Universal Module Definition)\r\n(function (root) {\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n\r\n        // AMD\r\n        define([], function () {\r\n            return TWEEN;\r\n        });\r\n\r\n    } else if (typeof module !== 'undefined' && typeof exports === 'object') {\r\n\r\n        // Node.js\r\n        module.exports = TWEEN;\r\n\r\n    } else if (root !== undefined) {\r\n\r\n        // Global variable\r\n        root.TWEEN = TWEEN;\r\n\r\n    }\r\n\r\n})(this);\r\n\r\n*/\r\n;\r\n\r\nfunction CreateGamestack()\r\n{\r\n\r\n    return Gamestack;\r\n}\r\n\r\n\r\n// UMD (Universal Module Definition)\r\n(function (root) {\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n\r\n        // AMD\r\n        define([], function () {\r\n            return Gamestack;\r\n        });\r\n\r\n    } else if (typeof module !== 'undefined' && typeof exports === 'object') {\r\n\r\n        // Node.js\r\n        module.exports = Gamestack;\r\n\r\n    } else if (root !== undefined) {\r\n\r\n        // Global variable\r\n        root.Gamestack = Gamestack;\r\n\r\n    }\r\n\r\n})(this);\r\n"]}